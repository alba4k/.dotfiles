(()=>{var e,t={1594:e=>{e.exports={af:"af-ZA",am:"am-ET",ar:"ar",az:"az-AZ",bg:"bg-BG",bn:"bn-IN",bho:"bp",cs:"cs-CZ",da:"da-DK",de:"de-DE",el:"el-GR",es:"es-ES","es-419":"es-LA",et:"et-EE",fa:"fa-IR",fr:"fr-FR",fi:"fi-FI",fil:"fp-PH","fr-CA":"fr-CA",gu:"gu-IN",hu:"hu-HU",he:"he-IL",hi:"hi-IN",hr:"hr-HR",id:"id-ID",is:"is-IS",it:"it-IT",ja:"ja-JP",kn:"kn-IN",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",ml:"ml-IN",mr:"mr-IN",ms:"ms-MY",nb:"nb-NO",ne:"ne-NP",nl:"nl-NL",or:"or-IN","pa-IN":"pa-IN","pa-PK":"pa-PK",pl:"pl-PL","pt-PT":"pt-PT","pt-BR":"pt-BR",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",sr:"sr-RS",sv:"sv-SE",sw:"sw",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",uk:"uk-UA",ur:"ur",vi:"vi-VN","zh-CN":"zh-CN","zh-TW":"zh-TW",zu:"zu-ZA","ar-EG":"ar-EG","ar-MA":"ar-MA","ar-SA":"ar-SA",eu:"eu-ES",bs:"bs-BA",ca:"ca-ES","zh-HK":"zh-HK","en-GB":"en-GB",gl:"gl-ES",mk:"mk-MK","es-AR":"es-AR","es-MX":"es-MX"}},3751:(e,t,n)=>{"use strict";var s=n(7995),r=n(9830),o=n(4342),i=n(9529);(0,i.JP)({name:"enableNothing",description:"Property to that does nothing.",default:!1});const a=(0,i.JP)({name:"enableNewLoginExperience",description:"Enable new login design and experience",default:!1});var l=n(9496),c=n(3961),u=n(9826);const d="EDO6W2NIL5kJzuuvw2J7",g="bnCvPLsrkevVeOYYpwQG",h="qizIRC62kg8aAqE5y1K6";n(3638),n(4136),n(5976),n(904),n(7155),n(8734),n(2574),n(9692),n(5101),n(3943),n(2548);var p=n(1594),m=n.n(p);const f=864e5;class _{_cache=new Map;constructor(e=null){if(this._ttl=e,null!==e&&(e<1||e>f))throw new Error("TTL should be between 1 (1 ms) and 86400000 (1 day).")}isExpired(e){return null!==e.expiry&&e.expiry<Date.now()}getExpiry(){return null!==this._ttl?Date.now()+this._ttl:null}entries(){return this._cache.entries()}has(e){return void 0!==this.get(e)}get(e){const t=this._cache.get(e);if(void 0!==t){if(!this.isExpired(t))return t.value;this._cache.delete(e)}}set(e,t){this._cache.set(e,{value:t,expiry:this.getExpiry()})}create(e,t){const n=this.get(e);if(void 0===n){const n=t();return this.set(e,n),n}return n}delete(e){this._cache.delete(e)}clear(){this._cache.clear()}cleanup(){this._cache.forEach(((e,t)=>{this.isExpired(e)&&this._cache.delete(t)}))}}let x=function(e){return e.af="af",e.am="am",e.ar="ar",e.arEG="ar-EG",e.arMA="ar-MA",e.arSA="ar-SA",e.az="az",e.bg="bg",e.bn="bn",e.bho="bho",e.bs="bs",e.ca="ca",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.enGB="en-GB",e.es419="es-419",e.es="es",e.esAR="es-AR",e.esMX="es-MX",e.et="et",e.eu="eu",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gl="gl",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.mk="mk",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="nb",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pt-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhHK="zh-HK",e.zhTW="zh-TW",e.zu="zu",e}({});const v=new Intl.Locale(x.en);var w=function(e){return e.AR="، ",e.FA="، ",e.EN=", ",e}(w||{});function y(e){const t=`(?:${e.join("|")})`;return new RegExp(String.raw`(\{${t}\}|%${t}%)`,"g")}const b=new class{_localeForTranslation=v;_localeForFormatting=v;_localeForURLPath=v;_translations={};_relativeTimeFormat=null;_dateTimeFormats=new _;_pluralRules=null;getRelativeTimeFormat(){return null===this._relativeTimeFormat&&(this._relativeTimeFormat=new Intl.RelativeTimeFormat(this._localeForFormatting)),this._relativeTimeFormat}getDateTimeFormat(e){const t=JSON.stringify(Object.keys(e).sort().map((t=>({[t]:e[t]}))));return this._dateTimeFormats.create(t,(()=>new Intl.DateTimeFormat(this._localeForFormatting,e)))}getPluralRules(){return null===this._pluralRules&&(this._pluralRules=new Intl.PluralRules(this._localeForTranslation)),this._pluralRules}getPluralKey(e){const t=this.getPluralRules();try{return"string"==typeof e&&(e=parseInt(e,10)),t.select(e)}catch{return"other"}}initialize({localeForTranslation:e,localeForFormatting:t,translations:n}){var s;this._localeForTranslation=new Intl.Locale(e),this._localeForFormatting=("string"==typeof(s=t??e)&&(s=new Intl.Locale(s)),"ar"===s.baseName?new Intl.Locale(s,{numberingSystem:"latn"}):s),this._localeForURLPath=function(e){"string"==typeof e&&(e=new Intl.Locale(e));const t=new Set([x.paIN,x.paPK,x.zhCN,x.zhTW,x.zhHK]);return e?t.has(e.baseName)?e:new Intl.Locale(e.language):v}(e),this._relativeTimeFormat=null,this._dateTimeFormats.clear(),this._pluralRules=null,this._translations=n}getLocaleForTranslation(){return this._localeForTranslation.baseName}getLocaleForFormatting(){return this._localeForFormatting.baseName}getLocaleForURLPath(){return this._localeForURLPath.baseName}getLocaleForSmartling(){const e=this._localeForTranslation.baseName;return m()[e]||e}getTranslations(){return this._translations}toLocaleLowerCase(e){return e?.toLocaleLowerCase(this._localeForTranslation)}toLocaleUpperCase(e){return e?.toLocaleUpperCase(this._localeForTranslation)}get(e,...t){const n=e in this._translations?this._translations[e]:e;let s="";if("string"!=typeof n){const e=t[0],r=n[this.getPluralKey(e)];void 0!==r?s=r:n.other&&(s=n.other)}else s=n;if(/%\d%/.test(s)){if(!["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop-auth.error"].includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}const r={},o={};t.forEach(((e,t)=>{const n="object"!=typeof e||null===e||(0,l.isValidElement)(e)?[[t,e]]:Object.entries(e);for(const[e,t]of n)(0,l.isValidElement)(t)?o[e]=t:void 0!==t&&(r[e]=t)})),s=s.replace(y(Object.keys(r)),((e,t)=>{const n=t.slice(1,-1),s=r[n];return"number"==typeof s?this.formatNumber(s):s}));const i=Object.keys(o);return i.length?(0,l.createElement)(l.Fragment,null,s.split(y(i)).map(((e,t)=>{if(t%2){const t=e.slice(1,-1),n=o[t];return(0,l.cloneElement)(n,{key:n.key??t})}return e})).filter((e=>""!==e))):s}getSeparator(){switch(new Intl.Locale(this._localeForTranslation).language){case x.ar:return w.AR;case x.fa:return w.FA;default:return w.EN}}formatNumber(e,t){return e.toLocaleString(this._localeForFormatting,t)}formatNumberCompact(e){return this.formatNumber(e,{notation:"compact",maximumFractionDigits:1})}formatDate(e,t=null){const n=t||{year:"numeric",month:"long",day:"numeric"};return this.getDateTimeFormat(n).format(e)}formatRelativeDate(e,t=null,n=new Date){const s=this.getRelativeTimeFormat(),r=e.getTime()-n.getTime(),o=Math.abs(r)<2592e6;if(null!==s&&o){const{weeks:e,days:t,hours:n,minutes:o,seconds:a}=(i=r,{seconds:Math.round(i/1e3),minutes:Math.round(i/1e3/60),hours:Math.round(i/1e3/60/60),days:Math.round(i/1e3/60/60/24),weeks:Math.round(i/1e3/60/60/24/7)});return Math.abs(t)>=7?s.format(e,"weeks"):Math.abs(n)>=24?s.format(t,"days"):Math.abs(o)>=60?s.format(n,"hours"):Math.abs(a)>=60?s.format(o,"minutes"):s.format(a,"seconds")}var i;return this.formatDate(e,t)}};let E=function(e){return e.AD="ad",e.ALBUM="album",e.ARTIST="artist",e.ARTIST_CONCERTS="artist-concerts",e.AUDIOBOOK="audiobook",e.CHAPTER="chapter",e.CONCERT="concert",e.CONCERTS="concerts",e.EPISODE="episode",e.PODCAST_SHORT="podcast-short",e.GENRE="genre",e.VIEW="view",e.PLAYLIST="playlist",e.PLAYLISTV2="playlist-v2",e.RADIO="radio",e.SHOW="show",e.TRACK="track",e.UNKNOWN="unknown",e.USER="user",e.LIKED_SONGS="liked-songs",e.LOCAL_FILES="local-files",e.YOUR_EPISODES="your-episodes",e.FOLDER="folder",e}({});const N="intl-",k=(new RegExp(`${`/${N}`}([a-zA-Z0-9-]+)`),[]),S=[x.id,x.de,"pt",x.ja,x.fr,x.ar,x.es,x.tr,x.it],[O]=(x.en,E.ALBUM,E.ARTIST,E.TRACK,E.CONCERT,E.CONCERTS,x.hu,S);k.length||x.ca,x.zhCN,x.es419,x.es;var I=n(4637);const A=(0,l.createContext)(void 0),C=({value:e,children:t})=>(0,I.jsx)(A.Provider,{value:e,children:t}),R=(0,l.createContext)(void 0),L=({instance:e,children:t})=>(0,I.jsx)(R.Provider,{value:e,children:t});var j=n(2102);const T=l.memo((function({spec:e,children:t}){const n=(0,l.useMemo)((()=>e?.getAbsoluteLocation()??null),[e]);return(0,I.jsx)(C,{value:n,children:t})})),M=(e,t)=>{const n=(()=>{const e=(0,l.useContext)(R);if(void 0===e)throw new Error("useUBILogger() must be used within a UBILoggerContextProvider");return e})(),s=(()=>{const e=(0,l.useContext)(A);if(void 0===e)throw new Error("useUBIEventLocation() must be used within a UBIEventLocationContextProvider");return e})(),r=(0,j.NY)((()=>({...t,parentAbsoluteLocation:t.parentAbsoluteLocation??s})),[t,s]);return{spec:(0,l.useMemo)((()=>e(r)),[e,r]),logger:n,UBIFragment:T}};n(6404);var P=n(6479);const F=({toggleSettings:e})=>{const{spec:t,logger:n}=M(P.i,{}),s=t.headerFactory().previewExperienceButtonFactory().hitNavigateToExternalUri({destination:"https://open.spotify.com/"});return(0,I.jsxs)("header",{className:d,children:[(0,I.jsx)("div",{children:(0,I.jsx)("img",{className:g,src:"images/logo.svg",alt:""})}),(0,I.jsxs)("div",{className:h,children:[(0,I.jsx)(c.D,{onClick:e,size:"small",colorSet:"invertedDark",children:b.get("desktop.login.PreferencesLink")}),(0,I.jsx)(c.D,{as:"a",href:"https://open.spotify.com/",onClick:()=>{n.logInteraction(s)},size:"small",iconTrailing:u.T,colorSet:"invertedDark",children:b.get("desktop-auth.login.preview-experience")})]})]})},D="dDq7z7SMlOtaz9XvBhD8",U="U5LyL65TJ6tdGjHlaK1q",B="awxiyoFzSyDm_MbWN_eY";var G=n(7924);const W=e=>n.g&&"function"==typeof n.g._getSpotifyModule?new Promise(((t,s)=>{n.g._getSpotifyModule("bridge").executeRequest(JSON.stringify(e),{onSuccess:t,onFailure:s})})):null,z="https://www.spotify.com/redirect/account-page/",K="showSettings",H={id:"UnknownLoginErrorMessage"},V={id:"DefaultErrorMessage",replace:[K]},J={127:{id:"SessionTerminatedMessage"},3:{id:"BadCredentialsMessage"},4:{id:"ErrorResolvingDNS"},53:{id:"ErrorProxyUnauthorized"},54:{id:"ErrorProxyForbidden"},55:{id:"ErrorProxyAuthRequired",replace:[K]},400:H,401:H,402:{id:"CriticalUpdate"},403:{id:"UserBannedMessage"},404:H,405:H,406:{id:"UserNotAllowedOnPlatformMessage"},407:{id:"MissingUserInfoMessage",replace:[z]},408:{id:"RegionMismatchMessage",replace:[z,"https://www.spotify.com/redirect/upgrade-product/"]},409:{id:"PremiumUsersOnlyMessage"},410:{id:"BadCredentialsMessage"},411:H,412:{id:"BadCredentialsMessage"},413:{id:"CreateUserDeniedMessage"},414:H,415:H,416:H,417:{id:"FacebookCredentialsMisusedMessage"},418:H,"critical-update-error":{id:"ClientUpdateFail",replace:["https://www.spotify.com/redirect/download/"]}},q={1:H,2:H,3:{id:"BadCredentialsMessage"},4:H,5:H,6:H,7:H,8:H,9:H},Z={1:{silent:!0},2:H,3:H,4:{id:"SessionExpiredMessage"},5:V};function X(e,t,n){if(0===t)return!1;if(!e&&!t)return!1;let s=J;switch(e){case"session":s=q;break;case"desktop_login_accounts":s=Z}const r=s[t]||V;if(r.silent)return!1;const o=r.replace||[];let i="";switch(r.id){case"UnknownLoginErrorMessage":i=b.get("desktop.login.UnknownLoginErrorMessage");break;case"DefaultErrorMessage":i=b.get("desktop.login.DefaultErrorMessage",o[0]);break;case"SessionTerminatedMessage":i=b.get("desktop.login.SessionTerminatedMessage");break;case"SessionExpiredMessage":i=b.get("desktop.login.SessionExpiredMessage");break;case"BadCredentialsMessage":i=b.get("desktop.login.BadCredentialsMessage");break;case"ErrorResolvingDNS":i=b.get("desktop.login.ErrorResolvingDNS");break;case"ErrorProxyUnauthorized":i=b.get("desktop.login.ErrorProxyUnauthorized");break;case"ErrorProxyForbidden":i=b.get("desktop.login.ErrorProxyForbidden");break;case"ErrorProxyAuthRequired":i=b.get("desktop.login.ErrorProxyAuthRequired",o[0]);break;case"CriticalUpdate":i=b.get("desktop.login.CriticalUpdate");break;case"UserBannedMessage":i=b.get("desktop.login.UserBannedMessage");break;case"UserNotAllowedOnPlatformMessage":i=b.get("desktop.login.UserNotAllowedOnPlatformMessage");break;case"MissingUserInfoMessage":i=b.get("desktop.login.MissingUserInfoMessage",o[0]);break;case"RegionMismatchMessage":i=b.get("desktop.login.RegionMismatchMessage",o[0],o[1]);break;case"PremiumUsersOnlyMessage":i=b.get("desktop.login.PremiumUsersOnlyMessage");break;case"CreateUserDeniedMessage":i=b.get("desktop.login.CreateUserDeniedMessage");break;case"ClientUpdateFail":i=b.get("desktop.login.ClientUpdateFail",o[0]);break;case"FbUserNotFoundSignUp":i=b.get("desktop.login.FbUserNotFoundSignUp",o[0])}return n?`${i}<br>${b.get("desktop.login.errorCode",n)}`:i}var Y=n(94),$=n(4460);const Q="_Cavu1tQ2xHOf1gnVGLI",ee="OAeAxLyDsiZO9kZm0WTJ",te="aO8ExrFCupBc13AZlOiu";var ne=n(5530),se=n.n(ne);function re(){return se().create().toString()}var oe=n(7249);const ie="RKmCwNfF52QOvDMMoteA",ae="VDAySBjjOh9Kf83VFHyw",le="N8UxiIkVqP_rLpZHNysn",ce="E5bQk5goX9hChELcTBbe",ue="cgl3eWBkELRCNdMhDX8w",de="cRd8EyQyHz4DK42rr3yw";var ge=n(4875),he=n.n(ge),pe=n(6316),me=n.n(pe);const fe=e=>{const{isOpen:t,contentLabel:n,children:s,className:r,overlayClassName:o,animated:i,animation:a,shouldFocusAfterRender:l=!0,...c}=e;let u=0;return i?u=300:a?.closeTimeoutMs&&(u=a.closeTimeoutMs),(0,I.jsx)(me(),{className:{base:he()("GenericModal","encore-dark-theme",{"GenericModal--animated":i},[a?.modal?.base,r]),afterOpen:he()("",{"GenericModal--afterOpen":i},[a?.modal?.afterOpen]),beforeClose:he()("",{"GenericModal--beforeClose":i},[a?.modal?.beforeClose])},overlayClassName:{base:he()("GenericModal__overlay",{"GenericModal__overlay--animated":i},[a?.overlay?.base,o]),afterOpen:he()("",{"GenericModal__overlay--afterOpen":i},[a?.overlay?.afterOpen]),beforeClose:he()("",{"GenericModal__overlay--beforeClose":i},[a?.overlay?.beforeClose])},bodyOpenClassName:"GenericModal__Body--open",isOpen:t,...u?{closeTimeoutMS:u}:{},shouldFocusAfterRender:l,preventScroll:!0,ariaHideApp:!1,contentLabel:n,...c,children:s})},_e=({isSigningUp:e,closeModal:t,retryOpeningBrowser:n,errorMessage:s,isOpen:r=!0})=>(0,I.jsx)(fe,{className:ie,isOpen:r,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldFocusAfterRender:!0,overlayClassName:le,onRequestClose:t,"aria-label":e?b.get("desktop-auth.login.redirect-to-browser-signup"):b.get("desktop-auth.login.redirect-to-browser-login"),children:(0,I.jsxs)("div",{className:ae,children:[(0,I.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""}),(0,I.jsx)(Y.D,{variant:"alto",semanticColor:"textBase",children:e?b.get("desktop-auth.login.redirect-to-browser-signup"):b.get("desktop-auth.login.redirect-to-browser-login")}),s&&(0,I.jsxs)("div",{className:ue,role:"alert","aria-live":"assertive",children:[(0,I.jsx)(oe.l,{className:de}),(0,I.jsx)("span",{dangerouslySetInnerHTML:{__html:s}})]}),(0,I.jsxs)("button",{className:ce,onClick:n,children:[!s&&(0,I.jsx)(Y.D,{variant:"ballad",semanticColor:"textSubdued",children:b.get("desktop-auth.login.not-seeing-browser")}),(0,I.jsx)(Y.D,{variant:"balladBold",semanticColor:"textBase",children:b.get("desktop-auth.login.try-again")})]})]})});let xe=function(e){return e.XSMALL="XSMALL",e.SMALL="SMALL",e.MEDIUM="MEDIUM",e.LARGE="LARGE",e.XLARGE="XLARGE",e}({});n(2826);const ve=()=>"undefined"==typeof window;function we(e){return!ve()&&e instanceof HTMLElement}let ye;const be={subscribersByElement:new WeakMap,get resizeObserver(){return ye||(ye=new ResizeObserver((e=>{Array.isArray(e)&&e.forEach((t=>{const n={width:Math.round(t.contentRect.width),height:Math.round(t.contentRect.height)};(be.subscribersByElement.get(t.target)??new Set).forEach((s=>{s(n,t,e)}))}))}))),ye}};function Ee({onResize:e,refOrElement:t,observeOnly:n,observeOnMount:s=!1}){const r=(0,l.useRef)(e);r.current=e;const o=(0,l.useRef)(n);o.current=n;const i=(0,l.useRef)({width:-1,height:-1}),a=(0,l.useCallback)(((e,t,n)=>{if(!r.current)return;const s=i.current.width!==e.width,a=i.current.height!==e.height;("width"===o.current&&s||"height"===o.current&&a||!o.current&&(s||a))&&r.current(e,t,n),i.current.width=e.width,i.current.height=e.height}),[]),c=function({refOrElement:e,subscriber:t}){let n=null;const s=(0,l.useRef)(null),r=(0,l.useRef)(null),o=(0,l.useRef)(null),i=(0,l.useRef)(),a=(0,l.useRef)(t);a.current=t;const c=(0,l.useCallback)((()=>{let t=null;r.current?t=r.current:s.current?t=s.current:we(e)&&(t=e),o.current!==t&&(i.current&&(i.current(),i.current=null),o.current=t,t&&a.current&&(i.current=a.current(t)))}),[e]),u=(0,l.useCallback)((e=>{r.current=e,c()}),[c]);return e&&!we(e)&&(n=e),(0,l.useEffect)((()=>{n&&(s.current=n.current),c()}),[n,n?.current,c]),(0,l.useEffect)((()=>()=>{i?.current?.()}),[]),u}({refOrElement:t,subscriber:e=>(s&&a({width:e.offsetWidth,height:e.offsetHeight},null,[]),be.subscribersByElement.has(e)||(be.resizeObserver.observe(e),be.subscribersByElement.set(e,new Set)),be.subscribersByElement.get(e)?.add(a),()=>{be.subscribersByElement.get(e)?.delete(a),0===be.subscribersByElement.get(e)?.size&&(be.resizeObserver.unobserve(e),be.subscribersByElement.delete(e))})});return c}function Ne(e,t,n){const[s,r]=(0,l.useState)(),o=Object.entries(e).sort(((e,t)=>t[1]-e[1]));return{ref:Ee({refOrElement:n,observeOnly:t,onResize:({[t]:e})=>{if(void 0===e)return;const n=o.find((([,t])=>e>=t)),i=n&&n[0];i&&i!==s&&r(i)}}),breakpoint:s}}var ke=function(e){return e[e.SUCCESS=0]="SUCCESS",e[e.OPERATION_ABORTED=1]="OPERATION_ABORTED",e[e.OPERATION_TIMED_OUT=2]="OPERATION_TIMED_OUT",e[e.LOGIN_BAD_CREDENTIALS=3]="LOGIN_BAD_CREDENTIALS",e[e.LOGIN_BAD_APP_KEY=4]="LOGIN_BAD_APP_KEY",e[e.LOGIN_BAD_CLIENT_VERSION_INFO=5]="LOGIN_BAD_CLIENT_VERSION_INFO",e[e.STORAGE_INITIALIZATION_FAILED=6]="STORAGE_INITIALIZATION_FAILED",e[e.MULTIPLE_LOGIN_NOT_ALLOWED=7]="MULTIPLE_LOGIN_NOT_ALLOWED",e[e.OPERATION_CANCELLED=8]="OPERATION_CANCELLED",e[e.BAD_DEVICE_INFO=9]="BAD_DEVICE_INFO",e[e.INTERNAL_ERROR=10]="INTERNAL_ERROR",e}(ke||{});const Se=({titleStrings:e,titleVariants:t,widthBreakpoint:n,heightBreakpoint:s})=>{const[r,o]=(0,l.useState)(void 0),[i,a]=(0,l.useState)(!1),[d,g]=(0,l.useState)(!1),h=(0,l.useRef)(0),{spec:p,logger:m}=M(P.i,{}),f=p.footerFactory().signUpFreeButtonFactory().hitNavigateToWebviewUri({destination:"/signup"}),_=p.footerFactory().loginButtonFactory().hitNavigateToWebviewUri({destination:"/login"}),x=async e=>{const t=++h.current,n=re();g(e),o(void 0),a(!0);try{await W({name:"login-accounts",args:[{method:"login-accounts",enableSignup:e,actionHash:n}]}),location.href="spotify:app:xpui"}catch(n){const s="string"==typeof n?JSON.parse(n):n;if(t!==h.current)return;a(!1);let r=X(s.errorCategory,s.errorCode,s.errorReference);"desktop_login_accounts"===s.errorCategory&&s.errorCode===ke.OPERATION_TIMED_OUT&&(r=e?b.get("desktop-auth.login.signup-time-out"):b.get("desktop-auth.login.login-time-out")),o(r||void 0)}},v=()=>{let e=t[n??xe.MEDIUM];return n===xe.LARGE&&s===xe.SMALL?e=t[xe.MEDIUM]:n===xe.MEDIUM&&s===xe.LARGE?e=t[s]:n!==xe.SMALL||s!==xe.MEDIUM&&s!==xe.LARGE||(e=t[s]),e};return(0,I.jsxs)(I.Fragment,{children:[i&&(0,I.jsx)(_e,{isSigningUp:d,closeModal:()=>a(!1),retryOpeningBrowser:()=>{x(!0)},errorMessage:r}),(0,I.jsxs)("div",{className:Q,children:[(0,I.jsx)("div",{className:te,children:e.map(((e,t)=>(0,I.jsx)(Y.D,{variant:v(),semanticColor:"textBase",children:e},`title-${t}`)))}),(0,I.jsxs)("div",{className:ee,children:[(0,I.jsx)(c.D,{onClick:()=>{m.logInteraction(f),x(!0)},iconTrailing:u.T,"data-testid":"signup-button",children:b.get("desktop-auth.login.sign-up-with-browser")}),(0,I.jsx)($.P,{onClick:()=>{m.logInteraction(_),x(!1)},iconTrailing:u.T,children:b.get("desktop-auth.login.log-in-with-browser")})]})]})]})},Oe="pGPnNDcYgyNwnreAcAjH",Ie="SH3eUKfHc4CgBmWIBRrv",Ae="Tcw5QBhdNr3DQLv4tFI6",Ce="Z0UVjrWuri5SAyaPIcXN",Re="AW58_lCPMJQuX4DRlFnb",Le="Dd2IOSyZz6e01mIY_yfr";var je=n(9607),Te=n(8599);const Me=({nrSteps:e,atStep:t,navigate:n,backgroundImage:s})=>(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:Oe,children:[(0,I.jsxs)("div",{className:Ie,children:[(0,I.jsx)(c.D,{colorSet:"invertedDark",size:"medium",iconOnly:je.e,onClick:()=>n((t-1+e)%e),"aria-label":"previous page"}),(0,I.jsx)(c.D,{colorSet:"invertedDark",size:"medium",iconOnly:Te.V,onClick:()=>n((t+1)%e),"aria-label":"next page"})]}),(0,I.jsx)("div",{className:Ce,children:Array.from({length:e}).map(((e,s)=>(0,I.jsx)("button",{className:Ae,onClick:()=>n(s),children:(0,I.jsx)("div",{className:he()(Re,{[Le]:t===s}),"aria-label":`navigate to page ${s+1}`})},s)))})]}),s]}),Pe="ziwA70F7A7bE1f_6JfC6",Fe="OspetDqlUGDfoHpTMfNO",De="GFbAscggSBjAyjtM_3jg",Ue="pi2IJ4liRapxpGdxMJu5",Be=({imageLocale:e,fadeInRef:t})=>(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("img",{className:he()(Pe,{[Fe]:t.current}),src:`images/localised-carousel-image/login-1-${e}.avif`,onAnimationEnd:()=>{t.current=!1},alt:""}),(0,I.jsx)("div",{className:Ue}),(0,I.jsx)("div",{className:De})]}),Ge=({imageLocale:e,fadeInRef:t})=>(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("img",{className:he()(Pe,{[Fe]:t.current}),src:`images/localised-carousel-image/login-2-${e}.avif`,onAnimationEnd:()=>{t.current=!1},alt:""}),(0,I.jsx)("div",{className:Ue}),(0,I.jsx)("div",{className:De})]}),We="t71Gs8ndLnfWLdcqPzTw",ze="eSEJ1rqeTzD_6sklBWTI",Ke="XGEPBM1JHuPOpeuZsIwA",He="Kj3InjxX0eAmTViGluAm",Ve="_SsAtuLKRe2TvyQ7V_iu",Je="IONRZYfY863Fg8_TZZwW",qe="mzc8KoGBYnUXfOViDxlH",Ze=["de","en-GB","es","es-MX","fr-CA","fr","hi","id","pt-BR","tr"],Xe=({imgSrc:e,reverse:t})=>{const[n,s]=(0,l.useState)(!1),[r,o]=(0,l.useState)(!1),[i,a]=(0,l.useState)(!1),c=n&&r&&i;return(0,I.jsxs)("div",{className:he()(ze,{[Ke]:c&&!t,[He]:c&&t}),children:[(0,I.jsx)("img",{src:e,className:Je,onLoad:()=>{s(!0)},alt:""}),(0,I.jsx)("img",{src:e,className:Je,onLoad:()=>{o(!0)},alt:""}),(0,I.jsx)("img",{src:e,className:Je,onLoad:()=>{a(!0)},alt:""})]})},Ye=({fadeInRef:e})=>((0,l.useEffect)((()=>{e.current=!1}),[e]),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{className:he()(We,{[Ve]:e.current}),children:[...Array(6).keys()].concat([...Array(6).keys()]).concat([...Array(6).keys()]).map(((e,t)=>(0,I.jsx)(Xe,{imgSrc:`images/artwork-grid/row-${e+1}.avif`,reverse:t%2==0},`image-row-${t}`)))}),(0,I.jsx)("div",{className:qe})]})),$e=2,Qe=3,et=4,tt={"auto-detect":{label:()=>b.get("desktop.settings.proxy.autodetect")},"no-proxy":{label:()=>b.get("desktop.settings.proxy.noproxy")},http:{label:()=>b.get("desktop.settings.proxy.http")},socks4:{label:()=>b.get("desktop.settings.proxy.socks4")},socks5:{label:()=>b.get("desktop.settings.proxy.socks5")}},nt=[{enumKey:"auto-detect",enumValue:0},{enumKey:"no-proxy",enumValue:1},{enumKey:"http",enumValue:2},{enumKey:"socks4",enumValue:3},{enumKey:"socks5",enumValue:4}];var st=n(6407);const rt="mpdBa62OP4Fr5wvCsa89",ot="acVhMt5pELcXQyLaaPuV",it="AavUTirpKSAHapguSAy0",at="SkbGMKYv49KtJNB5XxdX",lt="qfjicQPaTTPrLWJWRxMQ",ct=({id:e,type:t,placeHolder:n,inputRef:s,handleOnChange:r})=>(0,I.jsx)("input",{type:t||"text",id:e,"data-testid":e,className:at,placeholder:n,ref:s,onChange:r}),ut=({children:e,label:t})=>(0,I.jsx)(st.c,{label:t,className:lt,children:e});var dt=n(2842),gt=n.n(dt);function ht(){return"Safari"===gt().parse(window.navigator.userAgent).browser.name}const pt="zrvvPyoxE6wQNqnu0yWA",mt="jmu6DFPvhxRl0wSfmv2O",ft=({value:e,id:t,children:n,disabled:s,onSelect:r,className:o,dir:i})=>(0,I.jsx)("span",{className:o,children:(0,I.jsx)("select",{className:he()(pt,{[mt]:ht()}),value:e?.toString(),id:t,disabled:s,onBlur:()=>{},onChange:e=>{r(e.target.value)},dir:i,children:n})}),_t=(0,l.createContext)(void 0),xt=({children:e})=>{const[t,n]=(0,l.useState)(!1),[s,r]=(0,l.useState)(new Set),o=(0,l.useCallback)(((e,t)=>{r((n=>{if(n.has(e)===t)return n;const s=new Set(n);return t?s.add(e):s.delete(e),s}))}),[]),i=s.size>0;return(0,I.jsx)(_t.Provider,{value:{sectionMatch:t,setSectionMatch:n,sectionContainsMatch:i,setSectionFilterMatchQueryValue:o},children:e})},vt=()=>{const e=(0,l.useContext)(_t);if(void 0===e)throw new Error("useSectionMatchState() must be used within a SectionFilterMatchContextProvider");return e};(0,n(8244).Ue)((e=>({lastFilterState:"",lastFilteredUri:"",setLastState:(t,n)=>{e({lastFilterState:t,lastFilteredUri:n})}})));const wt=(0,l.createContext)({setFilter:()=>{throw new Error("setFilter must be used within a FilterProvider")},filter:""});n(5236);const yt=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"}),bt=/\p{White_Space}/u,Et=/\p{P}/u,Nt=/\p{sc=Han}/u;function kt(e){return null!==e&&bt.test(e)}function St(e){return null!==e&&(e<="/"||e>=":"&&e<="@"||"\\"===e||kt(e))}function Ot(e){return null!==e&&Et.test(e)}function It(e){return null!==e&&Nt.test(e)}class At{constructor(e,t,n){if(t<0||n<0||t+n>e.length)throw new RangeError;this.data=e,this.offset=t,this.length=n,this.position=0}static from(e){const t=Array.from(e.normalize("NFC"));return new At(t,0,t.length)}toString(){return this.data.slice(this.offset,this.offset+this.length).join("")}slice(e=0,t=this.length){if(e<0||t>this.length)throw new RangeError;const n=this.offset+e,s=t-e;return new At(this.data,n,s)}nextCodePoint(){return this.position===this.length?null:this.data[this.offset+this.position++]}}function Ct(e){let t;do{t=e.nextCodePoint()}while(null!==t&&kt(t)||Ot(t));return t}function Rt(e,t){let n=Ct(e),s=Ct(t);if(null===s)return{offset:0,length:0};const r=e.offset+e.position-1;let o=e.offset+e.position;for(;;){if(null===n&&null===s)return{offset:r,length:o-r};if(null===s)return{offset:r,length:o-r};if(null===n)return null;if(0!==yt.compare(n,s))return null;o=e.offset+e.position,n=Ct(e),s=Ct(t)}}function Lt(e,t){let n,s,r;do{s=e.position,n=e.nextCodePoint()}while(null!==n&&kt(n));if(t?.segmentQuotedStrings&&function(e){return null!==e&&('"'===e||"'"===e)}(n)){const t=n;s=e.position;do{r=e.position,n=e.nextCodePoint()}while(null!==n&&n!==t);return null===n&&s===r?null:e.slice(s,r)}do{if(r=e.position,t?.segmentCJKUnifieIdeographs&&It(n))break;n=e.nextCodePoint()}while(null!==n&&!St(n));return null===n&&s===r?null:e.slice(s,r)}function jt(e){return Lt(e,{segmentQuotedStrings:!0,segmentCJKUnifieIdeographs:!1})}function Tt(e){return Lt(e,{segmentQuotedStrings:!1,segmentCJKUnifieIdeographs:!0})}function Mt(e,t){const n=[];for(let s=Tt(e);null!==s;s=Tt(e)){let r=Rt(s,t.slice());null===r?(r=Rt(e.slice(s.offset),t.slice()),null===r||n.push(r)):n.push(r)}return n}function Pt(e,t){return e.offset===t.offset&&e.length===t.length}const Ft=(e,t)=>"string"==typeof e&&"string"==typeof t?!(e.length>0)||null!==function(e,...t){const n=At.from(e),s=[];for(let e=jt(n);null!==e;e=jt(n)){const n=[];for(let s=0;s<t.length;++s){const r=t[s],o=Mt(At.from(r),e);for(const e of o)n.push({text:r,range:e})}if(0===n.length)return null;s.push(...n.filter(((e,t,n)=>e.range.length>0&&n.findIndex((t=>Pt(e.range,t.range)))===t)))}return s.length>0?s:null}(e,t):"boolean"!=typeof e||e,Dt={section:"c6TyNYOUJRIsjYZJZofy",hidden:"V4Bh2Ch7KvYUdn2s9ZdX"};function Ut({children:e,filterMatchQuery:t}){const{filter:n}=(0,l.useContext)(wt),{setSectionMatch:s,sectionContainsMatch:r}=vt(),o=Ft(n,t);(0,l.useEffect)((()=>{s(o)}),[o,s]);const i=!o&&!r;return(0,I.jsx)("div",{className:he()(Dt.section,{[Dt.hidden]:i}),children:e})}function Bt(e){return(0,I.jsx)(xt,{children:(0,I.jsx)(Ut,{...e})})}n(4808);var Gt=n(9237),Wt=n.n(Gt);const zt={highlightedText:"M0E2Al6URHV3iyoDbvi_"};function Kt({searchWords:e,textToHighlight:t,...n}){return 0===e.length||e.every((e=>!e))?(0,I.jsx)(I.Fragment,{children:t}):(0,I.jsx)(Wt(),{highlightClassName:zt.highlightedText,searchWords:e,textToHighlight:t,autoEscape:!0,...n})}function Ht({children:e,className:t,semanticColor:n="textBase"}){const{filter:s}=(0,l.useContext)(wt);return(0,I.jsx)(Y.D,{as:"h2",variant:"cello",semanticColor:n,className:t,children:(0,I.jsx)(Kt,{searchWords:[s],textToHighlight:e})})}const Vt="gvcgOXnAiNKEe_z92_lw";function Jt({onClick:e}){return(0,I.jsx)($.P,{className:Vt,onClick:e,children:b.get("settings.restartApp")})}const qt=(e,t,n)=>{let s=`${e}:${t}`;switch(n){case $e:s+="@http";break;case Qe:s+="@socks4";break;case et:s+="@socks5"}return s},Zt=({addr:e,mode:t="0",pass:n,user:s,setValue:r,restartContainer:o,fullWidth:i})=>{const a=(0,l.useRef)(null),c=(0,l.useRef)(null),u=(0,l.useRef)(null),d=(0,l.useRef)(null),g=Number(t),[h,p]=(0,l.useState)(""),[m,f]=(0,l.useState)(""),[_,x]=(0,l.useState)(!1);(0,l.useEffect)((()=>{const[t,n]=e?.split(/[:@]+/)||["",""];p(t),f(n),a.current&&(a.current.value=t),c.current&&(c.current.value=n)}),[e]),(0,l.useEffect)((()=>{d.current&&n&&(d.current.value=n.toString())}),[n]),(0,l.useEffect)((()=>{u.current&&s&&(u.current.value=s.toString())}),[s]);const v=(0,l.useCallback)((({target:e})=>{const t=qt(e.value,m,g);p(e.value),r("network.proxy.addr",t),x(!0)}),[g,m,r]),w=(0,l.useCallback)((({target:e})=>{const t=qt(h,e.value,g);f(e.value),r("network.proxy.addr",t),x(!0)}),[g,h,r]),y=(0,l.useCallback)((({target:e})=>{r("network.proxy.user",e.value),x(!0)}),[r]),E=(0,l.useCallback)((({target:e})=>{r("network.proxy.pass",e.value),x(!0)}),[r]),N=0!==g&&1!==g,k=g!==Qe;return(0,I.jsxs)(Bt,{filterMatchQuery:b.get("desktop.settings.proxy.title"),children:[(0,I.jsx)(Ht,{children:b.get("desktop.settings.proxy.title")}),(0,I.jsxs)("div",{className:he()(ot,i?it:null),children:[(0,I.jsx)(ut,{label:b.get("desktop.settings.proxy.type"),children:(0,I.jsx)(ft,{id:"network.proxy.mode",value:t,onSelect:e=>{const t=parseInt(e,10);r("network.proxy.mode",t),x(!0)},children:nt.map((({enumKey:e,enumValue:t})=>(0,I.jsx)("option",{value:t,"data-testid":e,children:tt[e]?tt[e].label():""},e)))})}),N?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:rt,children:[(0,I.jsx)(ut,{label:b.get("desktop.settings.proxy.host"),children:(0,I.jsx)(ct,{id:"network.proxy.host",handleOnChange:v,placeHolder:b.get("desktop.settings.proxy.host"),inputRef:a})}),(0,I.jsx)(ut,{label:b.get("desktop.settings.proxy.port"),children:(0,I.jsx)(ct,{id:"network.proxy.port",type:"number",handleOnChange:w,placeHolder:b.get("desktop.settings.proxy.port"),inputRef:c})})]}),(0,I.jsxs)("div",{className:k?rt:void 0,children:[(0,I.jsx)(ut,{label:b.get("desktop.settings.proxy.user"),children:(0,I.jsx)(ct,{id:"network.proxy.user",handleOnChange:y,placeHolder:b.get("desktop.settings.proxy.user"),inputRef:u})}),k?(0,I.jsx)(ut,{label:b.get("desktop.settings.proxy.pass"),children:(0,I.jsx)(ct,{id:"network.proxy.pass",handleOnChange:E,placeHolder:b.get("desktop.settings.proxy.pass"),type:"password",inputRef:d})}):null]})]}):null,_&&(0,I.jsx)("div",{children:(0,I.jsx)(Jt,{onClick:o})})]})]})},Xt="sp://proxy/v1/";function Yt(){const[e,t]=(0,l.useState)(null);(0,l.useEffect)((()=>{(async function(){return new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"GET",uri:Xt}),persistent:!1,onSuccess:n=>{const s=JSON.parse(n);200!==s.status&&t(new Error(`Failed to fetch proxy settings (status code: ${s.status})`));const r=JSON.parse(s.body);e({mode:r["network.proxy.mode"],address:r["network.proxy.addr"],username:r["network.proxy.user"],password:r["network.proxy.pass"]})},onFailure:(e,n)=>{t(e)}})}))})().then(t)}),[t]);return{settings:e,updateSettings:(0,l.useCallback)((e=>{(async function(e){return new Promise(((t,n)=>{const s={"network.proxy.mode":e.mode};[$e,Qe,et].includes(e.mode)&&(s["network.proxy.addr"]=e.address,s["network.proxy.user"]=e.username),[$e,et].includes(e.mode)&&(s["network.proxy.pass"]=e.password),window.sendCosmosRequest({request:JSON.stringify({method:"PUT",uri:Xt,body:JSON.stringify(s)}),persistent:!1,onSuccess:()=>{t()},onFailure:(e,t)=>{n(e)}})}))})(e).then((()=>t({...e})))}),[t])}}function $t(){return(0,l.useCallback)((()=>async function(){return new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://desktop/v1/restart"}),persistent:!1,onSuccess:()=>{e()},onFailure:(e,n)=>{t(e)}})}))}()),[])}const Qt="BuzoTjBZd1UqCn6DmFJr",en="HKamyJi9H31s99erfVyG",tn=()=>(0,I.jsxs)("div",{className:en,children:[(0,I.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"12px",width:"56px",x:"0px",y:"0px",viewBox:"0 0 1 100",xmlSpace:"preserve","data-testid":"loadingIcon",children:[(0,I.jsx)("circle",{className:Qt,cx:"-140",cy:"50",r:"32"}),(0,I.jsx)("circle",{className:Qt,cx:"0",cy:"50",r:"32"}),(0,I.jsx)("circle",{className:Qt,cx:"140",cy:"50",r:"32"})]}),(0,I.jsx)("span",{className:"hidden-visually",children:b.get("page.loading")})]}),nn=["network.proxy.mode","network.proxy.addr","network.proxy.user","network.proxy.pass"];const sn=()=>{const{settings:e,updateSettings:t}=Yt(),n=$t(),s=(0,l.useCallback)(((n,s)=>{if(null!==e&&function(e){return!!nn.includes(e)}(n)){const r=e;switch(n){case"network.proxy.mode":r.mode=s;break;case"network.proxy.addr":r.address=s;break;case"network.proxy.user":r.username=s;break;case"network.proxy.pass":r.password=s}t(r)}return Promise.resolve()}),[e,t]);return(0,I.jsxs)("main",{className:"Settings","aria-labelledby":"settings-form-title","data-testid":"settings",children:[(0,I.jsx)("h1",{className:"HeroText",id:"settings-form-title",children:b.get("desktop.login.PreferencesLink")}),null!==e?(0,I.jsx)(Zt,{mode:e.mode,addr:e.address,user:e.username,pass:e.password,setValue:s,restartContainer:n,fullWidth:!0}):(0,I.jsx)(tn,{})]})};var rn=n(126);const on=({toggleSettings:e,isOpen:t=!0})=>(0,I.jsx)(fe,{className:ie,isOpen:t,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldFocusAfterRender:!0,overlayClassName:le,onRequestClose:e,"aria-label":b.get("desktop.login.PreferencesLink"),children:(0,I.jsxs)("div",{className:ae,children:[(0,I.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""}),(0,I.jsx)(sn,{}),(0,I.jsx)(rn.o,{size:"medium",semanticColor:"textBase",onClick:e,children:b.get("close")})]})}),an=()=>{const{spec:e,logger:t}=M(P.i,{}),n=(0,l.useRef)(!0),s=(0,l.useRef)(!0),r=(0,l.useRef)(!0),o=(0,l.useRef)(null),[i,a]=(0,l.useState)(!1),[c,u]=(0,l.useState)(0),{breakpoint:d}=Ne({[xe.SMALL]:0,[xe.MEDIUM]:1024,[xe.LARGE]:1600},"width",o);const{breakpoint:g}=function(e,t){return Ne(e,"height",t)}({[xe.SMALL]:0,[xe.MEDIUM]:800,[xe.LARGE]:1200},o),h=(0,l.useCallback)((()=>{const n=e.headerFactory().settingsButtonFactory().hitUiReveal();t.logInteraction(n),a(!i)}),[t,i,e]),p=Ze.includes(b.getLocaleForTranslation().valueOf())?b.getLocaleForTranslation().valueOf():"en",m=[{backgroundImage:(0,I.jsx)(Ye,{fadeInRef:n}),titleStrings:[b.get("desktop-auth.login.millions-of-songs"),b.get("desktop-auth.login.free-on-spotify")],titleVariants:{[xe.SMALL]:"brio",[xe.MEDIUM]:"forte",[xe.LARGE]:"bass"}},{backgroundImage:(0,I.jsx)(Be,{imageLocale:p,fadeInRef:s}),titleStrings:[b.get("desktop-auth.login.collect-and-create")],titleVariants:{[xe.SMALL]:"alto",[xe.MEDIUM]:"brio",[xe.LARGE]:"forte"}},{backgroundImage:(0,I.jsx)(Ge,{imageLocale:p,fadeInRef:r}),titleStrings:[b.get("desktop-auth.login.perfect-work-environment")],titleVariants:{[xe.SMALL]:"alto",[xe.MEDIUM]:"brio",[xe.LARGE]:"forte"}}];return(0,I.jsx)(G.u,{children:(0,I.jsx)("div",{className:D,ref:o,"data-testid":"new-login",children:(0,I.jsxs)("main",{className:U,children:[(0,I.jsxs)("div",{className:B,children:[(0,I.jsx)(F,{toggleSettings:h}),(0,I.jsx)(Se,{titleStrings:m[c].titleStrings,titleVariants:m[c].titleVariants,widthBreakpoint:d,heightBreakpoint:g})]}),(0,I.jsx)(Me,{nrSteps:m.length,atStep:c,navigate:u,backgroundImage:m[c].backgroundImage}),i&&(0,I.jsx)(on,{toggleSettings:h})]})})})},ln="H5vfurs7KNEs9Io5DUA7",cn="qfBRU_bttJde7gy46oAB",un="ypTrzM1PtlrZp04qs6Eq",dn="oHZmDpK0SrWDaXhPjUtC",gn="lAHowB9HYfAUrg9UaSde";var hn=function(e){return e[e.SUCCESS=0]="SUCCESS",e[e.OPERATION_ABORTED=1]="OPERATION_ABORTED",e[e.OPERATION_TIMED_OUT=2]="OPERATION_TIMED_OUT",e[e.LOGIN_BAD_CREDENTIALS=3]="LOGIN_BAD_CREDENTIALS",e[e.LOGIN_BAD_APP_KEY=4]="LOGIN_BAD_APP_KEY",e[e.LOGIN_BAD_CLIENT_VERSION_INFO=5]="LOGIN_BAD_CLIENT_VERSION_INFO",e[e.STORAGE_INITIALIZATION_FAILED=6]="STORAGE_INITIALIZATION_FAILED",e[e.MULTIPLE_LOGIN_NOT_ALLOWED=7]="MULTIPLE_LOGIN_NOT_ALLOWED",e[e.OPERATION_CANCELLED=8]="OPERATION_CANCELLED",e[e.BAD_DEVICE_INFO=9]="BAD_DEVICE_INFO",e[e.INTERNAL_ERROR=10]="INTERNAL_ERROR",e}(hn||{});const pn=function({logger:e,showSettings:t}){const[n,s]=(0,l.useState)(""),[r,o]=(0,l.useState)(!1),[i,a]=(0,l.useState)(!1),d=(0,l.useRef)(0);(0,l.useEffect)((()=>{e.logPageView({page:"auth-on-web"})}),[e]);const g=async t=>{const n=++d.current,r=re();a(t),s(""),o(!0),e.logAction({page:"auth-on-web",action_type:"click",action_intent:t?"sign-up-with-browser":"log-in-with-browser",action_hash:r});try{await W({name:"login-accounts",args:[{method:"login-accounts",enableSignup:t,actionHash:r}]}),e.logAction({page:"auth-on-web",action_type:"view",action_intent:t?"show-success-signup":"show-success-login"},{flush:!1}),await e.finalFlush(),location.href="spotify:app:xpui"}catch(r){const i="string"==typeof r?JSON.parse(r):r;if(n!==d.current)return void e.logAction({page:"auth-on-web",action_type:"view",action_intent:t?"sign-up-with-browser-cancelled-by-new-attempt":"log-in-with-browser-cancelled-by-new-attempt",item_id:i?.errorReference});o(!1);let a=X(i.errorCategory,i.errorCode,i.errorReference);"desktop_login_accounts"===i.errorCategory&&i.errorCode===hn.OPERATION_TIMED_OUT&&(a=t?b.get("desktop-auth.login.signup-time-out"):b.get("desktop-auth.login.login-time-out")),s(a||""),e.logAction({page:"auth-on-web",action_type:"view",action_intent:t?"show-error-signup":"show-error-login",item_id:i?.errorReference})}};return(0,I.jsx)("main",{"data-testid":"login",children:r?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Y.D,{as:"h1",variant:"alto",semanticColor:"textBase",className:ln,children:i?b.get("desktop-auth.login.go-to-browser-signup"):b.get("desktop-auth.login.go-to-browser-login")}),(0,I.jsxs)("button",{className:un,onClick:()=>{o(!1),e.logAction({page:"auth-on-web",action_type:"click",action_intent:"try-again"})},children:[(0,I.jsx)(Y.D,{as:"span",variant:"ballad",semanticColor:"textSubdued",children:b.get("desktop-auth.login.not-seeing-browser")})," ",(0,I.jsx)(Y.D,{as:"span",variant:"balladBold",semanticColor:"textBase",children:b.get("desktop-auth.login.try-again")})]})]}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(Y.D,{as:"h1",variant:"alto",semanticColor:"textBase",className:ln,children:[b.get("desktop-auth.login.millions-of-songs"),(0,I.jsx)("br",{}),b.get("desktop-auth.login.free-on-spotify")]}),n&&(0,I.jsxs)("div",{className:dn,role:"alert",onClick:e=>{if(e.currentTarget.getAttribute("data-action")){"showSettings"===e.currentTarget.getAttribute("data-action")&&t()}},"aria-live":"assertive",children:[(0,I.jsx)(oe.l,{className:gn}),(0,I.jsx)("span",{dangerouslySetInnerHTML:{__html:n}})]}),(0,I.jsx)(c.D,{onClick:()=>{g(!1)},iconTrailing:u.T,"data-testid":"login-button",children:b.get("desktop-auth.login.log-in-with-browser")}),(0,I.jsxs)("button",{className:cn,onClick:()=>{g(!0)},children:[(0,I.jsx)(Y.D,{as:"span",variant:"ballad",semanticColor:"textSubdued",children:b.get("desktop-auth.login.new-to-spotify")}),(0,I.jsx)(Y.D,{as:"span",variant:"balladBold",semanticColor:"textBase",children:b.get("desktop-auth.login.sign-up-with-browser")}),(0,I.jsx)(u.T,{iconSize:16,semanticColor:"textBase"})]})]})})},mn=({mode:e,showLogin:t,showSettings:n,logger:s})=>(0,I.jsx)("footer",{className:"Footer",role:"contentinfo",children:"settings"===e?(0,I.jsx)("a",{className:"Footer__link",href:"#",onClick:()=>{s.logAction({page:"settings",action_type:"click",action_intent:"back-to-login"}),t()},"data-ta-id":"login-footer-settings-back-to-login",children:b.get("desktop.login.Back")}):(0,I.jsx)("a",{className:"Footer__link",href:"#",onClick:()=>{s.logAction({page:"settings",action_type:"click",action_intent:"open-page-settings"}),n()},"data-ta-id":"login-footer-settings",children:b.get("desktop.login.PreferencesLink")})}),fn=()=>(0,I.jsxs)("header",{className:"Header",children:[(0,I.jsx)("h1",{className:"hidden-visually",children:"Spotify"}),(0,I.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""})]});var _n=n(9909),xn=n(6994);const vn=({initialMode:e="login",logger:t})=>{const[n,s]=(0,l.useState)(e),r=function(e){const t=(0,l.useRef)();return(0,l.useEffect)((()=>{t.current=e}),[e]),t.current}(n);(0,l.useEffect)((()=>{!async function(){new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://messages/v1/container/control",body:'{"type":"view_loaded", "name":"/loginUI"}'}),persistent:!1,onSuccess:()=>{e()},onFailure:(e,n)=>{t(e)}})}))}()}),[]),(0,l.useEffect)((()=>{"login"===n?t.logPageView({page:"login"}):"settings"===n&&t.logPageView({page:"login/settings"})}),[n,t]);const o=r?`__${n} __${r}-to-${n}`:"",i=()=>s("settings");return(0,I.jsxs)("main",{className:"App","data-ta-id":"login-app","data-testid":"login-app","data-ta-login-mode":n,children:[(0,I.jsxs)("div",{className:"fakeWebPlayer",children:[(0,I.jsx)("aside",{}),(0,I.jsxs)("footer",{children:[(0,I.jsx)("div",{className:"fakeWebPlayer__footer-left"}),(0,I.jsx)("div",{className:"fakeWebPlayer__footer-center"}),(0,I.jsx)("div",{className:"fakeWebPlayer__footer-right"})]}),(0,I.jsx)("main",{children:(0,I.jsx)("div",{className:"fakeWebPlayer__content"})})]}),(0,I.jsx)("div",{className:`App__content ${o}`,children:(0,I.jsx)(xn.Z,{mode:"in-out",children:(0,I.jsx)(_n.Z,{timeout:{appear:0,enter:0,exit:650},children:(0,I.jsxs)("div",{className:`App__modal ${o}`,children:[(0,I.jsx)(fn,{}),"settings"===n?(0,I.jsx)(sn,{}):(0,I.jsx)(pn,{showSettings:i,logger:t}),(0,I.jsx)(mn,{mode:n,showLogin:()=>s("login"),showSettings:i,logger:t})]})},o)})})]},"main1")},wn=({initialMode:e,logger:t})=>{const n=(0,o.W6)(a);return(0,I.jsx)(I.Fragment,{children:n?(0,I.jsx)(an,{}):(0,I.jsx)(vn,{initialMode:e,logger:t})})};var yn=n(7455);var bn=n(6640);const En=(e,t)=>{const n=e.event_sender_context_information;return[(0,bn.UY)({version_code:n.client_version_int,version_string:n.client_version_string}),(0,bn.jx)(t),(0,bn.IE)(n.installation_id),(0,bn.CF)({device_id:n.device_id,device_manufacturer:n.device_manufacturer,device_model:n.device_model,os_version:n.os_version,platform_type:n.platform_type})]};var Nn=n(6925);let kn=function(e){return e.Web="Web",e.PWA="PWA",e.Desktop="Desktop",e}({}),Sn=function(e){return e.macOS="macOS",e.Windows="Windows",e.Linux="Linux",e.ChromeOS="ChromeOS",e.Other="Other",e}({});const On={BROWSER_EDGE:"spotify__browser--is-edge",BROWSER_SAFARI:"spotify__browser--is-safari",OS_MACOS:"spotify__os--is-macos",OS_WINDOWS:"spotify__os--is-windows",OS_LINUX:"spotify__os--is-linux",OS_CHROMEOS:"spotify__os--is-chromeos",CONTAINER_DESKTOP:"spotify__container--is-desktop",CONTAINER_PWA:"spotify__container--is-pwa",CONTAINER_WEB:"spotify__container--is-web"};function In(e,t){var n;n=Object.values(On),document.documentElement.classList.remove(...n);const s=[];"Microsoft Edge"===gt().parse(window.navigator.userAgent).browser.name?s.push(On.BROWSER_EDGE):ht()&&s.push(On.BROWSER_SAFARI),t===Sn.macOS?s.push(On.OS_MACOS):t===Sn.Windows?s.push(On.OS_WINDOWS):t===Sn.Linux?s.push(On.OS_LINUX):t===Sn.ChromeOS&&s.push(On.OS_CHROMEOS),e===kn.Desktop?s.push(On.CONTAINER_DESKTOP):e===kn.PWA?s.push(On.CONTAINER_PWA):e===kn.Web&&s.push(On.CONTAINER_WEB),function(e){e.forEach((e=>{document.documentElement.classList.add(e)}))}(s)}var An=n(1030),Cn=n(9248);const Rn=/Spotify\/(?<version>.+)\s/;function Ln(){if(!!window.navigator.userAgent.match(Rn))return kn.Desktop;const e="serviceWorker"in window.navigator,t=window.matchMedia("(display-mode: standalone)").matches,n="Windows"in window;return e&&(t||n)?kn.PWA:kn.Web}const jn=/Spotify\/(?<version>.+)\s/;function Tn(){const e=window.navigator.userAgent.match(jn);return e?.groups?.version||"unknown"}var Mn=n(3711);const Pn=se().create().toString(),Fn="has-used-app",Dn=!window.localStorage.getItem(Fn);Dn&&window.localStorage.setItem(Fn,"true");const Un=window.localStorage,Bn=()=>{const e=Un.getItem("utmParameters");let t;try{t=e?JSON.parse(e).referral:""}catch(e){t=""}return t};class Gn{constructor(e){this._eventSender=e}logPageView({page:e}){this.logAction({page:e,action_type:"pageview",action_intent:""})}logAction({page:e,action_type:t,action_intent:n,item_id:s,action_hash:r},o){this._eventSender.send((0,Mn.e)({action_type:t,action_intent:n,action_page:e,action_item_id:s,action_hash:r,device_is_new_install:Dn,device_locale:window.__spotify.locale,device_referrer:Bn(),ab_flags:"",session_id:Pn}),o)}async finalFlush(){await this._eventSender.finalFlush()}}var Wn=n(8776);const zn=new Set([Wn.JM.ALBUM,Wn.JM.ARTIST,Wn.JM.PLAYLIST,Wn.JM.PLAYLIST_V2,Wn.JM.TRACK,Wn.JM.EPISODE,Wn.JM.SHOW,Wn.JM.LOCAL_TRACK]);class Kn{constructor(e){this.ubiLogger=e}logInteraction(e){const t=this.ubiLogger.logInteraction.bind(this.ubiLogger),n=this.ubiLogger.getPageInstanceId()??void 0;if("ui_navigate"!==e.actionName){return{interactionId:t(e),pageInstanceId:n}}const s=this.formatUiNavigateEvent(e),r=t(s);return this.interaction={id:r,event:s},{interactionId:r,pageInstanceId:n}}logImpression(e){return this.ubiLogger.logImpression(e)}logNavigation(e){this.ubiLogger.logNavigationStart(e),this.ubiLogger.logNavigationEnd({pageId:e.pageId,entityUri:e.entityUri}),this.interaction=void 0}getInteractionId(e){if(!this.interaction)return;const{event:t,id:n}=this.interaction,s=t.actionParameterNames?.findIndex((e=>"destination"===e));if(void 0===s||-1===s)return;const r=t.actionParameterValues?.[s];if(r&&r===e)return n}formatUiNavigateEvent=e=>{const t=e.actionParameterNames?.findIndex((e=>"destination"===e));return void 0===t||-1===t?e:{...e,actionParameterValues:e.actionParameterValues?.map(((e,n)=>n!==t?e:(e=>{const t=(0,Wn.EC)(e);if(!t)return;if((0,Wn.Ue)(t))return zn.has(t.id)?t.toString().replace(":app:",":"):t.toString();if(zn.has(t.type))return t.toString();const n=t.args||t.query&&[t.query]||t.category&&[t.category]||void 0,s=(0,Wn.vU)(t.type,n);return s?.toString()??void 0})(e)??""))}}}var Hn=n(8762);(0,Nn.hb)(),async function(){for(const e of[window.__spotify.locale,x.en])try{const t=await fetch(`i18n/${e}.json`).then((e=>e.json()));return void b.initialize({localeForTranslation:e,localeForFormatting:navigator.language,translations:t})}catch(e){0}throw new Error("Cannot find a suitable locale! Something is wrong: talk to #desktop.")}().then((async function(){In(Ln(),function(){const e=gt().parse(window.navigator.userAgent).os.name;return"macOS"===e?Sn.macOS:"Windows"===e?Sn.Windows:"Linux"===e?Sn.Linux:"Chrome OS"===e?Sn.ChromeOS:Sn.Other}());const e=function(){const e=(0,yn.qy)({providers:{endpoints:(0,yn.uG)(),token:()=>Promise.reject()}});return e.connect(),e}(),t="65b708073fc0480ea92a077233ca87bd",n=((e,t,n,s,r,o)=>(0,bn.mi)({transport:t,suppressPersist:!1,context:En(e,n),storagePrefix:r,ownerProvider:s,useOptimizedESS2NA:o}))(window.__spotify,e,t,(()=>null),`${t}-loginui`,!1),i=new Gn(n),a=new Kn(Hn.RK.getUBILogger({eventSender:n,disableAutoBackgroundMonitoring:!0,authenticationProvider:{isAuthenticated:()=>!1}})),c=window.__spotify&&window.__spotify.locale;c&&document.documentElement.setAttribute("lang",c);const u=An.L.addMiddleware(Cn._);s.render((0,I.jsx)(r.zj,{children:(0,I.jsx)(o.nD,{resolver:u,context:{username:null},options:{clientId:"client-desktop-ui-app-login",timeout:5e3,transport:e,eventSender:n,version:Tn(),installationId:window.__spotify.event_sender_context_information?.installation_id},children:(0,I.jsx)(L,{instance:a,children:(0,I.jsx)(C,{value:null,children:(0,I.jsx)(l.Suspense,{fallback:null,children:(0,I.jsx)(wn,{logger:i})})})})})}),document.getElementById("main")),document.documentElement.setAttribute("dir",window.__spotify.localization_is_rtl?"rtl":"ltr"),(0,Nn.wm)("UI init phase is done for login")}))}},n={};function s(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}s.m=t,e=[],s.O=(t,n,r,o)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){for(var[n,r,o]=e[u],a=!0,l=0;l<n.length;l++)(!1&o||i>=o)&&Object.keys(s.O).every((e=>s.O[e](n[l])))?n.splice(l--,1):(a=!1,o<i&&(i=o));if(a){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={535:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[i,a,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(r in a)s.o(a,r)&&(s.m[r]=a[r]);if(l)var u=l(s)}for(t&&t(n);c<i.length;c++)o=i[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(u)},n=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),s.nc=void 0;var r=s.O(void 0,[569],(()=>s(3751)));r=s.O(r)})();
//# sourceMappingURL=login.js.map