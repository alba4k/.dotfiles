"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[93],{20093:(a,e,t)=>{t.d(e,{DsaModal:()=>H});var s=t(90839),n=t(94),l=t(85420),i=t(76282),r=t(63840),o=t(44939),d=t(56309),c=(t(95101),t(27396),t(99692),t(86333)),g=t(20103),m=t(10443),u=t(76529);let E=function(a){return a[a.UNKNOWN=0]="UNKNOWN",a[a.AGE=1]="AGE",a[a.GEO=2]="GEO",a[a.GENDER=3]="GENDER",a[a.INTEREST=4]="INTEREST",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED",a}({});const N={fromJSON:a=>({targetingTypes:globalThis.Array.isArray(a?.targetingTypes)?a.targetingTypes.map((a=>function(a){switch(a){case 0:case"UNKNOWN":return E.UNKNOWN;case 1:case"AGE":return E.AGE;case 2:case"GEO":return E.GEO;case 3:case"GENDER":return E.GENDER;case 4:case"INTEREST":return E.INTEREST;default:return E.UNRECOGNIZED}}(a))):[],legalEntityName:h(a.legalEntityName)?globalThis.String(a.legalEntityName):"",showTailoredAdsSection:h(a.showTailoredAdsSection)?Boolean(a.showTailoredAdsSection):void 0}),toJSON(a){const e={};return a.targetingTypes?.length&&(e.targetingTypes=a.targetingTypes.map((a=>function(a){switch(a){case E.UNKNOWN:return"UNKNOWN";case E.AGE:return"AGE";case E.GEO:return"GEO";case E.GENDER:return"GENDER";case E.INTEREST:return"INTEREST";case E.UNRECOGNIZED:default:return"UNRECOGNIZED"}}(a)))),""!==a.legalEntityName&&(e.legalEntityName=a.legalEntityName),void 0!==a.showTailoredAdsSection&&(e.showTailoredAdsSection=a.showTailoredAdsSection),e},create:a=>N.fromPartial(a??{}),fromPartial(a){const e={targetingTypes:[],legalEntityName:"",showTailoredAdsSection:void 0};return e.targetingTypes=a.targetingTypes?.map((a=>a))||[],e.legalEntityName=a.legalEntityName??"",e.showTailoredAdsSection=a.showTailoredAdsSection??void 0,e}};function h(a){return null!=a}var x=t(35319),f=t(86206),T=t(60742);const b="khENZvA4G9EjpLQiINss",j="Fu87PEr0tL6oDjmw_X2H";var y=t(4637);const p=({title:a,showTitle:e,children:t})=>(0,y.jsxs)("section",{className:b,children:[e&&(0,y.jsx)(n.D,{className:j,variant:"balladBold",as:"h3","aria-label":a,children:a}),t]});var v=t(88585);const A="P9gpV_sgryfUERYOdfor",G=({text:a,icon:e})=>(0,y.jsxs)(v.n,{className:A,condensed:!0,children:[e,(0,y.jsx)(n.D,{variant:"ballad","aria-label":a,as:"h4",children:a})]}),R="FB2PxTNhkGbwFwYI2ufG",O="gZYgXNWbFSAAjLzGhOI9",w="eYxzC4s3Nw68RcbK7xzl",S="QrelMvam4WOTMVaO28Rl",D="_EaBFRLKy0nZJXkiRwlx",I="N77hKGzNc_lKQ5OG1EBN",C="JceC3xibcl3MHVULIK0b",k="Uk72m6OFBBdTZ3RJb0K_",B="IFqCps3krPbH25azco3F";const U=({activeTargetingTypes:a})=>{const{openURLWithSessionTransfer:e}=(0,T.e)();return[E.AGE,E.GENDER].some((e=>a.includes(e)))?(0,y.jsxs)(p,{title:r.ag.get("ad-formats.dsa.modal.profileInfo"),showTitle:!0,children:[(0,y.jsx)(g.d,{className:B,condensedAll:!0,style:{marginBlockEnd:m.o7},children:a.map((a=>{const e=function(a){switch(a){case E.AGE:return{icon:(0,y.jsx)(c.f,{}),text:r.ag.get("ad-formats.dsa.modal.targeting.age")};case E.GENDER:return{icon:(0,y.jsx)(c.f,{}),text:r.ag.get("ad-formats.dsa.modal.targeting.gender")};default:return null}}(a);return e?(0,y.jsx)(G,{icon:e.icon,text:e.text},a):null}))}),(0,y.jsx)(n.D,{variant:"ballad",semanticColor:"textSubdued","aria-label":r.ag.get("ad-formats.dsa.modal.adRelevancyAction"),children:r.ag.get("ad-formats.dsa.modal.adRelevancyAction")}),(0,y.jsxs)(u.h,{component:"button","aria-label":"Edit your Spotify profile, link",className:I,semanticColor:"textBrightAccent",onClick:()=>e(f.VF),standalone:!0,children:[(0,y.jsx)(n.D,{variant:"balladBold",as:"h2",children:r.ag.get("ad-formats.dsa.modal.editProfile")}),(0,y.jsx)(x.h,{semanticColor:"textBrightAccent"})]})]}):null};var F=t(31406),K=t(85363);const _=({activeTargetingTypes:a})=>{const e=[E.GEO,E.INTEREST].some((e=>a.includes(e)));if(!e)return null;const t=e&&a.some((a=>a===E.AGE||a===E.GENDER));return(0,y.jsx)(p,{title:r.ag.get("ad-formats.dsa.modal.otherInfo"),showTitle:t,children:(0,y.jsx)(g.d,{className:B,condensedAll:!0,children:a.map((a=>{const e=function(a){switch(a){case E.GEO:return{icon:(0,y.jsx)(F.n,{}),text:r.ag.get("ad-formats.dsa.modal.targeting.location")};case E.INTEREST:return{icon:(0,y.jsx)(K.a,{}),text:r.ag.get("ad-formats.dsa.modal.targeting.interests")};default:return null}}(a);return e?(0,y.jsx)(G,{icon:e.icon,text:e.text},a):null}))})})},W=()=>{const{openURLWithSessionTransfer:a}=(0,T.e)();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("hr",{className:C}),(0,y.jsx)(n.D,{className:k,variant:"canon","aria-label":r.ag.get("ad-formats.dsa.modal.aboutTailoredAds"),as:"h2",children:r.ag.get("ad-formats.dsa.modal.aboutTailoredAds")}),(0,y.jsx)(n.D,{variant:"ballad",semanticColor:"textSubdued","aria-label":r.ag.get("ad-formats.dsa.modal.tailoredAds"),children:r.ag.get("ad-formats.dsa.modal.tailoredAds")}),(0,y.jsxs)(u.h,{component:"button","aria-label":"Visit your privacy settings, link",className:I,semanticColor:"textBrightAccent",onClick:()=>a(`${f.Vx}/#tailored-ads`),standalone:!0,children:[(0,y.jsx)(n.D,{variant:"balladBold",as:"h2",children:r.ag.get("ad-formats.dsa.modal.privacySetting")}),(0,y.jsx)(x.h,{semanticColor:"textBrightAccent"})]})]})};var Z=t(97826),z=t(21783),L=t(907),J=t(12161);const P="vkMQw77rXE4cp8xsAdzl",M="emw6kR941D2wReukhCAJ",V=({advertiser:a,legalEntityName:e})=>{const{item:t}=(0,Z.x)()||{item:null},s=t&&(0,L.k6)(t)?t?.images:void 0,l=(0,J.o)(s);return(0,y.jsxs)("div",{className:P,children:[l&&(0,y.jsx)(z.Ee,{className:M,src:l,loading:"lazy"}),(0,y.jsx)(n.D,{variant:"balladBold","aria-label":a,children:a}),e&&(0,y.jsx)(n.D,{variant:"mesto",semanticColor:"textSubdued","aria-label":e,children:e})]})};var Q=t(59496),X=t(89642);const Y=a=>{const[e,t]=(0,Q.useState)(null),[s,n]=(0,Q.useState)(!1);return(0,Q.useEffect)((()=>{a?.metadata?.lineitem_id&&a.adId&&(async a=>{try{n(!0);const e=await X.fi.getDsaAdMetadata(a);t(N.fromJSON(e)),n(!1)}catch(a){n(!1)}})({lineitemId:a.metadata.lineitem_id,adId:a.adId})}),[a]),{data:e,loading:s}},H=({item:a})=>{const e=(0,s.I0)(),{isOpen:t}=(0,s.v9)((a=>a.ui.dsaDialog)),{data:c,loading:g}=Y(a);return(0,y.jsxs)(d.Z,{className:R,isOpen:t,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,contentLabel:r.ag.get("ad-formats.dsa.aboutThisAd"),children:[(0,y.jsx)("div",{className:w,children:(0,y.jsx)(n.D,{"aria-label":r.ag.get("ad-formats.dsa.aboutThisAd"),variant:"alto",as:"h1",children:r.ag.get("ad-formats.dsa.aboutThisAd")})}),(0,y.jsx)("hr",{className:C}),(0,y.jsx)("div",{className:O,children:g?(0,y.jsx)("div",{className:S,"data-testid":"loading-indicator",children:(0,y.jsx)(l.T,{size:"large"})}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(V,{advertiser:a.metadata.advertiser,legalEntityName:c?.legalEntityName}),c?.targetingTypes.length?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(n.D,{className:k,variant:"canon",as:"h2","aria-label":r.ag.get("ad-formats.dsa.modal.adBasedInfoExplanation"),children:r.ag.get("ad-formats.dsa.modal.adBasedInfoExplanation")}),(0,y.jsx)(U,{activeTargetingTypes:c?.targetingTypes}),(0,y.jsx)(_,{activeTargetingTypes:c?.targetingTypes})]}):(0,y.jsx)(n.D,{className:k,as:"h2","aria-label":r.ag.get("ad-formats.dsa.modal.targeting.unknown"),tabIndex:0,children:r.ag.get("ad-formats.dsa.modal.targeting.unknown")}),c?.showTailoredAdsSection&&(0,y.jsx)(W,{})]})}),(0,y.jsx)("button",{"aria-label":r.ag.get("close_button_action"),className:D,onClick:()=>{e((0,o.ni)())},children:(0,y.jsx)(i.k,{size:"medium",semanticColor:"textBase"})})]})}}}]);
//# sourceMappingURL=93.js.map