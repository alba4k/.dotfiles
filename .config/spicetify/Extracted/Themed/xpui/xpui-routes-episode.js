"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3472],{61737:(e,t,i)=>{i.d(t,{o:()=>n});var s=i(64342),a=i(39293);function n(){return{version:(0,s.W6)(a.GEN)?2:1}}},19008:(e,t,i)=>{i.d(t,{p:()=>c,q:()=>n.q});var s=i(59496),a=i(96754),n=i(47833),r=i(55742),o=i(4637);const l=s.memo((function({uri:e,size:t=n.q.md,className:i,onClick:l,showUpsell:c}){const[d,u]=(0,a.Z)(e),p=(0,r.o)(),m=(0,s.useCallback)((()=>{p({targetUri:e,intent:d?"remove-from-library":"add-to-library",type:"click"}),u(!d)}),[p,e,d,u]);return(0,o.jsx)(n.o,{className:i,isFollowing:d,onFollow:m,onClick:l,uri:e,size:t,showUpsell:c})})),c=s.memo((function(e){return(0,o.jsx)(l,{...e})}))},29527:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Et});i(99692);var s=i(59496),a=i(23076),n=i(10797),r=i(64342),o=i(47323),l=i(59526),c=i(58776),d=i(63840),u=i(27293),p=i(86551),m=i(11021),h=i(64460),g=i(39293),x=i(61737),y=i(80138),b=i(4637);const j=(0,s.lazy)((()=>i.e(1487).then(i.bind(i,61487)))),k=(0,s.lazy)((()=>i.e(7568).then(i.bind(i,77568))));function C(e){const t=(0,y.m)(),i=(0,r.W6)(g.XKk,{loadingValue:!1}),a=(0,x.o)();return t?i?e.uri?(0,b.jsx)(s.Suspense,{fallback:!0,children:(0,b.jsx)(k,{uri:e.uri})}):null:(0,b.jsx)(s.Suspense,{fallback:!0,children:(0,b.jsx)(j,{reason:"Episode page",...a,...e})}):null}const P="dpN5ViPOceUWNB5EQPHN",T="fBEA27lLw_sc60Zjd_qw",f="vBcxPq3E2okwgXOkVPEM",v="CxoSYuAjlcCDSOWnnbJe",I="HCCBXwdFvq6omWW2hR0N",S="bJOPO5Zo7dpjSVDwEpSw",E="TXdDDpokVTyJzDEDWHHf",U="tvj001zNcrC5VUZmTt9c",D="PC5kR03GYecc7syeoC0q",N="YldGldlfaI9myEGXQf9g",w="qJHVIpJn1vLPWsAKfTEZ",L="wSIzjkVlr0Zdy7di2vRm",R="hYS_K1NATGyWt6tCSRqQ",A="hVVaM4pF9arpQ8Nvn2a1",M="zf0Eac1LugsHUacz74Zf",B="TnNaqxbaI0hzhBQZ7wE0",F="zSw1lG1TNe_xm6KTqtCv",O="MlEQDkXnjdKKJueJ9kkB",z="jg0xlyD1yjh0DPNG6eOg",_="QiHXpFb4dLZNOFe5gpp3";var W=i(94),$=i(40342),H=i(67966),K=i(63961),Z=i(96504);const V=({cardHeaderText:e,cardBodyText:t,buttonText:i,buttonTarget:s})=>(0,r.W6)(g.XdP)?(0,b.jsxs)("div",{className:N,children:[(0,b.jsxs)("div",{className:w,children:[(0,b.jsx)(W.D,{variant:"balladBold",semanticColor:"textBase",children:e}),(0,b.jsx)(W.D,{semanticColor:"textBase",children:t})]}),(0,b.jsx)(K.D,{buttonSize:"sm",colorSet:"invertedLight",href:(0,c.EC)(s).toURLPath(!0),component:Z.Z,children:i})]}):null,q=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:i,hasDescription:a,htmlDescription:n,onExpanded:o,onTimeStampClick:l,playability:c,showHeader:u=!0,spec:p})=>{const m=(0,H.$P)(),h=(a||t)&&u,x=(0,s.useCallback)((e=>{const t=p.readMoreButtonFactory();m.logInteraction(e?t.hitUiReveal():t.hitUiHide()),o?.()}),[p,m,o]),y=(0,r.W6)(g._nP,{loadingValue:!1});return(0,b.jsxs)(b.Fragment,{children:[h&&(0,b.jsx)(W.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:I,children:d.ag.get("episode.description-title")}),t&&(0,b.jsx)(V,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),a&&(0,b.jsx)($.o,{className:f,onTimeStampClick:l,maxLines:4,onExpanded:x,content:(i||"").trim(),htmlContent:e&&n?n:void 0,enableTimestamps:c.playable,enableAutomaticLinkification:y&&e&&!!n})]})};var X=i(84875),Y=i.n(X),Q=i(78795),G=i(66686),J=i(84459),ee=i(64067),te=i(43504),ie=i(87582),se=function(e){return e.DESCRIPTION="description",e.TRANSCRIPT="transcript",e}(se||{});const ae=s.memo((function({transcriptSections:e,descriptionContent:t,transcriptContent:i,spec:a}){const n=(0,H.$P)(),[r,o]=(0,s.useState)(se.DESCRIPTION),l=(0,ie.Mi)(),{ref:c,inView:u}=(0,Q.YD)({threshold:[1],root:l.current,rootMargin:`-${te.K1+1}px 100000px 0px 100000px`}),p=(0,s.useRef)(null),m=(0,s.useCallback)((e=>{p.current=e,c(e)}),[c]);return(0,s.useEffect)((()=>{const e=p.current?.parentElement?.offsetTop,t=l?.current;if(!e||!t)return;const i=e-te.K1;t.scrollTop>i&&t.scrollTo({top:i})}),[l,r]),(0,b.jsx)(G.l,{list:(0,b.jsxs)(J.F,{className:Y()(O,{[z]:!u}),ref:m,children:[(0,b.jsx)(ee.c,{label:d.ag.get("web-player.episode.description"),sentenceCase:!0,active:r===se.DESCRIPTION,onClick:()=>{const e=a.tabsFactory().descriptionTabButtonFactory().hitUiReveal();n.logInteraction(e),o(se.DESCRIPTION)},className:Y()(_,{[L]:r===se.DESCRIPTION})}),(0,b.jsx)(ee.c,{label:d.ag.get("web-player.episode.transcript"),sentenceCase:!0,disabled:null===e,active:r===se.TRANSCRIPT,onClick:()=>{const e=a.tabsFactory().transcriptTabButtonFactory().hitUiReveal();n.logInteraction(e),o(se.TRANSCRIPT)},className:Y()(_,{[L]:r===se.TRANSCRIPT})})]}),children:null===e||r===se.DESCRIPTION?t:i})}));var ne=i(61187),re=i(20141),oe=i(4722),le=i(12161);const ce=(0,s.memo)((function({transcriptSections:e,onTimeStampClick:t,episodeUri:i}){const{spec:s,logger:a}=(0,H.fU)(ne.m,{data:{uri:i}}),{isPlaying:n}=(0,oe.n)({uri:i},{featureIdentifier:"episode"}),r=s.timestampLinkFactory();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:A,children:(0,b.jsx)(W.D,{variant:"viola",semanticColor:"textBase",children:d.ag.get("web-player.episode.transcript.disclaimer")})}),e.map(((e,s)=>{const o=`transcript-section-${s}`;return(0,b.jsxs)("div",{className:R,children:[(0,b.jsx)("button",{className:M,onClick:()=>{t(e.startMs,o),a.logInteraction(n?r.hitSeekToTime({msToSeekTo:e.startMs}):r.hitPlay({itemToBePlayed:i}))},children:(0,b.jsx)(re.D,{id:o,targetURI:(0,c.EC)(i),fadeOut:!0,children:(0,b.jsx)(W.D,{variant:"finaleBold",semanticColor:"textSubdued",className:B,children:(0,le.m)(e.startMs)})})}),e.content.map(((e,t)=>(0,b.jsx)(W.D,{variant:"viola",semanticColor:"textBase",className:F,dir:"auto",children:e},`transcript-text-${t}`)))]},o)}))]})}));i(95101),i(2178);var de=i(17048),ue=i(62699),pe=i(34797),me=i(78954),he=i(34844),ge=i(56545),xe=i(65354),ye=i(88258),be=i(74555),je=i(57860),ke=i(5788),Ce=i(96613);const Pe="OYehkMWcGJRKPkByp46K",Te="uc1bXkrZqrCz0CMK4lBb",fe="qZeibBbA3SVClzEueYND",ve=({episodeUri:e,index:t,duration:i,start:a,stop:n,name:r,uri:o,artists:l,album:c,playable:u})=>{const{isActive:p,isPlaying:m,onClick:h}=(0,be.k)({episodeUri:e,start:a,stop:n}),g=(0,s.useCallback)(((e,t)=>{h(t)}),[h]),{spec:x}=(0,H.fU)(he.r,{data:{position:t,reason:"",uri:o}});return(0,b.jsx)(ke.JL,{value:"row",index:t,children:(0,b.jsx)(je.xV,{trigger:"right-click",action:"open",menu:(0,b.jsx)(ge.$,{uri:o}),children:(0,b.jsxs)(ye.c,{uri:o,index:t,ariaRowIndex:t+1,dragMetadata:{name:r,createdBy:l?.[0].name??""},onTriggerPlay:g,isActive:p,isPlayable:u,spec:x,children:[(0,b.jsxs)(xe.vZ,{ariaColIndex:0,children:[(0,b.jsx)(xe.Du,{uri:o,playAriaLabel:d.ag.get("tracklist.a11y.play",r,l?.[0].name),onClick:g,isPlaying:m,isActive:p,spec:x,children:(0,b.jsx)(xe.km,{children:(0,b.jsx)("img",{className:Te,src:c.image,alt:c.name})})}),(0,b.jsxs)(xe.vm,{children:[(0,b.jsx)(xe.Wh,{titleText:r,children:r}),(0,b.jsx)(xe.K9,{children:(0,b.jsx)(xe.T6,{artists:l,spec:x})})]})]}),(0,b.jsx)(xe.UA,{ariaColIndex:1,children:(0,b.jsx)(xe.BM,{uri:c.uri,name:c.name,spec:x,children:c.name})}),(0,b.jsxs)(xe.mU,{ariaColIndex:2,children:[(0,b.jsx)(Ce.f,{uri:o,spec:x}),(0,b.jsx)(xe.A$,{duration:i}),(0,b.jsx)(xe.Zv,{spec:x,menu:(0,b.jsx)(ge.$,{uri:o,artists:l}),label:d.ag.get("more.label.track",r,l?.[0].name)})]})]})})})};function Ie(e,t,i){return e.reduce(((e,s,a)=>((a>0||t>0)&&e.push({type:"SPACER",id:`spacer-${e.length}`}),"MUSIC"===s.type?e.push(function(e,t,i){return{type:"MUSIC",index:t,uri:i.uri,episodeUri:e,start:i.start,stop:i.stop,duration:i.duration,name:i.track.name,artists:i.track.artists,album:i.track.album,playable:i.track.playable}}(i,a,s)):"TALK"===s.type&&e.push(function(e,t,i){return{type:"TALK",index:t,uri:e,title:i.title,subtitle:i.subtitle,start:i.start,stop:i.stop,duration:i.duration,showUri:i.show.uri,showName:i.show.name}}(i,a,s)),e)),[])}const Se=({uri:e,segmentCount:t})=>{const i=(0,pe.G)(),a=(0,s.useCallback)((async(s,a)=>{const n=Math.ceil(s/2);try{return{items:Ie(await i.getSegments(e,n,a),n,e),totalLength:2*t-1}}catch(e){return{items:[],totalLength:0}}}),[t,i,e]),n=(0,s.useCallback)((t=>{switch(t.type){case"SPACER":return(0,b.jsx)("div",{className:fe},t.id);case"MUSIC":return(0,b.jsx)(ve,{...t},`${e}-${t.index}`);case"TALK":return(0,b.jsx)(de.t,{...t},`${e}-${t.index}`);default:return(0,me.U)(t)}}),[e]),r=d.ag.get("music_and_talk.in_this_episode");return(0,b.jsxs)("div",{children:[(0,b.jsx)(W.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:Pe,children:r}),(0,b.jsx)(ue.Pv,{ariaLabel:r,hasHeaderRow:!0,rowPlaceholder:ue.hU,columns:[ue.QD.TITLE_AND_ARTIST,ue.QD.ALBUM_OR_SHOW,ue.QD.DURATION],renderRow:n,fetchTracks:a,resolveUri:e=>"MUSIC"===e.type?e.uri:"",limit:50,nrTracks:2*t-1,testID:"music-and-talk-tracklist"})]})};var Ee=i(62849);const Ue=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:i,hasDescription:a,hasMusicAndTalkSegements:n,htmlDescription:r,onExpanded:o,onDescriptionTimestampClick:l,onTranscriptTimestampClick:c,playability:u,segmentCount:p,showUrl:m,transcript:g,transcriptEnabled:x,uri:y,spec:j})=>{const k=(0,H.$P)(),P=(0,s.useMemo)((()=>j.descriptionSectionFactory()),[j]),T=(0,s.useMemo)((()=>P.trackListFactory()),[P]),[f,v]=(0,s.useState)(null),I=(0,s.useCallback)((async e=>{const t=await(0,Ee.l)(e);v(t)}),[]);(0,s.useEffect)((()=>{g&&g.length>0&&I(g[0].cdnUrl)}),[I,g]);const E=s=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q,{hasDescription:a,contentInformation:t,onTimeStampClick:l,onExpanded:o,description:i,areHTMLDescriptionsEnabled:e,htmlDescription:r,playability:u,showHeader:s,spec:P}),n&&(0,b.jsx)(H.Nh,{spec:T,children:(0,b.jsx)(Se,{segmentCount:p,uri:y})}),m&&(0,b.jsx)(h.P,{buttonSize:"sm",className:S,href:m,component:Z.Z,onClick:()=>{k.logInteraction(P.allEpisodesLinkFactory().hitUiNavigate({destination:m}))},children:d.ag.get("episode.see_all_episodes")}),(0,b.jsx)(C,{uri:y})]});return(0,b.jsx)(b.Fragment,{children:x&&g&&g?.length>0?(0,b.jsx)(ae,{transcriptSections:f,descriptionContent:E(!1),transcriptContent:(0,b.jsx)(ce,{transcriptSections:f||[],onTimeStampClick:c,episodeUri:y}),spec:j}):E(!0)})};var De=i(26687),Ne=i(66352),we=i(59933),Le=i(50807);const Re="activation-trigger-mme",Ae=({episodeUri:e,showUri:t,isLocked:i,isPlaying:s,isPlayDisabled:a,playButtonPlayLabel:n,playButtonPauseLabel:r,onClick:o,size:l="large"})=>{const d=(0,Le.E)();if((0,Ne.g)())return(0,b.jsx)(we.f,{size:l,onClick:o,isPlaying:s,disabled:a,locked:i,ariaPlayLabel:n,ariaPauseLabel:r});const u=(0,b.jsx)(De.l,{showUri:t,enabled:i,renderInline:!1,children:(0,b.jsx)(we.f,{size:l,onClick:o,isPlaying:s,disabled:a,locked:i,ariaPlayLabel:n,ariaPauseLabel:r})});return d?(0,b.jsx)(re.D,{id:Re,targetURI:(0,c.EC)(e),fadeOut:!0,children:u}):u};var Me=i(55742),Be=i(89655),Fe=i(67314),Oe=i(41404),ze=i(10049),_e=i(50183),We=i(73724),$e=i(23309),He=i(86584),Ke=i(14033),Ze=i(96791),Ve=i(90839),qe=i(29878),Xe=i(245),Ye=i(19008),Qe=i(53972),Ge=i(45255),Je=i(13645),et=i(48034),tt=i(97138),it=i(15978),st=i(98226),at=i(28990),nt=i(13336),rt=i(70216),ot=i(33088),lt=i(61916);const ct=({episode:e,onPlayEpisode:t,isPlaying:i,isActive:a,isFullyPlayed:n,setIsFullyPlayed:r,backgroundColor:o,isLocked:l,spec:c})=>{const{uri:u,playedState:p,contentRating:m,playability:h}=e,g=(0,H.$P)(),x=(0,Ve.I0)(),[y]=(0,at.z)(1e4,(e=>e?.item?.uri===u)),j=(0,_e.Y)((e=>e?.duration)),{badges:k}=(0,rt.r)({contentRating:m?.label}),C=(0,s.useCallback)((e=>{!h.playable&&k.nineteen&&(e.stopPropagation(),x((0,qe.RM)(u||"")))}),[u,h.playable,k.nineteen,x]),P=(0,s.useCallback)((()=>{const e=c.contextMenuButtonFactory().hitUiReveal();g.logInteraction(e)}),[g,c]),T=(0,s.useCallback)(((e,t)=>{(0,tt.l7)(t,c.downloadButtonFactory(),g,u)}),[g,c,u]),f=(0,s.useCallback)((e=>{const t=c.saveButtonFactory();g.logInteraction(e?t.hitLike({itemToBeLiked:u}):t.hitRemoveLike({itemNoLongerLiked:u}))}),[g,c,u]),v=!l&&!e.playability.playable,I=d.ag.get("tracklist.a11y.play",e.name,e.podcast?.name),S=d.ag.get("tracklist.a11y.pause",e.name,e.podcast?.name),U=e.podcast?.uri,D=(0,ot.j)(),N=(0,et.r)(e.uri);return(0,b.jsxs)(Xe.o,{backgroundColor:o,children:[(0,b.jsxs)(Xe.F,{children:[k.nineteen&&(0,b.jsx)(st.X,{className:E,size:16}),(0,b.jsx)(nt.E,{fullyPlayed:n,durationMs:a&&j?j:e.duration.milliseconds,releaseDate:Ut(e.releaseDate?.isoString),resumePositionMs:p.playPositionMilliseconds,isPlaying:i,position:a&&y||void 0})]}),(0,b.jsxs)(Xe.F,{children:[(0,b.jsx)("div",{onClick:C,children:(0,b.jsx)(Ae,{episodeUri:e.uri,showUri:U,isLocked:l,onClick:()=>{t(p.playPositionMilliseconds)},isPlaying:i,isPlayDisabled:v,playButtonPlayLabel:I,playButtonPauseLabel:S,size:D})}),!l&&(0,b.jsx)(Ye.p,{uri:e.uri,onClick:T,size:D}),N?(0,b.jsx)(lt.T,{uri:e.uri,size:D}):(0,b.jsx)(Ge.w,{uri:e.uri,size:D,onClick:f}),(0,b.jsx)(it.y,{onShow:P,menu:(0,b.jsx)(Je.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:U,contextUri:e.uri,isPlayed:n,onMarkAsPlayed:r}),children:(0,b.jsx)(Qe.z,{label:d.ag.get("more.label.context",e.name),size:D})})]})]})};i(64808);var dt=i(47166),ut=i(29461),pt=i(55085),mt=i(31926),ht=i(38781),gt=i(37334),xt=i(94989),yt=i(55272),bt=i(52470),jt=i(36085),kt=i(46474),Ct=i(40897);const Pt=({coverArt:e,name:t})=>{const i=(0,jt.jh)(),s=i===jt.Uo.SMALL||i===jt.Uo.XSMALL;return(0,b.jsx)(kt.O,{images:e,type:Ze.p.EPISODE,shape:kt.K.ROUNDED_CORNERS,title:t,size:s?Ct.m$.SIZE_20:Ct.m$.SIZE_24,className:U})};const Tt=({episode:e,isFullyPlayed:t,setIsFullyPlayed:i,backgroundColor:a,spec:n})=>{const{uri:o,name:l,sharingInfo:u,playedState:p,episodeType:m,releaseDate:h,coverArt:x}=e,y=(0,H.$P)(),j=function(e,t,i,s,a){const n=t===Ke.Wf.Episode;return(0,bt.G3)(e,s,i,a)?(0,b.jsx)(bt.Fg,{isMusicAndTalk:n}):n?d.ag.get("type.showEpisode"):d.ag.get("type.podcastEpisode")}(o,m||Ke.Wf.Unknown,p.playPositionMilliseconds,Ut(h?.isoString),p.state===Ke.sY.Completed),k=e.podcast?.uri,C=function(e){const t=(0,c.EC)(e);return`/show/${(0,c.HB)(t?.id||"")}`}(k),P=(0,s.useCallback)((()=>{y.logInteraction(n.podcastLinkFactory().hitUiNavigate({destination:C}))}),[y,C,n]),f=(0,r.W6)(g.vyX,{loadingValue:!1}),I=e.podcast?.coverArt,S=!(I&&I.length===x.length&&x.every(((e,t)=>e.url===I[t].url))),E=f&&!S,U=(0,jt.jh)();return(0,b.jsxs)(dt.gF,{backgroundColor:a,children:[(0,b.jsx)(pt.W,{children:(0,b.jsx)(mt.i,{text:l,dragUri:o,dragLabel:l})}),!E&&(0,b.jsx)(ut.k,{children:(0,b.jsx)(yt._,{menu:(0,b.jsx)(Je.k,{uri:o,sharingInfo:u,showUri:k,contextUri:o,isPlayed:t,onMarkAsPlayed:i}),children:(0,b.jsx)(dt.Oe,{loading:"eager",name:l,images:x,placeholderType:"episode",shape:f?dt.Kc.SQUARE:dt.Kc.ROUNDED_CORNERS})})}),(0,b.jsxs)(dt.sP,{children:[(0,b.jsx)(ht.g,{children:j}),(0,b.jsx)(yt._,{menu:(0,b.jsx)(Je.k,{uri:o,sharingInfo:u,showUri:k,contextUri:o,isPlayed:t,onMarkAsPlayed:i}),children:(0,b.jsx)(dt.xd,{dragUri:o,dragLabel:l,scaleAtMinWidth:dt.vz,className:Y()({[T]:f}),children:(0,b.jsx)("span",{"data-testid":"episodeTitle",children:l})})}),(0,b.jsx)(yt._,{menu:(0,b.jsx)(Je.k,{uri:o,sharingInfo:u,showUri:k,contextUri:o,isPlayed:t,onMarkAsPlayed:i}),children:(0,b.jsxs)(xt.default,{to:C,onClick:P,className:D,children:[E&&(0,b.jsx)(Pt,{name:l,coverArt:x}),(0,b.jsx)(gt.m,{className:U===jt.Uo.SMALL&&E?"":v,children:(0,b.jsx)("span",{"data-testid":"showTitle",children:e.podcast?.name})})]})})]})]})};var ft=i(65926),vt=i(65672),It=i(39509);const St=({episode:e})=>{const{uri:t,episodeType:i,description:n,htmlDescription:l,podcastSubscription:d,segmentsCount:m,podcast:h,contentInformation:x,playedState:y,coverArt:j}=e,{spec:k,logger:C}=(0,H.fU)(o.J,{data:{uri:t}}),T=(0,ft.k)(),f=(0,s.useMemo)((()=>k.headerFactory()),[k]),v=(0,s.useMemo)((()=>k.actionBarFactory()),[k]),[I,S]=(0,s.useState)(y.state===Ke.sY.Completed),E=(0,Oe.g)(),U=(0,Me.o)(),D=void 0!==m&&m>0,N=(0,r.W6)(g.WE4,{loadingValue:!1}),w=(0,Ne.g)(),{triggerPlay:L,togglePlay:R,isPlaying:A,isActive:M}=(0,oe.n)({uri:t,...T?{}:{pages:[{items:[{type:Ze.p.EPISODE,uri:t,uid:null,provider:null}]}]}},{featureIdentifier:"episode"}),{isActive:B}=(0,ze.$o)(t),F=j[0].url,O=(0,Fe.Zj)(F||null),z=(0,_e.Y)((e=>e?.isPaused??void 0)),_=(0,Le.E)(),W=d.isPaywalled&&!d.isUserSubscribed,$=B||M,K=e?{name:e.name,uri:e.uri,audio:{items:e.audio.items.map((e=>({url:e.url})))}}:null,Z=h?{name:h.name,uri:h.uri,trailer:h.trailer,showTypes:h.showTypes}:null,V=(0,Be.s)(K,Z),q=(0,s.useCallback)(((e,s,a,n)=>{const r=()=>{z?(n?.("resume"),E.resume()):(n?.("pause"),E.pause())};if(W)return;let o="play";if(!A||0!==e&&s||(o="pause"),U({intent:o,targetUri:t,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),i===Ke.Wf.Episode&&_)p.y.set((()=>({triggerId:a||Re,triggerAction:null})));else if(M&&!s)w?r():R({loggingParams:n?.()});else if(B&&!s)r();else{const t=n?.("play");w?V({seekTo:e,loggingParams:t}):L({seekTo:e,loggingParams:t})}}),[W,A,U,t,i,_,B,M,w,z,E,R,V,L]),X=(0,s.useCallback)((e=>{q(e,!1,void 0,(e=>{const i=k.actionBarFactory().playButtonFactory();let s;return s="pause"===e||A?i.hitPause({itemToBePaused:t}):"resume"===e||$?i.hitResume({itemToBeResumed:t}):i.hitPlay({itemToBePlayed:t}),C.logInteraction(s)}))}),[q,$,A,C,k,t]),Y=(0,s.useCallback)((e=>{q(e,!0,void 0,(()=>C.logInteraction(k.descriptionSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:t}))))}),[q,C,k,t]),Q=(0,s.useCallback)(((e,t)=>{q(e,!0,t)}),[q]),G=(0,s.useCallback)((()=>{U({intent:"expand-description",type:"click"})}),[U]),[J,ee]=(0,a.lr)();(0,s.useEffect)((()=>{if(e&&!$&&J.has("t")){const t=J.get("t")||"0",i=1e3*parseInt(t,10);i<=e.duration.milliseconds&&(J.delete("t"),ee(J,{replace:!0}),q(i,!0))}}),[e,q,$,J,ee]);const te=!!n||!!l,ie=e.podcast?.uri,se=(0,c.EC)(ie)?.toURLPath(!0);return(0,b.jsxs)("section",{"data-testid":"episode",className:P,children:[(0,b.jsx)(u.$,{children:(0,He.mK)({episodeOrChapterName:e.name,showOrAudiobookName:e.podcast?.name??"",type:"Podcast"})}),(0,b.jsx)(Tt,{episode:e,isFullyPlayed:I,setIsFullyPlayed:S,backgroundColor:O,spec:f}),(0,b.jsx)(ct,{episode:e,onPlayEpisode:X,isPlaying:A,isActive:$,isFullyPlayed:I,setIsFullyPlayed:S,backgroundColor:O,isLocked:W,spec:v}),(0,b.jsx)("div",{className:"contentSpacing",children:(0,b.jsx)(Ue,{transcriptEnabled:N,transcript:e.transcript,hasDescription:te,contentInformation:x,onDescriptionTimestampClick:Y,onTranscriptTimestampClick:Q,onExpanded:G,description:e.description,areHTMLDescriptionsEnabled:!0,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegements:D,segmentCount:m,uri:e.uri,showUrl:se,spec:k})})]})},Et=s.memo((function(){const{episodeId:e=""}=(0,n.UO)(),t=(0,c.YD)(e).toURI(),i=(0,We.I)(t);return i?.isError||!i?.episodeOrChapter?(0,b.jsx)(m.h,{hasError:i?.isError||!1,errorMessage:d.ag.get("error.not_found.title.podcast")}):(0,$e.Ey)(i.episodeOrChapter)?(0,b.jsx)(vt.InstrumentedRedirect,{to:(0,c.EC)(i.episodeOrChapter.book?.uri).toURLPath(!0)}):(0,b.jsx)(s.Suspense,{fallback:null,children:(0,b.jsx)(It.C,{pageId:l.Wg.PODCAST_EPISODE,uri:t,children:(0,b.jsx)(St,{episode:i.episodeOrChapter})})})}));function Ut(e){return e?.replace(/T.*/,"")||""}}}]);
//# sourceMappingURL=xpui-routes-episode.js.map