"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7379],{40085:(e,t,r)=>{r.d(t,{l:()=>A});r(95101),r(32548),r(99692);var l=r(59496),a=r(63840),i=r(25980),s=r(44903),o=r(42473);const n={"custom-order":s.HI,"title-and-artist-title":{column:o.Q.TITLE_AND_ARTIST,order:o.k.ASC},"title-and-artist-artist":{column:o.Q.TITLE_AND_ARTIST,order:o.k.SECONDARY_ASC},title:{column:o.Q.TITLE,order:o.k.ASC},artist:{column:o.Q.ARTIST,order:o.k.ASC},"added-by":{column:o.Q.ADDED_BY,order:o.k.ASC},"added-at":{column:o.Q.ADDED_AT,order:o.k.ASC},duration:{column:o.Q.DURATION,order:o.k.ASC},album:{column:o.Q.ALBUM,order:o.k.ASC},"album-or-podcast":{column:o.Q.ALBUM_OR_PODCAST,order:o.k.ASC},"album-or-show":{column:o.Q.ALBUM_OR_SHOW,order:o.k.ASC}},c={"title-and-artist-title":o.Q.TITLE_AND_ARTIST,"title-and-artist-artist":o.Q.TITLE_AND_ARTIST,title:o.Q.TITLE,artist:o.Q.ARTIST,"added-by":o.Q.ADDED_BY,"added-at":o.Q.ADDED_AT,duration:o.Q.DURATION,album:o.Q.ALBUM,"album-or-podcast":o.Q.ALBUM_OR_PODCAST,"album-or-show":o.Q.ALBUM_OR_SHOW},u={[o.k.NONE]:o.k.NONE,[o.k.ASC]:o.k.DESC,[o.k.DESC]:o.k.ASC,[o.k.SECONDARY_ASC]:o.k.SECONDARY_DESC,[o.k.SECONDARY_DESC]:o.k.SECONDARY_ASC},d=(o.Q.INDEX,{[o.Q.INDEX]:{key:"custom-order",get value(){return a.ag.get("sort.custom-order")}},[o.Q.TITLE_AND_ARTIST]:{key:"title",get value(){return a.ag.get("sort.title")}},[o.Q.TITLE]:{key:"title",get value(){return a.ag.get("sort.title")}},[o.Q.ARTIST]:{key:"artist",get value(){return a.ag.get("sort.artist")}},[o.Q.ADDED_BY]:{key:"added-by",get value(){return a.ag.get("sort.added-by")}},[o.Q.ADDED_AT]:{key:"added-at",get value(){return a.ag.get("sort.date-added")}},[o.Q.DURATION]:{key:"duration",get value(){return a.ag.get("sort.duration")}},[o.Q.EVENT_DATE]:null,[o.Q.EVENT_INFO]:null,[o.Q.ALBUM]:{key:"album",get value(){return a.ag.get("sort.album")}},[o.Q.ALBUM_OR_PODCAST]:{key:"album-or-podcast",get value(){return a.ag.get("sort.album-or-podcast")}},[o.Q.ALBUM_OR_SHOW]:{key:"album-or-show",get value(){return a.ag.get("sort.album-or-show")}},[o.Q.PLAYS]:null,[o.Q.RELEASE_DATE]:null,[o.Q.ADD]:null,[o.Q.ACTIONS]:null,[o.Q.CONCERT_VENUE]:null,[o.Q.CONCERT_DATE]:null});var g=r(62699),m=r(49634),x=r(4637);function T(e){return!!e}const A=({columns:e,disabled:t,onSort:r})=>{const A=[...e],C=A.indexOf(g.QD.TITLE_AND_ARTIST);-1!==C&&A.splice(C,1,g.QD.TITLE,g.QD.ARTIST);const{sortState:h,setSortState:D}=(0,l.useContext)(s.Gb),S=function(e){return null===e.column?d[g.QD.INDEX]:(0,m.cB)(e.column,e)?d[g.QD.ARTIST]:d[e.column]}(h),k=(0,l.useCallback)((e=>{r?.(),D(((e,t,r)=>e?t!==c[e]||"artist"===e&&[o.k.ASC,o.k.DESC].includes(r)||"title"===e&&[o.k.SECONDARY_ASC,o.k.SECONDARY_DESC].includes(r)?n[e]:{column:c[e],order:u[r]}:s.HI)(e,h.column,h.order))}),[r,D,h.column,h.order]),p=(0,l.useCallback)((()=>null!==h.column),[h.column]),j=A.map((e=>d[e])).filter(T);return(0,x.jsx)(i.A,{options:j,onSelect:k,selected:S,isSelectionChanged:p,sortOrder:h.order,heading:a.ag.get("drop_down.sort_by"),disabled:t,enableViewModeMenu:!0})}},54754:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ie});r(95101),r(32548),r(99692);var l=r(59496),a=r(9102),i=r(74146),s=r(16747),o=r(60152),n=r(63840),c=r(30900),u=r(47166),d=r(55085),g=r(31926),m=r(11021),x=r(50425),T=r(49634),A=r(99957),C=r(62699),h=r(44903),D=r(35675),S=r(50091),k=r(76337),p=r(93092),j=r(11712),y=r(11197),I=r(4722),b=r(67966),f=r(245),E=r(18933),Q=r(3058),_=r(45100),R=r(40085);const N="uCHqQ74vvHOnctGg0X0B",v="feuNq1FTxMbdeOTuFgpA";var O=r(4637);const P=l.memo((({tracklistDomRef:e})=>{const{spec:t,logger:r}=(0,b.fU)(E.createDesktopSearchBarEventFactory,{}),a=(0,l.useCallback)((()=>{r.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[r,t]),i=(0,l.useCallback)((()=>{r.logInteraction(t.filterFieldFactory().hitClearFilter())}),[r,t]),s=(0,Q.v)().filter((e=>h.MI.includes(e)));return(0,O.jsxs)("div",{className:v,children:[(0,O.jsx)(l.Suspense,{fallback:null,children:(0,O.jsx)(_.K,{placeholder:n.ag.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:a,onClear:i})}),(0,O.jsx)(R.l,{columns:s})]})}));var L=r(33088),M=r(97138),U=r(78909),B=r(45775);const F=l.memo((function({tracklistDomRef:e,togglePlay:t,isPlaying:r,isActive:a,backgroundColor:i,spec:s,logger:o}){const c=(0,B.Q)(),u=(0,l.useMemo)((()=>s.shuffleButtonContainerFactory()),[s]),d=(0,L.j)(),g=(0,l.useCallback)((()=>{const e=(0,M.aK)({isPlaying:r,isActive:a,spec:s.playButtonFactory(),logger:o,uri:p.b});t({loggingParams:e})}),[a,r,o,s,t]);return(0,O.jsx)(f.o,{backgroundColor:i,children:(0,O.jsxs)(f.F,{children:[(0,O.jsx)(x.$,{size:d,onClick:g,isPlaying:r,uri:p.b}),c&&(0,O.jsx)(b.Nh,{spec:u,children:(0,O.jsx)(U.K,{entityName:n.ag.get("local-files"),contextUri:p.b,activationPlacement:"bottomEnd",size:d})}),(0,O.jsx)(b.Nh,{spec:s,children:(0,O.jsx)(P,{tracklistDomRef:e})})]})})}));r(13638),r(14136),r(25976),r(80904),r(17155),r(38734),r(82574);var w=r(34844),Y=r(42473),H=r(98628),W=r(55272),z=r(46304),X=r(5788),K=r(70216),V=r(43514),G=r(85624),$=r(65354),q=r(30757),J=r(88258);const Z=l.memo((function({uri:e,uid:t,name:r,duration_ms:a,artists:i,album:s,is19PlusOnly:o,isExplicit:c,isPlayable:u,index:d,contextUri:g,imgUrl:m,usePlayContextItem:x,isCompactMode:T=!1}){const{spec:C}=(0,b.fU)(w.r,{data:{position:d,reason:"",uri:e}}),{filter:h}=(0,l.useContext)(A.fo),{isActive:D,isPlaying:S,triggerPlay:k,togglePlay:p}=x({uid:t,uri:e,index:d}),{badges:j,hasBadges:y}=(0,K.r)({isExplicit:c}),I=i?.map((e=>e.name)).join(n.ag.getSeparator())||"",f=(0,Q.v)();return(0,O.jsx)(X.JL,{value:"row",index:d,children:(0,O.jsx)(W._,{menu:(0,O.jsx)(V.N,{uri:e,uid:t,contextUri:g}),children:(0,O.jsx)(J.c,{uri:e,contextUri:g,isActive:D,index:d,onTriggerPlay:(e,t)=>{k({loggingParams:t})},ariaRowIndex:d+1,isPlayable:u,ageRestricted:o,dragMetadata:{name:r,createdBy:I},spec:C,isCompactMode:T,children:f.map(((l,o)=>{const c=(0,H.Y)(o,l,f);switch(l){case Y.Q.INDEX:return(0,O.jsx)(c,{ariaColIndex:o,children:(0,O.jsx)($.Du,{uri:e,playAriaLabel:n.ag.get("tracklist.a11y.play",r,I),isPlaying:S,isActive:D,onClick:(e,t)=>{p({loggingParams:t})},spec:C,children:(0,O.jsx)($.km,{children:d+1})})},o);case Y.Q.TITLE_AND_ARTIST:return(0,O.jsxs)(c,{ariaColIndex:o,children:[(0,O.jsx)($.lD,{src:m}),(0,O.jsxs)($.vm,{children:[(0,O.jsx)($.Wh,{titleText:r,children:(0,O.jsx)(G.o,{searchWords:[h],textToHighlight:r})}),y&&(0,O.jsx)($.g3,{children:j.explicit?(0,O.jsx)(z.N,{}):null}),(0,O.jsx)($.K9,{children:i&&(0,O.jsx)(q.o,{nonInteractive:!0,artists:i,filter:h})})]})]},o);case Y.Q.TITLE:return(0,O.jsx)(c,{ariaColIndex:o,children:(0,O.jsxs)($.nh,{children:[(0,O.jsx)($.Wh,{titleText:r,children:(0,O.jsx)(G.o,{searchWords:[h],textToHighlight:r})}),y&&(0,O.jsx)($.g3,{children:j.explicit?(0,O.jsx)(z.N,{}):null})]})},o);case Y.Q.ARTIST:return(0,O.jsx)(c,{ariaColIndex:o,children:(0,O.jsx)($.I4,{children:i&&(0,O.jsx)(q.o,{nonInteractive:!0,artists:i,filter:h})})},o);case Y.Q.ALBUM:return(0,O.jsx)(c,{ariaColIndex:o,children:s?.name&&(0,O.jsx)($.BM,{nonInteractive:!0,uri:s?.uri,name:s?.name,children:(0,O.jsx)(G.o,{searchWords:[h],textToHighlight:s?.name})})},o);case Y.Q.DURATION:return(0,O.jsxs)(c,{ariaColIndex:o,children:[(0,O.jsx)($.A$,{duration:a}),(0,O.jsx)($.Zv,{menu:(0,O.jsx)(V.N,{uri:e,uid:t,contextUri:g}),label:n.ag.get("more.label.track",r,I),spec:C})]},o);default:return null}}))})})})}),((e,t)=>e.uri===t.uri&&e.index===t.index&&e.isCompactMode===t.isCompactMode));var ee=r(21487);const te=new Set(h.MI),re=l.memo((function({uri:e,tracks:t,sortState:r,handleSort:a,usePlayContextItem:i,tracklistDomRef:s,isCompactMode:o=!1}){const c=(0,Q.v)(),u=(0,l.useRef)(null),d=(0,l.useCallback)(((t,r)=>{const l=(0,ee.X)(t.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,O.jsx)(Z,{index:r,contextUri:e,uri:t.uri,uid:t.uid,isPlayable:t.isPlayable,duration_ms:t.duration.milliseconds,name:t.name,artists:t.artists,album:t.album||void 0,isExplicit:t.isExplicit,is19PlusOnly:t.is19PlusOnly,type:t.type,imgUrl:l?.url||"",usePlayContextItem:i,isCompactMode:o},t.uid)}),[e,i,o]);return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(X.JL,{value:"playlist-tracklist",children:(0,O.jsx)(C.Pv,{ariaLabel:n.ag.get("local-files"),hasHeaderRow:!0,columns:c,sortableColumns:te,sortState:r,onSort:a,renderRow:d,resolveUri:e=>e.uri,resolveUid:e=>e.uid,tracks:t,nrTracks:t.length,limit:100,outerRef:u,outerDomRef:s,isCompactMode:o},e)})})})),le=[C.QD.INDEX,C.QD.TITLE_AND_ARTIST,C.QD.ALBUM,C.QD.DURATION],ae=()=>{const{filter:e}=(0,l.useContext)(A.fo),{sortState:t,setSortState:r}=(0,l.useContext)(h.Gb),f=(0,l.useContext)(j.t),E=(0,y.I)(),Q=(0,k.Y)(i.Fzl),_=(0,l.useRef)(null),{spec:R}=(0,b.fU)(o.G,{data:{uri:p.b}}),v=(0,l.useMemo)((()=>R.actionBarFactory()),[R]),P=(0,l.useMemo)((()=>R.tracklistFactory()),[R]),L=(0,b.$P)(),{isCompactMode:M}=(0,S.mJ)(),U=(({isCompactMode:e=!1})=>{const t=[...le];return e&&t.splice(t.indexOf(C.QD.TITLE_AND_ARTIST),1,C.QD.TITLE,C.QD.ARTIST),t})({isCompactMode:M}),B=(0,l.useCallback)(((e,l)=>{r((0,T.VK)(e,t)),L.logInteraction(R.tracklistFactory().columnHeaderFactory({identifier:e,position:l||0}).hitSort())}),[r,t,L,R]),{data:w}=(0,a.useQuery)(["local-files",t,e],(()=>f.getTracks((0,T._j)(t),e)),{staleTime:0,cacheTime:3e5,keepPreviousData:!0,enabled:E}),{isActive:Y,isPlaying:H,togglePlay:W,usePlayContextItem:z}=(0,I.n)({uri:p.b,pages:[{items:(w??[]).map((e=>({...e,provider:null})))}]},{featureIdentifier:"local_files"});return w?e||w.length&&E?(0,O.jsx)(D.a,{columns:U,children:(0,O.jsxs)("div",{role:"presentation",className:N,children:[(0,O.jsxs)(u.gF,{backgroundColor:Q,children:[(0,O.jsxs)(d.W,{children:[(0,O.jsx)(x.$,{size:"medium",onClick:()=>W(),isPlaying:H,uri:p.b}),(0,O.jsx)(g.i,{text:n.ag.get("local-files")})]}),(0,O.jsxs)(u.sP,{children:[(0,O.jsx)(u.xd,{children:n.ag.get("local-files")}),(0,O.jsx)(u.T0,{children:n.ag.get("local-files.description")})]})]}),(0,O.jsx)(F,{togglePlay:W,isPlaying:H,isActive:Y,backgroundColor:Q,tracklistDomRef:_,spec:v,logger:L}),(0,O.jsx)("div",{className:"contentSpacing",children:(0,O.jsx)(b.Nh,{spec:P,children:(0,O.jsx)(re,{tracks:w,uri:p.b,handleSort:B,sortState:t,usePlayContextItem:z,tracklistDomRef:_,isCompactMode:M})})})]})}):(0,O.jsx)(c.u,{linkTo:"/preferences",linkTitle:n.ag.get("local-files.empty-button"),message:n.ag.get("local-files.empty-description"),title:n.ag.get("local-files.empty-header"),children:(0,O.jsx)(s.Y,{iconSize:64,"aria-hidden":"true"})}):(0,O.jsx)(m.h,{hasError:!1,errorMessage:n.ag.get("error.request-artist-failure"),loadOffline:!0})},ie=()=>(0,O.jsx)(h.kz,{uri:"spotify:internal:local-files",children:(0,O.jsx)(A.hz,{uri:"spotify:internal:local-files",children:(0,O.jsx)(ae,{})})})}}]);
//# sourceMappingURL=xpui-routes-collection-local-files.js.map