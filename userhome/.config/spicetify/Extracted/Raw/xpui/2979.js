"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2979],{89702:(e,t,r)=>{r.d(t,{R:()=>T});var n=r(30758),l=r(71217),o=r(22949);function u(e,t,r=!1){if(!e)return void console.error("No list element found. Canceling moving focus");if(!(0,o.fk)(e))return;const n=e.querySelector('[tabindex="0"]');t===l.O.UP&&(0,o.MS)(n,s(e,n,l.O.UP,r)),t===l.O.DOWN&&(0,o.MS)(n,s(e,n,l.O.DOWN,r)),t===l.O.RIGHT&&(0,o.MS)(n,c(n,l.O.RIGHT,r)),t===l.O.LEFT&&(0,o.MS)(n,c(n,l.O.LEFT,r)),t===l.O.HOME&&(0,o.MS)(n,a(l.O.HOME,r)??n),t===l.O.END&&(0,o.MS)(n,a(l.O.END,r)??n)}function s(e,t,r,n=!1){const u=t.closest('li[role="row"]');if(!u)return t;let s=u;const a=Array.from(e.querySelectorAll('li[role="row"]')),i=Array.from(u.querySelectorAll(o.nu)),f=a.indexOf(u);if(f<0)return t;const d=(n&&t!==i[0]||!n&&t!==u)&&!(t instanceof HTMLLIElement);if(r===l.O.UP){if(document.activeElement===e){s=a[a.length-1];return(n?s.querySelector(o.nu):s)??t}if(d)return c(t,l.O.LEFT,n);let r=f-1;if(-1===r)return t;s=a[r],r-=1}else if(r===l.O.DOWN){if(document.activeElement===e){s=a[0];return(n?s.querySelector(o.nu):s)??t}if(d)return c(t,l.O.RIGHT,n);let r=f+1;if(r===a.length)return t;s=a[r],r+=1}return(n?s.querySelector(o.nu):s)??t}function c(e,t,r=!1){const n=e.closest('li[role="row"]');if(!n)return e;let u=e;const s=Array.from(n.querySelectorAll(o.nu)),c=s.indexOf(e);let a=0;if(t===l.O.RIGHT&&c-1!==s.length)a=c+1;else{if(t===l.O.LEFT&&-1===c)return n;if(t===l.O.LEFT&&0!==c)a=c-1;else if(t===l.O.LEFT&&0===c){return(r?n.querySelector(o.nu):n)??n}}return u=s.at(a),u??e}function a(e,t=!1){const{currentFocus:r,listEl:n}=function(){const e=document.activeElement,t=e?.closest("ul");return((0,l.I)(e)||e instanceof HTMLLIElement)&&t?{currentFocus:e,listEl:t}:{currentFocus:null,listEl:null}}();if(null===r||null===n)return null;const u=r.closest('li[role="row"]');if(!u)return r;const s=Array.from(n.querySelectorAll('li[role="row"]')),c=Array.from(u.querySelectorAll(o.nu));if(s.indexOf(u)<0)return r;const a=t&&r===c[0]||!t&&r===u;if(e===l.O.HOME){if(a){return(t?s[0].querySelector(o.nu):s[0])??r}return(t?c[1]:c[0])??r}if(e===l.O.END){if(a){return(t?s[s.length-1].querySelector(o.nu):s[s.length-1])??r}return c[c.length-1]??r}return r}var i=r(43356),f=r(35662),d=r(86070);const T=(0,n.forwardRef)((({onKeyDown:e,children:t,firstInteractiveIsWrapper:r=!1,...s},c)=>{const a=(0,f.N)(c);(0,i.R)(a);const T=(0,n.useCallback)((t=>{a.current?.contains(t.target)&&("ArrowUp"!==t.key&&"ArrowDown"!==t.key&&"Home"!==t.key&&"End"!==t.key||t.preventDefault(),"ArrowUp"!==t.key&&"ArrowDown"!==t.key||document.documentElement.classList.remove("no-focus-outline"),"ArrowUp"===t.key&&u(a.current,l.O.UP,r),"ArrowDown"===t.key&&u(a.current,l.O.DOWN,r),"ArrowRight"===t.key&&u(a.current,l.O.RIGHT,r),"ArrowLeft"===t.key&&u(a.current,l.O.LEFT,r),"Home"===t.key&&u(a.current,l.O.HOME,r),"End"===t.key&&u(a.current,l.O.END,r),e?.(t))}),[r,a,e]),S=(0,n.useCallback)((e=>{if(!a.current)return;const t=e.target,r=a.current.querySelector('[tabindex="0"]');t.closest('li[role="row"]')&&t!==r&&(0,o.MS)(r,t,{preventScroll:!0})}),[a]);return(0,d.jsx)("ul",{role:"treegrid",ref:a,onKeyDown:T,onFocus:S,tabIndex:0,...s,children:t})}))},20616:(e,t,r)=>{r.d(t,{W:()=>u});var n=r(30758),l=r(73891),o=r(86070);const u=({children:e,innerRef:t,reRunOnDOMUpdate:r=!1,...u})=>{const s=(0,n.useRef)(null),c=t??s;return(0,l.g)(c,r),(0,o.jsx)("li",{ref:c,"aria-expanded":"true","aria-level":1,role:"row",...u,children:e})}},42583:(e,t,r)=>{r.d(t,{Nz:()=>s,Vp:()=>o,Vv:()=>c,wD:()=>a,xz:()=>u});var n=r(76123),l=r(96566);const o=[n.fl.TRACKS,n.fl.LOCAL_TRACKS,n.fl.ALBUMS,n.fl.ARTISTS,n.fl.PLAYLISTS,n.fl.PLAYLISTS_V2,n.fl.FOLDERS,n.fl.EPISODES,n.fl.CHAPTERS,n.fl.SHOWS,n.fl.AUDIOBOOKS,n.fl.PSEUDO_PLAYLISTS],u={[n.fl.TRACKS]:"tracks",[n.fl.ALBUMS]:"albums",[n.fl.ARTISTS]:"artists",[n.fl.PLAYLISTS]:"playlists",[n.fl.FOLDERS]:"folders",[n.fl.SHOWS]:"shows",[n.fl.EPISODES]:"episodes",[n.fl.CHAPTERS]:"chapters",[n.fl.LOCAL_TRACKS]:"local-tracks",[n.fl.AUDIOBOOKS]:"audiobooks",[n.fl.PSEUDO_PLAYLISTS]:"pseudo-playlists"};let s=function(e){return e.ON="on",e.BEFORE="before",e.AFTER="after",e}({});const c=(0,l.g)(s);function a(e){return o.includes(e)}},50925:(e,t,r)=>{r.d(t,{A:()=>O});var n=r(30758),l=r(88308),o=r(76123),u=r(42583);function s(e,t,r,n){if(e.defaultPrevented)return null;const l=t.includes(u.Nz.BEFORE),o=t.includes(u.Nz.AFTER);let s=u.Nz.ON;if(e.currentTarget instanceof HTMLElement&&(l||o)){const{top:o,height:c,left:a,width:i,right:f}=e.currentTarget.getBoundingClientRect(),d=t.includes(u.Nz.ON);if("horizontal"===r)if(d&&l){(n?e.clientX>Math.round(f)-i/4:e.clientX<Math.round(a)+i/4)&&(s=u.Nz.BEFORE)}else{s=(n?e.clientX>Math.round(f)-i/2:e.clientX<Math.round(a)+i/2)?u.Nz.BEFORE:u.Nz.AFTER}else"vertical"===r&&(d&&l?e.clientY<Math.round(o)+c/4&&(s=u.Nz.BEFORE):s=e.clientY<Math.round(o)+c/2?u.Nz.BEFORE:u.Nz.AFTER)}return t.includes(s)?s:null}var c=r(22726);function a(e,t){return Array.from(e.dataTransfer?.types??[]).filter(o._4).filter((e=>!!(0,u.wD)(e)&&t.includes(e))).filter(u.wD)}var i=r(13719);function f(e,t,r){const n=a(e,t);if(!n.length)return function(e,t){return e.split(/[\s,;]+/g).map((e=>(0,c.o_h)(e?.trim()))).filter(i.P).reduce(((e,r)=>{const n=o.Ay[r.type];return(0,u.wD)(n)&&t.includes(n)?(e[n]||=[],e[n].push(r.toURI()),e):e}),{})}(e.dataTransfer?.getData("text/plain"),t);const l=Object.fromEntries(n.map((t=>[t,e.dataTransfer?.getData(t)?.split("\n").filter(Boolean)??[]])));if(r){const{[o.fl.PLAYLISTS]:e,...t}=l,r=Array.from(new Set([...l[o.fl.PLAYLISTS_V2]??[],...(l[o.fl.PLAYLISTS]??[]).map(d)]));return{...t,...r.length?{[o.fl.PLAYLISTS_V2]:r}:null}}return l}function d(e){const t=(0,c.o_h)(e);return t?.type===c.NQG.PLAYLIST?(0,c.Pse)(t.id).toURI():e}var T=r(97503),S=r(37178);const p={droppableMimeTypes:"albums artists episodes chapters folders playlists shows tracks local-tracks audiobooks pseudo-playlists",useDropTarget:"main-useDropTarget-base","useDropTarget--albums":"main-useDropTarget-album","useDropTarget--artists":"main-useDropTarget-artist","useDropTarget--episodes":"main-useDropTarget-episode","useDropTarget--chapters":"OxrHhBsQAggwnv6RmqRy","useDropTarget--folders":"main-useDropTarget-folder","useDropTarget--playlists":"main-useDropTarget-playlist","useDropTarget--shows":"main-useDropTarget-show","useDropTarget--tracks":"main-useDropTarget-track","useDropTarget--local-tracks":"main-useDropTarget-local","useDropTarget--audiobooks":"main-useDropTarget-audiobook","useDropTarget--pseudo-playlists":"main-useDropTarget-pseudoPlaylist"};function O({uri:e,id:t=e,allowedMimeTypesByDropPosition:r,onDrop:c,onLongDragOver:i,longDragOverTimeout:d=1e3,reorderDirection:O="vertical"}){const E=(0,l.lB)((()=>r),[r]),m=(0,S.W)(),y=(0,T.wK)(),D=!!t&&1===y.length&&y[0]===t,L=Object.values(E).every((e=>e.includes(o.fl.PLAYLISTS_V2)&&!e.includes(o.fl.PLAYLISTS))),[A,v]=(0,n.useState)(null),h=(0,n.useCallback)((e=>D?[]:Object.entries(E).filter((([t,r])=>a(e,r).length>0)).map((([e])=>e)).filter(u.Vv)),[D,E]),w=(0,n.useRef)(!0),R=(0,n.useRef)(null),k=(0,n.useRef)(c);k.current=c;const I=(0,n.useRef)(i);I.current=i;const b=(0,n.useCallback)((()=>{w.current=!0,v(null),R.current&&(window.clearTimeout(R.current),R.current=null)}),[]);(0,n.useEffect)((()=>b),[b]);const N=(0,n.useCallback)((e=>{const t=h(e);t.length&&(v(s(e,t,O,m)),e.dataTransfer&&!e.defaultPrevented&&(e.dataTransfer.dropEffect=t.includes(u.Nz.ON)?"copy":"move"),e.preventDefault())}),[h,m,O]),P=(0,n.useCallback)((e=>{if(h(e).length&&!e.defaultPrevented){if(w.current){w.current=!1;const t=e.currentTarget,r=()=>{document.contains(t)||(b(),document.removeEventListener("dragenter",r))};document.addEventListener("dragenter",r),document.addEventListener("dragend",(()=>{document.removeEventListener("dragenter",r),b()}),{once:!0}),I.current&&(R.current=window.setTimeout((()=>{I.current?.()}),d))}e.preventDefault()}}),[h,d,b]),F=(0,n.useCallback)((e=>{h(e).length&&(function(e){return null===e.relatedTarget&&g?!document.elementsFromPoint(e.clientX,e.clientY).includes(e.currentTarget):!e.currentTarget.contains(e.relatedTarget instanceof Node?e.relatedTarget:null)}(e)&&b(),e.preventDefault())}),[h,b]),M=(0,n.useCallback)((e=>{const t=s(e,h(e),O,m);if(!e.defaultPrevented&&t){const r=f(e,E[t]??[],L),n=function(e){return{sectionId:parseInt(e.dataTransfer.getData("text/x-spotify-section"),10)||0,contextUri:e.dataTransfer.getData("text/x-spotify-context"),itemIds:e.dataTransfer.getData(o.fl.UIDS)?.split("\n").filter(Boolean)??[]}}(e);Object.keys(r).length&&k.current&&(k.current(r,t,n),e.preventDefault())}b()}),[h,O,m,b,E,L]),H=(0,n.useMemo)((()=>`${p.useDropTarget} ${Array.from(new Set(Object.values(E).flat()))?.map((e=>p[`useDropTarget--${u.xz[e]}`]??"")).join(" ")}`),[E]);return(0,n.useMemo)((()=>({dropPosition:A,className:H,onDragEnter:P,onDragLeave:F,onDragOver:N,onDrop:M})),[H,A,P,F,N,M])}const g=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},43356:(e,t,r)=>{r.d(t,{R:()=>l});var n=r(30758);const l=e=>{const[t,r]=(0,n.useState)(null);(0,n.useEffect)((()=>{const t=e.current;if(!t)return()=>{};const n=({target:e})=>{e instanceof HTMLElement&&r(e)};return t.addEventListener("focusout",n),()=>{t.removeEventListener("focusout",n)}}),[e]),(0,n.useEffect)((()=>{const n=e.current;if(!t||!n)return;const l=n.contains(t),o=n.contains(document.activeElement);!l&&!o&&n.focus({preventScroll:!0}),r(null)}),[e,t])}},35662:(e,t,r)=>{r.d(t,{N:()=>l});var n=r(30758);function l(e){const t=(0,n.useRef)(null);return(0,n.useEffect)((()=>{e&&("function"==typeof e?e(t.current):e.current=t.current)})),t}}}]);
//# sourceMappingURL=2979.js.map