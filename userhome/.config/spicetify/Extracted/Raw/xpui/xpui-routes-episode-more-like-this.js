"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[399],{75040:(e,t,i)=>{i.d(t,{k:()=>u});var r=i(30758),a=i(31417),n=i(57239),s=i(89402),o=i(36025),l=i(7971),d=i(86070);const u=({id:e,children:t,targetURI:i,fadeOut:u=!1})=>{const c=(0,r.useCallback)((()=>{window.open((0,o.rw)(i).href)}),[i]),p={getTitle:()=>a.Ru.get("action-trigger.available-in-app-only"),getDescription:()=>a.Ru.get("action-trigger.listen-mixed-media-episode"),primaryButtonText:()=>a.Ru.get("action-trigger.button.get-app"),secondaryButtonText:()=>a.Ru.get("action-trigger.button.not-now"),isCTA:!0,intentPrimaryButton:"download-app",onLogInteraction:(0,s.W)(),shouldHideOnScroll:!0,fadeOut:u};return(0,d.jsx)(n.U,{className:l.A.container,id:e,onPrimaryButtonClick:c,options:p,children:t})}},7135:(e,t,i)=>{i.d(t,{W:()=>V});var r=i(97500),a=i.n(r),n=i(22726),s=i(31417),o=i(78464),l=i(57776),d=i(59147);const u=new l.l("internalLinkRecommenderEpisode","query","7961c70ee317dc56ff7deda89bcbe37e205d1070edc56bae713c86ce716e5bf9",null);var c=i(71056),p=i(30758),g=i(62411),m=i(99921),y=i(75040),h=i(65462),f=i(91676),_=i(33934),b=i(57239),w=i(23798),v=i(27012),x=i(67668),P=i(44825),k=i(99041),I=i(54003),S=i(18663),T=i(44672),C=i(51354),R=i(28340),j=i(86931),A=i(16157),E=i(15838),U=i(86070);const N=e=>`activation-trigger-mme-${e}`,D=p.memo((function({index:e=-1,audio:t,contentInformation:i,coverArt:r,contentRatingLabel:a,description:s,mediaTypes:o,releaseDate:l,name:d,playable:u,playedState:c,podcastSubscription:D,sharingInfo:M,showName:$,showTrailer:F,showTypes:L,showUri:O,status:W,totalMilliseconds:B,type:G,uri:V}){const q=c.playPositionMilliseconds,z=(0,p.useRef)(null),[H,Q]=(0,p.useState)(c.state===A._w.Completed),{draggable:Y,onDragStart:Z}=(0,v.P)(),X=(0,x.V)(),J=(0,C.y)(),K=(0,g.wA)(),{isActive:ee,isPlaying:te,togglePlay:ie}=(0,R.P)({uri:V},{featureIdentifier:"episode"}),[re]=(0,j.S)(1e4,(e=>e?.item?.uri===V));(0,p.useEffect)((()=>{te&&(z.current=re)}),[te,re]),(0,p.useEffect)((()=>{!te&&z.current&&B<=z.current&&Q(!0)}),[te,B]);const ae=(0,p.useCallback)((e=>{e||(z.current=0),Q(e)}),[]),ne={uri:O,name:$,trailer:F,showTypes:L},se=(0,P.C)({audio:t,name:d,uri:V,mediaTypes:o,coverArt:{sources:r}},ne),oe=(0,p.useCallback)((()=>{G!==A.I_.Episode?X?se():ie():b.h.set((()=>({triggerId:N(V),triggerAction:null})))}),[G,X,V,se,ie]),le=D?.isPaywalled??!1,de=D?.isUserSubscribed??!1,ue=le&&!de,ce=le&&X,{badges:pe}=(0,E.b)({contentRating:a,isPaywalled:le}),ge=(0,p.useCallback)((()=>K((0,m.Tf)(O))),[O,K]),me=(0,p.useCallback)((e=>{let t=e;return(ue||ce)&&(t=(0,U.jsx)(w.N,{enabled:!0,showUri:O,children:t})),!u&&pe.nineteen&&(t=(0,U.jsx)("div",{onClick:e=>{e.stopPropagation(),ge()},children:e})),t=(0,U.jsx)(y.k,{id:N(V),targetURI:(0,n.o_h)(V),children:t}),t}),[ue,ce,u,pe.nineteen,V,O,ge]);return(0,U.jsx)(T.pZ,{value:"row",index:e,children:(0,U.jsx)(h.h,{menu:(0,U.jsx)(f.b,{uri:V,showUri:O,sharingInfo:M,isPlayed:H,onMarkAsPlayed:ae}),children:(0,U.jsx)(_.k,{requestId:void 0,index:e,uri:V,size:J,images:r||[],name:d,showName:$,description:s,isPlayable:u||ue,fullyPlayed:H,durationMs:B,releaseDate:l,resumePositionMs:z.current??q,draggable:Y,handleDragStart:e=>{if(e.target!==e.currentTarget)return;Z(e,{itemUris:[V],dragLabelText:`${d} â€¢ ${$}`,contextUri:O})},handlePlaybackClick:oe,isCurrentlyPlaying:ee,isPaywalled:le,isUserSubscribed:de,isPlaying:te,position:te?re:void 0,episodeSharingInfo:M,onMarkAsPlayed:ae,contentInformation:i,showUri:O,mediaTypes:o??void 0,badges:(0,U.jsxs)(U.Fragment,{children:[pe.explicit&&(0,U.jsx)(k.U,{}),pe.paid&&(0,U.jsx)(I.y,{}),pe.nineteen&&(0,U.jsx)(S.q,{size:16})]}),playButtonWrapper:me,status:W})})})}));var M=i(7307);var $=i(73043),F=i(34647);const L="GgMHVmfXNzteIydSWMIA",O="GcupflQsYyy0IMOsCeD1",W="A4FqrLbXeENogU0IRaPn",B="YCYs0Gv5B5ctDN0f5Zby",G=({uri:e,isFullPage:t=!1})=>{const{data:i}=(r={uri:e},(0,d.I)(u,r,o));var r,o;const l=i?.seoRecommendedEpisode.totalCount,c=i?.seoRecommendedEpisode.items,p=function(e){return(e||[]).filter((e=>(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Episode"===e.__typename;var t})(e.data)))}(c),g=t?p:p.slice(0,5);if(0===l)return null;const m=(0,n.o_h)(e)?.id,y=`spotify:app:episode:${m}:more-like-this`;return(0,U.jsxs)("section",{className:a()(L,{[O]:!t}),"data-testid":"episode-list",children:[(0,U.jsx)($.k,{title:s.Ru.get("internal-link-recommender.more-episodes-like-this"),showSeeAll:!t,seeAllUri:y}),g.map((({data:e},t)=>{const i=(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Podcast"===e.__typename;var t})(e.podcastV2.data)?e.podcastV2.data:null;return i?e&&(0,U.jsxs)("div",{className:B,children:[(0,U.jsx)("hr",{className:W,"aria-hidden":!0}),(0,U.jsx)(D,{index:t,audio:e.audio,contentInformation:e.contentInformation,contentRatingLabel:e.contentRating?.label,coverArt:e.coverArt?e.coverArt.sources:void 0,description:e.description,releaseDate:e.releaseDate,mediaTypes:e.mediaTypes,name:e.name,playable:e.playability.playable,playedState:e.playedState,podcastSubscription:(0,F.Wx)(e.restrictions,e.playability),sharingInfo:e.sharingInfo,showTrailer:(r=i.trailerV2?.data,r&&(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Episode"===e.__typename;var t})(r)?{type:M.c.EPISODE,uri:r.uri,name:r.name,coverArt:r.coverArt?.sources||[],audio:r.audio,audioPreview:r.audioPreview,sharingInfo:r.sharingInfo,duration:{milliseconds:r.duration.totalMilliseconds},contentRating:r.contentRating,mediaTypes:r.mediaTypes}:null),showName:i.name,showTypes:i.showTypes,showUri:i.uri,totalMilliseconds:e.duration.totalMilliseconds,type:e.type,uri:e.uri},`${e.uri}/${t}`)]},`${t}${e.uri}`):null;var r}))]})},V=e=>{const t=(0,c.D)({entityType:M.c.EPISODE,componentType:"list",uri:e.uri});return(0,U.jsx)(o.s,{onError:t,children:(0,U.jsx)(G,{...e})})}},99092:(e,t,i)=>{i.d(t,{EpisodeMoreLikeThis:()=>d});var r=i(30758),a=i(85387),n=i(31417),s=i(15292),o=i(7135),l=i(86070);const d=r.memo((function(){const{episodeId:e=""}=(0,a.g)(),t=(e=>`spotify:episode:${e}`)(e);return(0,l.jsxs)("div",{className:"contentSpacing",children:[(0,l.jsx)(s.Q,{children:n.Ru.get("internal-link-recommender.more-episodes-like-this")}),(0,l.jsx)(o.W,{uri:t,isFullPage:!0})]})}))},44825:(e,t,i)=>{i.d(t,{C:()=>y});var r=i(30758),a=i(14343),n=i(89402),s=i(38501);const o=e=>e<=64?"small":e>640?"xlarge":e>300?"large":"standard";function l(e,t){return e.filter((e=>e.label?e.label===t:e.width?o(e.width)===t:!!e.height&&o(e.height)===t))[0]}var d=i(43798);var u=i(41031);function c(e){const t=l(e,"standard"),i=l(e,"large"),r=l(e,"small"),a=l(e,"xlarge");return{image_url:t?.url,image_height:t?.height?.toString(),image_width:t?.width?.toString(),image_url_large:i?.url,image_height_large:i?.height?.toString(),image_width_large:i?.width?.toString(),image_url_small:r?.url,image_height_small:r?.height?.toString(),image_width_small:r?.width?.toString(),image_url_xlarge:a?.url,image_height_xlarge:a?.height?.toString(),image_width_xlarge:a?.width?.toString()}}var p=i(87182),g=i(2679),m=i(7307);function y(e,t){const i=(0,n.W)(),o=(0,p.z)(),{isPlaying:l,isActive:y}=(0,g.te)(e?.uri||""),{isActive:h}=(0,g.l_)(t?.uri||""),f=(0,a.NC)(s.pZ0);return(0,r.useCallback)((r=>{if(!t||!e)return;const a=function(e,t,i=!1){const r=(e.coverArt?.sources||[]).sort(((e,t)=>(t.width||0)-(e.width||0))),a=(0,d.QH)(e,t),n=(0,d.gf)(t)||a,s=e.mediaTypes&&e.mediaTypes.includes(u.Cx.Video)?"video":"audio";return{uri:e.uri,title:e.name,subtitle:t.name,type:"episode",album_uri:t.uri,album_title:t.name,artist_uri:t.uri,artist_name:t.name,...c(r),media_type:i?s:"audio",isTrailer:a,anonymousPlaybackAllowed:n}}(e,t,f);h&&!l&&y&&!r?o.resume():h&&l&&!r?(i({type:"click",intent:"pause",targetUri:e.uri}),o.pause()):(i({type:"click",intent:"play",targetUri:e.uri}),o.play({uri:t.uri,pages:[{items:[{type:m.c.EPISODE,uri:e.uri,uid:null,metadata:a,provider:null}]}]},{referrerIdentifier:o.getReferrer(),featureIdentifier:"episode"},r))}),[t,e,f,h,l,y,o,i])}}}]);
//# sourceMappingURL=xpui-routes-episode-more-like-this.js.map