"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2391],{14036:(e,t,s)=>{s.d(t,{l:()=>u});var n=s(97500),i=s.n(n);const r="x-toggle-wrapper",a="x-toggle-indicator",l="JCFCfOY_6UEZZSOO2xrl",o="x-toggle-indicatorWrapper",c="x-toggle-input";var d=s(86070);const u=({value:e,disabled:t,onSelected:s,id:n,className:u,condensed:g=!1,inputRef:h})=>(0,d.jsxs)("label",{className:i()(r,u),children:[(0,d.jsx)("input",{id:n,className:c,type:"checkbox",disabled:t,checked:e,onChange:e=>{const t=e.target.checked;s(t)},ref:h}),(0,d.jsx)("span",{className:i()(o,{[l]:g}),children:(0,d.jsx)("span",{className:i()(a,{[l]:g})})})]})},60593:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Ds});var n=s(30758),i=s(14343),r=s(74159),a=s(96250),l=s(31417),o=s(95530),c=s(28506),d=s(39795),u=s(86070);function g({htmlString:e,children:t,htmlFor:s,semanticColor:i="textSubdued",variant:r="bodySmall",className:a,...l}){const{filter:g}=(0,n.useContext)(d.g);if(!t&&!e)return null;let h=t;return e&&(h=(0,u.jsx)("span",{dangerouslySetInnerHTML:{__html:e}})),(0,u.jsx)(o.E,{as:"label",variant:r,semanticColor:i,htmlFor:s,className:a,"data-testid":l["data-testid"],children:g.length>0?(0,u.jsx)(c.M,{searchWords:[g],textToHighlight:t||e||""}):h})}var h=s(22389);const x=(e,t)=>"string"==typeof e&&"string"==typeof t?!(e.length>0)||null!==(0,h.u)(e,t):"boolean"!=typeof e||e,p=(0,n.createContext)(void 0),m=({children:e})=>{const[t,s]=(0,n.useState)(!1),[i,r]=(0,n.useState)(new Set),a=(0,n.useCallback)(((e,t)=>{r((s=>{if(s.has(e)===t)return s;const n=new Set(s);return t?n.add(e):n.delete(e),n}))}),[]),l=i.size>0;return(0,u.jsx)(p.Provider,{value:{sectionMatch:t,setSectionMatch:s,sectionContainsMatch:l,setSectionFilterMatchQueryValue:a},children:e})},j=()=>{const e=(0,n.useContext)(p);if(void 0===e)throw new Error("useSectionMatchState() must be used within a SectionFilterMatchContextProvider");return e},f="x-settings-row",y=({children:e,filterMatchQuery:t})=>{const{filter:s}=(0,n.useContext)(d.g),{setSectionFilterMatchQueryValue:i,sectionMatch:r}=j(),a=x(s,t);return(0,n.useEffect)((()=>{i(t,a)}),[a,t,i]),r||a?(0,u.jsx)("div",{className:f,children:e}):null},v="x-settings-secondColumn",k=({children:e})=>(0,u.jsx)("div",{className:v,children:e});var R=s(97500),b=s.n(R);const w="x-settings-firstColumn",S=({className:e,children:t})=>(0,u.jsx)("div",{className:b()(w,e),children:t}),C={section:"x-settings-section",hidden:"afyQ2L5zTtlSDtn9WPjd"};function M({children:e,filterMatchQuery:t}){const{filter:s}=(0,n.useContext)(d.g),{setSectionMatch:i,sectionContainsMatch:r}=j(),a=x(s,t);(0,n.useEffect)((()=>{i(a)}),[a,i]);const l=!a&&!r;return(0,u.jsx)("div",{className:b()(C.section,{[C.hidden]:l}),children:e})}function F(e){return(0,u.jsx)(m,{children:(0,u.jsx)(M,{...e})})}function N({children:e,className:t,semanticColor:s="textBase"}){const{filter:i}=(0,n.useContext)(d.g);return(0,u.jsx)(o.E,{as:"h2",variant:"bodyMediumBold",semanticColor:s,className:t,children:(0,u.jsx)(c.M,{searchWords:[i],textToHighlight:e})})}var Q=s(27301),E=s(19329);const A="ycD5EZ3ZQ05CuUV5ZMGN",L=()=>{const{openURLWithSessionTransfer:e}=(0,E.L)();return(0,u.jsxs)(F,{filterMatchQuery:l.Ru.get("web-player.settings.account"),children:[(0,u.jsx)(N,{children:l.Ru.get("web-player.settings.account")}),(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("web-player.settings.edit-login-methods"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"web-player.settings.edit-login-methods-button",children:l.Ru.get("web-player.settings.edit-login-methods")})}),(0,u.jsx)(k,{children:(0,u.jsx)(r.n,{id:"web-player.settings.edit-login-methods-button",size:"small",className:A,onClick:()=>{e(Q.Oo)},iconTrailing:a.H,children:l.Ru.get("web-player.settings.edit-login-methods-button")})})]})]})};var z=s(62411),O=s(85387),T=s(14036),_=s(91128);const I="xpVsqMQfmc20cBLG04zw",D=({dsaModeEnabled:e,setDsaModeEnabled:t})=>{const s=(0,z.wA)(),i=(0,O.zy)(),r=new URLSearchParams(i.search).get("highlight"),a=(0,n.useRef)(null);return(0,n.useEffect)((()=>{r?.includes("dsa")&&a.current&&(a.current.focus(),document.documentElement.classList.remove("no-focus-outline"))}),[r]),(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("web-player.settings.personalized-recommendations"),children:[(0,u.jsxs)(S,{className:I,children:[(0,u.jsx)(g,{htmlFor:"settings.dsaMode",children:l.Ru.get("web-player.settings.personalized-recommendations")}),(0,u.jsx)(g,{htmlFor:"settings.dsaMode",variant:"marginal",children:l.Ru.get("web-player.settings.personalized-recommendations-body-text")})]}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"settings.dsaMode",value:!e,onSelected:e=>{e?t(!e):s(_.UU.actions.open({onConfirm:()=>t(!e)}))},inputRef:a})})]})};var K=s(16273),q=s(50486),V=s(55623),P=s(29195);const B=new(s(57776).l)("changeAttributes","mutation","ac50e9d82b3b8303c73512f297140e774a69eb0d6250769b5669e69b4be28886",null);var U=s(39566),W=s(15178),H=(s(94572),s(65292));const G=["personalizedRecommendations"],Z=()=>{const{getGraphQLLoader:e}=(0,P.mv)(),t=e(),s=(0,K.jE)(),i=((0,W.g)(),(0,z.wA)()),r=!(0,U.n)(),a="1"===(0,H.$)("dsa-mode-enabled"),l="1"===(0,H.$)("dsa-mode-available"),o=(0,n.useCallback)((async e=>{if(r)throw new Error("User has to be online");await async function(e,t){const s=await e(B,{input:{dsaModeEnabled:t,birthdate:null,filterAgeRestrictedContent:null,filterExplicitContent:null,lockFilterExplicitContent:null,optInTrialPremiumOnlyMarket:null}}),{errors:n,data:i}=s||{};if(!i?.changeUserAccountAttributes)throw n&&n.length>0?new Error(`GraphQL error: ${n[0].message}`):new Error("Unknown GraphQL error!");if("ChangeUserAccountAttributesResult"!==i.changeUserAccountAttributes.__typename||"ChangeUserAccountAttributesResult"===i.changeUserAccountAttributes.__typename&&!i.changeUserAccountAttributes.success)throw new Error("Couldn't successfully set new value")}(t,e)}),[r,t]),c=(0,n.useRef)(a);c.current=a;const{data:d}=(0,q.I)({queryKey:G,queryFn:()=>c.current});return[l??!1,d??!1,(0,V.n)({mutationFn:o,onMutate:async e=>{await s.cancelQueries({queryKey:G});const t=s.getQueryData(G);return s.setQueryData(G,e),{prevState:t,newState:e}},onError:(e,t,n)=>{s.setQueryData(G,n?.prevState),i(_.bL.actions.open())},onSuccess:()=>{0}}).mutate]},Y=({sectionAbove:e})=>{const[t,s,n]=Z();return t||e?(0,u.jsxs)(F,{filterMatchQuery:l.Ru.get("web-player.settings.content-preferences"),children:[(0,u.jsx)(N,{children:l.Ru.get("web-player.settings.content-preferences")}),e,t&&(0,u.jsx)(D,{dsaModeEnabled:s,setDsaModeEnabled:n})]}):null};let J=function(e){return e.LIBRARY_COMPACT_MODE="library-compact-mode",e.NOW_PLAYING_VIEW="now-playing-view",e.CANVAS_VIDEOS="canvas-videos",e}({});var $=s(65527);const X=e=>{const{spec:t,logger:s}=(0,$.h)();return(0,n.useCallback)((n=>{n?s.logInteraction(t.settingsRowFactory({identifier:e}).hitSettingEnable()):s.logInteraction(t.settingsRowFactory({identifier:e}).hitSettingDisable())}),[e,s,t])};var ee=s(15505);const te=()=>{const{libraryRowMode:e,setLibraryRowMode:t}=(0,ee.q)(),s=X(J.LIBRARY_COMPACT_MODE),i=(0,n.useCallback)((e=>{s(e),t(e?ee.A.COMPACT:ee.A.DEFAULT)}),[s,t]);return(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("settings.library.compactMode"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"settings.library.compact-mode",children:l.Ru.get("settings.library.compactMode")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"settings.library.compact-mode",value:e===ee.A.COMPACT,onSelected:i})})]})},se=({children:e})=>(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(F,{filterMatchQuery:l.Ru.get("settings.library"),children:[(0,u.jsx)(N,{children:l.Ru.get("settings.library")}),e]})}),ne="_czgnX6y44Or6X9pI6gc",ie=({children:e,outerRef:t})=>(0,u.jsx)(d.s,{uri:"spotify:internal:settings",children:(0,u.jsx)("div",{ref:t,className:ne,"data-testid":"settings-page",children:e})});var re=s(6772),ae=s(87621);const le="O2vRz41OsAH0O7xVA4La",oe="y4CT4_q630fWtqu7Zggt";function ce({containerRef:e}){return(0,u.jsxs)("div",{className:le,children:[(0,u.jsx)(o.E,{as:"h1",variant:"titleMedium",className:oe,semanticColor:"textBase",paddingBottom:re.CD,children:l.Ru.get("desktop.settings.settings")}),(0,u.jsx)("div",{children:(0,u.jsx)(ae.S,{placeholder:"",alwaysExpanded:!1,clearOnEscapeInElementRef:e,debounceFilterChangeTimeout:0})})]})}const de=({settings:{values:e},setValue:t})=>navigator&&/^win/i.test(navigator.platform)?(0,u.jsxs)(F,{filterMatchQuery:l.Ru.get("desktop.settings.compatibility"),children:[(0,u.jsx)(N,{children:l.Ru.get("desktop.settings.compatibility")}),(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.enableHardwareAcceleration"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"desktop.settings.enableHardwareAcceleration",children:l.Ru.get("desktop.settings.enableHardwareAcceleration")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"desktop.settings.enableHardwareAcceleration",value:!!e["ui.hardware_acceleration"],onSelected:e=>{t("ui.hardware_acceleration",e)}})})]})]}):null;var ue=s(27607),ge=s(40638);function he(e){return`${e>0?`+${e}`:e}dB`}var xe=s(27731),pe=s(31684);function me(){const e=(0,pe.G)(),[t,s]=(0,n.useState)(e.getPreset()),i=(0,n.useCallback)((t=>{e.setPreset(t)}),[e]);return(0,n.useEffect)((()=>e.subscribeToPresetChange((e=>{s(e)})))),[t,i]}const je={wrapper:"x-settings-equalizerPanelWrapper",preset:"x-settings-equalizerPanelPreset",filters:"x-settings-equalizerPanelFilters",filter:"x-settings-equalizerPanelFilter",input:"x-settings-equalizerPanelInput",label:"x-settings-equalizerPanelLabel",gainLabel:"x-settings-equalizerPanelGainLabel",gainLabelUp:"x-settings-equalizerPanelGainLabelUp",gainLabelDown:"x-settings-equalizerPanelGainLabelDown",canvas:"x-settings-equalizerPanelCanvas"};function fe({filter:e,onChange:t}){const s=(0,pe.G)(),i=(0,n.useRef)(null),[r]=me();(0,n.useEffect)((()=>{const t=r.filters.find((t=>t.key===e.key));i.current&&t&&(i.current.value=`${t.gain}`)}),[r,e.key]),(0,n.useEffect)((()=>{i.current&&i.current.setAttribute("aria-valuetext",l.Ru.get("equalizer.filterA11yValueText",e.gain))}),[]);const a=(0,ge.YQ)(((e,t)=>{s.setFilterGain(e,t)}),100,{maxWait:200});return(0,u.jsxs)("div",{className:je.filter,children:[(0,u.jsx)("input",{"aria-label":l.Ru.get("equalizer.filterLabel",e.frequency),ref:i,type:"range",min:-xe.Zs,max:xe.Zs,step:.1,defaultValue:e.gain,className:je.input,onChange:s=>{const n=parseFloat(s.target.value);s.target.setAttribute("aria-valuetext",l.Ru.get("equalizer.filterA11yValueText",n)),a(e.key,n),t(n)}}),(0,u.jsx)("label",{className:je.label,children:(o=e.frequency,o>=1e3?o/1e3+"KHz":`${o}Hz`)})]});var o}function ye(e,t){e.moveTo(t[0],t[1]);for(let s=2;s<t.length-1;s+=2)e.lineTo(t[s],t[s+1])}function ve(e){const t=.6,s=[],n=e.reduce(((e,t)=>(e.push(t.x),e.push(t.y),e)),[]);n.unshift(e[0].y),n.unshift(e[0].x),n.push(e[e.length-1].x),n.push(e[e.length-1].y);for(let e=2;e<n.length-4;e+=2)for(let i=0;i<=16;i++){const r=(n[e+2]-n[e-2])*t,a=(n[e+4]-n[e])*t,l=(n[e+3]-n[e-1])*t,o=(n[e+5]-n[e+1])*t,c=i/16,d=2*Math.pow(c,3)-3*Math.pow(c,2)+1,u=-2*Math.pow(c,3)+3*Math.pow(c,2),g=Math.pow(c,3)-2*Math.pow(c,2)+c,h=Math.pow(c,3)-Math.pow(c,2),x=d*n[e]+u*n[e+2]+g*r+h*a,p=d*n[e+1]+u*n[e+3]+g*l+h*o;s.push(x),s.push(p)}return s}var ke=s(85505);function Re(e,t){const s=e.getContext("2d");s&&(s.clearRect(0,0,e.clientWidth,e.clientHeight),function(e,t,s){const n=t.clientWidth,i=t.clientHeight,r=n/s.length/2;e.beginPath();const a=e.createLinearGradient(n/2,0,n/2,i);a.addColorStop(0,"rgba(11%, 73%, 33%, 100%)"),a.addColorStop(1,"rgba(11%, 73%, 33%, 0%)"),e.fillStyle=a,ye(e,ve(s)),e.lineTo(n-r,i),e.lineTo(r,i),e.fill()}(s,e,t),function(e,t){e.beginPath(),e.strokeStyle="rgb(11%, 73%, 33%)",e.lineWidth=4,ye(e,ve(t)),e.stroke()}(s,t),function(e,t){e.fillStyle=ke.ONy,t.forEach((t=>{e.beginPath(),e.arc(t.x,t.y,4,0,2*Math.PI),e.fill()}))}(s,t))}const be=60,we=300;function Se(e,t){const s=t.clientWidth/e.length;return e.map(((e,n)=>({x:n*s+s/2,y:t.clientHeight-(e+xe.Zs+3)/(2*xe.Zs+6)*t.clientHeight})))}const Ce=()=>{const[e,t]=(0,n.useState)(window.devicePixelRatio||1);return(0,n.useEffect)((()=>{const e=()=>{matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`).addEventListener("change",(()=>{t(window.devicePixelRatio),e()}),{once:!0})};e()}),[]),e};var Me=s(99644);function Fe(e){const t=(0,n.useRef)(null),s=Ce(),i=(0,n.useCallback)((()=>{if(!t.current)return;const e=s,n=t.current.getBoundingClientRect();t.current.width=n.width*e,t.current.height=n.height*e,t.current.getContext("2d")?.scale(e,e)}),[s]),r=(0,n.useCallback)((()=>{if(!t.current||!e.current)return;const s=Se(e.current,t.current);Re(t.current,s)}),[e]),a=(0,n.useCallback)((s=>{if(!t.current||!e.current)return;const n=Se(e.current,t.current),i=Se(s,t.current);!function(e,t,s){const n=be*(we/1e3);let i=0;const r=JSON.parse(JSON.stringify(t)),a=s.map(((e,s)=>e.y-t[s].y)),l=()=>{if(!(i>=n)){for(let e=0;e<r.length;e++){const l=t[e].y,d=a[e];r[e].y=(s=l,o=d,c=i,(c/=n/2)<1?o/2*Math.pow(c,3)+s:(c-=2,o/2*(Math.pow(c,3)+2)+s))}var s,o,c;Re(e,r),i++,window.requestAnimationFrame(l)}};window.requestAnimationFrame(l)}(t.current,n,i)}),[e]);return(0,n.useEffect)((()=>{i(),r()}),[i,r]),(0,Me.w)({refOrElement:t,onResize:()=>{i(),r()}}),{canvasRef:t,drawCanvas:r,animateCanvas:a}}function Ne(){const e=(0,pe.G)(),[t,s]=(0,n.useState)(!1),i=(0,n.useCallback)((t=>{e.setEnabledState(t)}),[e]);return(0,n.useEffect)((()=>e.subscribeToEnabledState(s)),[e]),[t,i]}function Qe(){const[e,t]=Ne(),[s,i]=me(),r=(0,n.useRef)(s.filters.map((e=>e.gain))),{canvasRef:a,drawCanvas:o,animateCanvas:c}=Fe(r);return(0,n.useEffect)((()=>{const e=s.filters.map((e=>e.gain));"custom"!==s.key&&c(e),r.current=e}),[s,c]),(0,u.jsxs)("div",{className:je.wrapper,children:[(0,u.jsx)("canvas",{"aria-label":l.Ru.get("equalizer.equalizer"),role:"img",className:je.canvas,ref:a}),(0,u.jsx)("label",{className:b()(je.gainLabel,je.gainLabelUp),children:he(xe.Zs)}),(0,u.jsx)("label",{className:b()(je.gainLabel,je.gainLabelDown),children:he(-xe.Zs)}),(0,u.jsx)("div",{className:je.filters,dir:"ltr",children:s.filters.map(((s,n)=>(0,u.jsx)(fe,{filter:s,onChange:s=>{r.current[n]=s,o(),e||t(!0),i((0,xe.zP)(r.current))}},s.key)))})]})}var Ee=s(48570);const Ae={container:"x-settings-equalizerPresetsContainer",label:"x-settings-equalizerPresetsLabel"};function Le(){const[e,t]=Ne(),[s,n]=me();return(0,u.jsxs)("div",{className:Ae.container,children:[(0,u.jsx)(o.E,{as:"label",variant:"bodySmall",semanticColor:"textSubdued",htmlFor:"desktop.equalizer.preset",className:Ae.label,children:l.Ru.get("equalizer.presets")}),(0,u.jsxs)(Ee.C,{id:"desktop.equalizer.preset",value:s.key,onSelect:s=>{n(s),e||t(!0)},children:["custom"===s.key&&(0,u.jsx)("option",{value:s.key,children:s.displayName}),Object.entries(xe.fG).map((([e,t])=>(0,u.jsx)("option",{value:e,children:t.displayName},e)))]})]})}function ze(){const[e,t]=Ne(),[,s]=me();return(0,u.jsx)(r.n,{onClick:()=>{s(xe.fG.flat.key),e||t(!0)},size:"small",children:l.Ru.get("equalizer.reset")})}function Oe(){const[e,t]=Ne();return(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("equalizer.equalizer"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"settings.equalizer",children:l.Ru.get("equalizer.equalizer")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"settings.equalizer",value:e,onSelected:t})})]})}var Te=s(43329);const _e="x-settings-equalizerSection",Ie="x-settings-equalizerWrapper",De="x-settings-equalizerResetButtonWrapper";function Ke(){const e=(0,pe.G)();return(0,i.NC)(Te.AM,{loadingValue:!1})&&e.isSupported()?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Oe,{}),(0,u.jsx)(y,{filterMatchQuery:l.Ru.get("equalizer.equalizer"),children:(0,u.jsxs)("div",{className:_e,children:[(0,u.jsx)(Le,{}),(0,u.jsx)("div",{className:Ie,children:(0,u.jsx)(Qe,{})}),(0,u.jsx)("div",{className:De,children:(0,u.jsx)(ze,{})})]})})]}):null}var qe=s(38501);const Ve="x-settings-crossFadeContainer",Pe=12e3,Be=({settings:{values:e},setValue:t})=>{const s=(0,i.NC)(qe.$GE),r=(0,i.NC)(qe.UrL),a=(0,i.NC)(qe.tsC),[c,d]=(0,n.useState)(-1),h=-1===c?Number(e["audio.crossfade.time_v2"]):c,x=`${Math.round(h/1e3)} ${l.Ru.get("desktop.settings.sec")}`;return(0,u.jsxs)(F,{filterMatchQuery:l.Ru.get("desktop.settings.playback"),children:[(0,u.jsx)(N,{children:l.Ru.get("desktop.settings.playback")}),void 0!==e["audio.crossfade_v2"]&&(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.crossfadeTracks"),children:[(0,u.jsxs)(S,{children:[(0,u.jsx)(g,{htmlFor:"desktop.settings.crossfadeTracks",children:l.Ru.get("desktop.settings.crossfadeTracks")}),e["audio.crossfade_v2"]&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:Ve,children:(0,u.jsx)(ue.z2,{value:h,max:Pe,step:1e3,labelText:l.Ru.get("desktop.settings.crossfadeTracks"),onStepBackward:()=>{d(Math.max(0,h-1e3))},onStepForward:()=>{d(Math.min(Pe,h+1e3))},onDragStart:e=>{d(e*Pe)},onDragMove:e=>{d(e*Pe)},onDragEnd:e=>{const s=Math.floor(e*Pe);d(s),t("audio.crossfade.time_v2",s)}})}),(0,u.jsx)(o.E,{variant:"bodySmall",semanticColor:"textSubdued",children:x})]})]}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"desktop.settings.crossfadeTracks",value:!!e["audio.crossfade_v2"],onSelected:e=>{t("audio.crossfade_v2",e)}})})]}),(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.automixInfo"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"desktop.settings.automixInfo",children:l.Ru.get("desktop.settings.automixInfo")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"desktop.settings.automixInfo",value:!!e["audio.automix"],onSelected:e=>{t("audio.automix",e)}})})]}),(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.monoDownmixer"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"desktop.settings.monoDownmixer",children:l.Ru.get("desktop.settings.monoDownmixer")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"desktop.settings.monoDownmixer",value:!!e["audio.downmixer_v2"],onSelected:e=>{t("audio.downmixer_v2",e)}})})]}),s&&(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.silenceTrimmer"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"desktop.settings.silenceTrimmer",children:l.Ru.get("desktop.settings.silenceTrimmer")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"desktop.settings.silenceTrimmer",value:!!e["audio.silence_trimmer_v2"],onSelected:e=>{t("audio.silence_trimmer_v2",e)}})})]}),r&&(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.dynamicNormalizer"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"desktop.settings.dynamicNormalizer",children:l.Ru.get("desktop.settings.dynamicNormalizer")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"desktop.settings.dynamicNormalizer",value:!!e["audio.dynamic_normalizer_v2"],onSelected:e=>{t("audio.dynamic_normalizer_v2",e)}})})]}),a&&(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.otfn"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"desktop.settings.otfn",children:l.Ru.get("desktop.settings.otfn")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"desktop.settings.otfn",value:!!e["audio.otfn_v2"],onSelected:e=>{t("audio.otfn_v2",e)}})})]}),(0,u.jsx)(Ke,{})]})};var Ue=s(91178),We=s(32963),He=s(13869);const Ge={get[Ue.WZ.MINIMIZED](){return l.Ru.get("desktop.settings.autostartMinimized")},get[Ue.WZ.NORMAL](){return l.Ru.get("desktop.settings.autostartNormal")},get[Ue.WZ.OFF](){return l.Ru.get("desktop.settings.autostartOff")}},Ze=(0,We.D)()===He.f.macOS,Ye=({settings:{values:e},setValue:t})=>(0,u.jsxs)(F,{filterMatchQuery:l.Ru.get("desktop.settings.startupAndWindowBehavior"),children:[(0,u.jsx)(N,{children:l.Ru.get("desktop.settings.startupAndWindowBehavior")}),void 0!==e["app.autostart-mode"]&&(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.autostart"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"desktop.settings.autostart",children:l.Ru.get("desktop.settings.autostart")})}),(0,u.jsx)(k,{children:(0,u.jsxs)(Ee.C,{id:"desktop.settings.autostart",value:e["app.autostart-mode"],onSelect:e=>{t("app.autostart-mode",e)},children:[(0,u.jsx)("option",{value:Ue.WZ.MINIMIZED,children:Ge[Ue.WZ.MINIMIZED]}),(0,u.jsx)("option",{value:Ue.WZ.NORMAL,children:Ge[Ue.WZ.NORMAL]}),(0,u.jsx)("option",{value:Ue.WZ.OFF,children:Ge[Ue.WZ.OFF]})]})})]}),!Ze&&(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.closeShouldMinimize"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"desktop.settings.closeShouldMinimize",children:l.Ru.get("desktop.settings.closeShouldMinimize")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"desktop.settings.closeShouldMinimize",value:!!e["ui.minimize_to_tray"],onSelected:e=>{t("ui.minimize_to_tray",e)}})})]})]}),Je={"auto-detect":{label:()=>l.Ru.get("desktop.settings.proxy.autodetect")},"no-proxy":{label:()=>l.Ru.get("desktop.settings.proxy.noproxy")},http:{label:()=>l.Ru.get("desktop.settings.proxy.http")},socks4:{label:()=>l.Ru.get("desktop.settings.proxy.socks4")},socks5:{label:()=>l.Ru.get("desktop.settings.proxy.socks5")}},$e=[{enumKey:"auto-detect",enumValue:0},{enumKey:"no-proxy",enumValue:1},{enumKey:"http",enumValue:2},{enumKey:"socks4",enumValue:3},{enumKey:"socks5",enumValue:4}];var Xe=s(81939);const et="mpdBa62OP4Fr5wvCsa89",tt="x-proxySettings-ProxySettings",st="x-proxySettings-fullWidth",nt="x-settings-input",it="x-proxySettings-horizontalPair",rt=({id:e,type:t,placeHolder:s,inputRef:n,handleOnChange:i})=>(0,u.jsx)("input",{type:t||"text",id:e,"data-testid":e,className:nt,placeholder:s,ref:n,onChange:i}),at=({children:e,label:t})=>(0,u.jsx)(Xe.g,{label:t,className:it,children:e}),lt="wjxwX0Alq8DVfoBObi3R";function ot({onClick:e}){return(0,u.jsx)(r.n,{className:lt,onClick:e,children:l.Ru.get("settings.restartApp")})}const ct=(e,t,s)=>{let n=`${e}:${t}`;switch(s){case 2:n+="@http";break;case 3:n+="@socks4";break;case 4:n+="@socks5"}return n},dt=({addr:e,mode:t="0",pass:s,user:i,setValue:r,restartContainer:a,fullWidth:o})=>{const c=(0,n.useRef)(null),d=(0,n.useRef)(null),g=(0,n.useRef)(null),h=(0,n.useRef)(null),x=Number(t),[p,m]=(0,n.useState)(""),[j,f]=(0,n.useState)(""),[y,v]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const[t,s]=e?.split(/[:@]+/)||["",""];m(t),f(s),c.current&&(c.current.value=t),d.current&&(d.current.value=s)}),[e]),(0,n.useEffect)((()=>{h.current&&s&&(h.current.value=s.toString())}),[s]),(0,n.useEffect)((()=>{g.current&&i&&(g.current.value=i.toString())}),[i]);const k=(0,n.useCallback)((({target:e})=>{const t=ct(e.value,j,x);m(e.value),r("network.proxy.addr",t),v(!0)}),[x,j,r]),R=(0,n.useCallback)((({target:e})=>{const t=ct(p,e.value,x);f(e.value),r("network.proxy.addr",t),v(!0)}),[x,p,r]),w=(0,n.useCallback)((({target:e})=>{r("network.proxy.user",e.value),v(!0)}),[r]),S=(0,n.useCallback)((({target:e})=>{r("network.proxy.pass",e.value),v(!0)}),[r]),C=0!==x&&1!==x,M=3!==x;return(0,u.jsxs)(F,{filterMatchQuery:l.Ru.get("desktop.settings.proxy.title"),children:[(0,u.jsx)(N,{children:l.Ru.get("desktop.settings.proxy.title")}),(0,u.jsxs)("div",{className:b()(tt,o?st:null),children:[(0,u.jsx)(at,{label:l.Ru.get("desktop.settings.proxy.type"),children:(0,u.jsx)(Ee.C,{id:"network.proxy.mode",value:t,onSelect:e=>{const t=parseInt(e,10);r("network.proxy.mode",t),v(!0)},children:$e.map((({enumKey:e,enumValue:t})=>(0,u.jsx)("option",{value:t,"data-testid":e,children:Je[e]?Je[e].label():""},e)))})}),C?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:et,children:[(0,u.jsx)(at,{label:l.Ru.get("desktop.settings.proxy.host"),children:(0,u.jsx)(rt,{id:"network.proxy.host",handleOnChange:k,placeHolder:l.Ru.get("desktop.settings.proxy.host"),inputRef:c})}),(0,u.jsx)(at,{label:l.Ru.get("desktop.settings.proxy.port"),children:(0,u.jsx)(rt,{id:"network.proxy.port",type:"number",handleOnChange:R,placeHolder:l.Ru.get("desktop.settings.proxy.port"),inputRef:d})})]}),(0,u.jsxs)("div",{className:M?et:void 0,children:[(0,u.jsx)(at,{label:l.Ru.get("desktop.settings.proxy.user"),children:(0,u.jsx)(rt,{id:"network.proxy.user",handleOnChange:w,placeHolder:l.Ru.get("desktop.settings.proxy.user"),inputRef:g})}),M?(0,u.jsx)(at,{label:l.Ru.get("desktop.settings.proxy.pass"),children:(0,u.jsx)(rt,{id:"network.proxy.pass",handleOnChange:S,placeHolder:l.Ru.get("desktop.settings.proxy.pass"),type:"password",inputRef:h})}):null]})]}):null,y&&(0,u.jsx)("div",{children:(0,u.jsx)(ot,{onClick:a})})]})]})};var ut=s(98293),gt=s(27236),ht=s(58493),xt=s(15420);function pt(){const e=(0,xt.B)(),[t,s]=(0,n.useState)(null),[i,r]=(0,n.useState)(!0),[a,l]=(0,n.useState)(null);return(0,n.useEffect)((()=>{const t=window.setInterval((()=>{!async function(){if(null===a){try{const t=await e.getStatistics();s(t)}catch(e){l(e instanceof Error?e:new Error("Error when fetching storage statistics."))}r(!1)}}()}),1500);return()=>clearInterval(t)}),[e,a]),[t,i,a]}const mt="x-settings-button",jt="x-settings-wordBreakAll",ft=({settings:e,setValue:t})=>{const s=(0,ht.A)(),i=(0,gt.t)(),a=!(0,U.n)(),[o,c]=(0,n.useState)(!1),d=(0,n.useCallback)((()=>{i.applyUpdate()}),[i]),[h,x,p]=pt(),m=(0,z.wA)();let j="",f="",v=0;x?(j=l.Ru.get("page.loading"),f=l.Ru.get("page.loading")):p||null===h?(j=l.Ru.get("error.generic"),f=l.Ru.get("error.generic")):(v=h.currentSizeMB-h.currentLockedSizeMB,j=` ${v} MB`,f=` ${h.currentLockedSizeMB} MB`);const R=e.values["storage.location"];return(0,u.jsxs)(F,{filterMatchQuery:l.Ru.get("desktop.settings.storage"),children:[(0,u.jsx)(N,{children:l.Ru.get("desktop.settings.storage")}),(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.storage.downloads.heading"),children:[(0,u.jsx)(S,{children:(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{children:[(0,u.jsx)(g,{htmlFor:"desktop.settings.downloads",semanticColor:"textBase",children:l.Ru.get("desktop.settings.storage.downloads.heading")}),(0,u.jsx)(g,{htmlFor:"desktop.settings.downloads",children:f})]}),(0,u.jsx)(g,{htmlFor:"desktop.settings.downloads",children:l.Ru.get("desktop.settings.storage.downloads.text")})]})}),(0,u.jsx)(k,{children:(0,u.jsx)(r.n,{id:"desktop.settings.downloads",size:"small",onClick:()=>{m((0,ut.KB)())},disabled:a||!h||0===h.currentLockedSizeMB,className:mt,children:l.Ru.get("desktop.settings.storage.downloads.button")})})]}),(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.storage.cache.heading"),children:[(0,u.jsx)(S,{children:(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{children:[(0,u.jsx)(g,{htmlFor:"desktop.settings.cache",semanticColor:"textBase",children:l.Ru.get("desktop.settings.storage.cache.heading")}),(0,u.jsx)(g,{htmlFor:"desktop.settings.cache",children:j})]}),(0,u.jsx)(g,{htmlFor:"desktop.settings.cache",children:l.Ru.get("desktop.settings.storage.cache.text")})]})}),(0,u.jsx)(k,{children:(0,u.jsx)(r.n,{id:"desktop.settings.cache",size:"small",onClick:()=>{m((0,ut.cd)())},disabled:0===v,className:mt,children:l.Ru.get("desktop.settings.storage.cache.button")})})]}),(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.offlineStorageLocation"),children:[(0,u.jsx)(S,{children:(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{children:(0,u.jsx)(g,{htmlFor:"desktop.settings.offline-storage",semanticColor:"textBase",children:l.Ru.get("desktop.settings.offlineStorageLocation")})}),(0,u.jsx)(g,{htmlFor:"desktop.settings.offline-storage",className:jt,children:R})]})}),(0,u.jsxs)(k,{children:[(0,u.jsx)(r.n,{id:"desktop.settings.offline-storage",size:"small",onClick:async()=>{const n=await s.browseForFolder();n.path&&(t("storage.location",n.path),n.path!==e.values["storage.location"]&&c(!0))},className:mt,children:l.Ru.get("desktop.settings.offlineStorageChangeLocation")}),o&&(0,u.jsx)(ot,{onClick:d})]})]})]})},yt=({settings:e,setValue:t})=>{const s=(0,gt.t)(),i=(0,n.useCallback)((()=>{s.applyUpdate()}),[s]),{values:r}=e;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Be,{settings:e,setValue:t}),(0,u.jsx)(Ye,{settings:e,setValue:t}),(0,u.jsx)(ft,{settings:e,setValue:t}),(0,u.jsx)(dt,{setValue:t,restartContainer:i,mode:r["network.proxy.mode"],addr:r["network.proxy.addr"],user:r["network.proxy.user"],pass:r["network.proxy.pass"]}),(0,u.jsx)(de,{settings:e,setValue:t})]})};var vt=s(97697),kt=s(82516);const Rt="H6jjgcz7zPs9Aaaa8YIG",bt=({settings:{values:e}})=>{const t="1"===e["dsa-mode-enabled"],s=(0,vt.t)(),[{data:n},{mutate:i}]=(0,kt.K)(s.autoPlay);return(0,u.jsxs)(F,{filterMatchQuery:l.Ru.get("desktop.settings.autoplay"),children:[(0,u.jsx)(N,{className:t?Rt:void 0,semanticColor:t?"textSubdued":void 0,children:l.Ru.get("desktop.settings.autoplay")}),(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.autoplayInfo"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"global.settings.autoplayInfo",className:t?Rt:void 0,children:t?l.Ru.get("web-player.settings.autoplay-dsa-enabled"):l.Ru.get("desktop.settings.autoplayInfo")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"global.settings.autoplayInfo",value:!!n,onSelected:e=>{i(e)},disabled:t})})]})]})};var wt=s(40339),St=s(53328),Ct=s(8428),Mt=s(48926),Ft=s(34990);const Nt=()=>{const[e,t]=(0,Mt.J)(),s=(0,Ft.j)(),i=X(J.CANVAS_VIDEOS),r=(0,n.useCallback)((e=>{i(e),t(e)}),[t,i]);return(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("settings.canvasVideos"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"settings.canvasVideos",children:l.Ru.get("settings.canvasVideos")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"settings.canvasVideos",value:e,onSelected:r,disabled:s})})]})};var Qt=s(4214);const Et=()=>{const[e,t]=(0,Qt.N)(),s=X(J.NOW_PLAYING_VIEW),i=(0,n.useCallback)((e=>{s(e),t(e)}),[t,s]);return(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("settings.npv"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"settings.npv",children:l.Ru.get("settings.npv")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"settings.npv",value:e,onSelected:i})})]})};var At=s(8284);const Lt=()=>{const e=(0,H.$)("catalogue"),t=void 0===e||"string"==typeof e&&"free"===e.toLowerCase(),s=(0,vt.t)(),[{data:n},{mutate:r}]=(0,kt.K)(s.display.newReleasesAnnoucements),[{data:a},{mutate:o}]=(0,kt.K)(s.display.nativeNotificationOnPlayerTransition),[{data:c},{mutate:d}]=(0,kt.K)(s.display.nativeOverlayOnMediaKeys),h=(0,At.d)(),x=(0,i.NC)(qe.yJ8),p=h?.client_capabilities?.can_show_system_media_controls,m=h?.client_capabilities?.can_show_track_notifications,{isActive:j,panelSend:f}=(0,wt.AI)(Ct.Z.BuddyFeed,Ct.Z.BuddyFeedOverlay);return(0,u.jsxs)(F,{filterMatchQuery:l.Ru.get("settings.display"),children:[(0,u.jsx)(N,{children:l.Ru.get("settings.display")}),(0,u.jsx)(Et,{}),x!==qe.NtL.CONTROL&&(0,u.jsx)(Nt,{}),!t&&(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("settings.showMusicAnnouncements"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"settings.showMusicAnnouncements",children:l.Ru.get("settings.showMusicAnnouncements")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"settings.showMusicAnnouncements",value:!!n,onSelected:r})})]}),m&&(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("settings.showTrackNotifications"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"settings.trackNotifications",children:l.Ru.get("settings.showTrackNotifications")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"settings.trackNotifications",value:!!a,onSelected:o})})]}),p&&(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.showSystemMediaControls"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"settings.systemMediaControlsEnabled",children:l.Ru.get("desktop.settings.showSystemMediaControls")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"settings.systemMediaControlsEnabled",value:!!c,onSelected:d})})]}),(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("buddy-feed.see-what-your-friends-are-playing"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"settings.showFriendActivity",children:l.Ru.get("buddy-feed.see-what-your-friends-are-playing")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"settings.showFriendActivity",value:j,onSelected:()=>{f(St.$S.BUDDY_FEED_BUTTON_CLICK)}})})]})]})};var zt=s(92876),Ot=s(36061),Tt=s(78412);const _t="m7e5wHq6US9u3BbLQXEX",It="ul4DB6lq_3qO_aCiEbcc",Dt=()=>{const e=(0,z.wA)(),{locale:t,user:s,overrides:i}=(0,z.d4)(Ot.Ht),r=(0,n.useRef)(null),a=(0,n.useRef)(null),l=(0,n.useCallback)((t=>{r.current&&r.current.value&&e((0,Tt.Rv)(t?r.current.value:""))}),[e]),c=(0,n.useCallback)((t=>{a.current&&a.current.value&&e((0,Tt.zf)(t?a.current.value:""))}),[e]),d=i?.country||s?.country,g=i?.locale||t;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(y,{filterMatchQuery:d??"",children:[(0,u.jsx)(S,{children:(0,u.jsx)("div",{className:_t,children:(0,u.jsx)(zt.c,{id:"overrides.country",onChange:e=>{const t=e.target.checked;l(t)},defaultChecked:!!i?.country,children:(0,u.jsx)(o.E,{variant:"bodySmall",semanticColor:"textSubdued",children:"Country"})})})}),(0,u.jsx)(k,{children:(0,u.jsx)("input",{type:"text",id:"overrides.country.input",className:It,disabled:!i?.country,ref:r,defaultValue:d,onChange:()=>l(!0)})})]}),(0,u.jsxs)(y,{filterMatchQuery:i?.locale??"",children:[(0,u.jsx)(S,{children:(0,u.jsx)("div",{className:_t,children:(0,u.jsx)(zt.c,{id:"overrides.locale",onChange:e=>{const t=e.target.checked;c(t)},defaultChecked:!!i?.locale,children:(0,u.jsx)(o.E,{variant:"bodySmall",semanticColor:"textSubdued",children:"Language"})})})}),(0,u.jsx)(k,{children:(0,u.jsx)("input",{type:"text",id:"overrides.locale.input",className:It,disabled:!i?.locale,ref:a,defaultValue:g,onChange:()=>c(!0)})})]})]})},Kt=()=>{const e=(0,vt.t)(),[{data:t}]=(0,kt.K)(e.employee.isEmployee),[{data:s},{mutate:i}]=(0,kt.K)(e.employee.developerMode),[{data:r},{mutate:a}]=(0,kt.K)(e.employee.showChromeToolbar),o=(0,gt.t)(),[c,d]=(0,n.useState)(!1),h=(0,n.useCallback)((()=>{o.applyUpdate()}),[o]);return t?(0,u.jsxs)(F,{filterMatchQuery:l.Ru.get("settings.employee"),children:[(0,u.jsx)(N,{children:l.Ru.get("settings.employee")}),(0,u.jsx)(y,{filterMatchQuery:l.Ru.get("desktop.settings.language-override"),children:(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"",children:l.Ru.get("desktop.settings.language-override")})})}),(0,u.jsx)(Dt,{}),(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.enableDeveloperMode"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"settings.developerMode",children:l.Ru.get("desktop.settings.enableDeveloperMode")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"settings.developerMode",value:!!s,onSelected:e=>{i(e),d(!0)}})})]}),(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.showChromeToolbar"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"settings.chromiumToolbar",children:l.Ru.get("desktop.settings.showChromeToolbar")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"settings.chromiumToolbar",value:!!r,onSelected:e=>{a(e),d(!0)}})})]}),c&&(0,u.jsx)("div",{children:(0,u.jsx)(ot,{onClick:h})})]}):null};var qt=s(96164),Vt=s(99041);const Pt="okmBgXxrf9ezztZvtLiY",Bt="uerTfstdPutfsW80gMpd",Ut="wRdi_8R3iT6u7fZcgrb9",Wt=()=>{const e=(0,vt.t)(),[{data:t},{mutate:s}]=(0,kt.K)(e.contentPreferences.allowExplicitContent),[{data:n}]=(0,kt.K)(e.contentPreferences.explicitContentForceDisallowed),i=n?l.Ru.get("desktop.settings.explicitContentFilterSettingLocked"):l.Ru.get("desktop.settings.explicitContentFilterSetting");return(0,u.jsxs)(y,{filterMatchQuery:i,children:[(0,u.jsxs)(S,{className:Pt,children:[(0,u.jsx)(g,{htmlFor:"desktop.settings.explicitContentFilter",children:i}),(0,u.jsx)(o.E,{variant:"marginal",children:l.Ru.get("desktop.settings.explicitContentFilterSettingDetails1",(0,u.jsx)(Vt.U,{}))}),(0,u.jsx)(o.E,{variant:"marginal",children:l.Ru.get("desktop.settings.explicitContentFilterSettingDetails2")}),(0,u.jsxs)(o.E,{variant:"marginal",semanticColor:"textBase",className:Bt,children:[(0,u.jsx)(qt.p,{size:"small"}),l.Ru.get("desktop.settings.updateDelayNotice")]})]}),(0,u.jsx)(k,{children:(0,u.jsx)("div",{className:Ut,children:(0,u.jsx)(T.l,{id:"desktop.settings.explicitContentFilter",disabled:n,value:!!t,onSelected:s})})})]})},Ht=()=>(0,u.jsxs)(F,{filterMatchQuery:l.Ru.get("desktop.settings.explicitContentFilter"),children:[(0,u.jsx)(N,{children:l.Ru.get("desktop.settings.explicitContentFilter")}),(0,u.jsx)(Wt,{})]});var Gt=s(94461);const Zt=()=>{const e=(0,gt.t)(),t=(0,vt.t)(),[{data:s},{mutate:i}]=(0,kt.K)(t.language),r=(0,n.useCallback)((()=>{e.applyUpdate()}),[e]);return void 0===s?null:(0,u.jsxs)(F,{filterMatchQuery:l.Ru.get("desktop.settings.language"),children:[(0,u.jsx)(N,{children:l.Ru.get("desktop.settings.language")}),(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.selectLanguage"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"desktop.settings.selectLanguage",children:l.Ru.get("desktop.settings.selectLanguage")})}),(0,u.jsx)(k,{children:(0,u.jsx)(Ee.C,{dir:"auto",value:s,id:"desktop.settings.selectLanguage",onSelect:i,children:Gt.J2.map((e=>(0,u.jsx)("option",{value:e,children:`${Gt.IB[e].displayName} (${Gt.IB[e].displayNameEn})`},e)))})})]}),l.Ru.getLocaleForTranslation()!==s?(0,u.jsx)(ot,{onClick:r}):null]})};var Yt=s(39587);const Jt=()=>{const[e,t]=(0,Yt.y)();return(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("settings.showLocalFiles"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"settings.showLocalFiles",children:l.Ru.get("settings.showLocalFiles")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"settings.showLocalFiles",value:e,onSelected:e=>{t(e)}})})]})};var $t=s(50324),Xt=s(39838);const es=e=>void 0!==e.id;function ts(e){let t;if(!es(e))return e.path;switch(e.id){case Xt.kW.DOWNLOADS:t=l.Ru.get("local-files.source.downloads");break;case Xt.kW.ITUNES:t=l.Ru.get("local-files.source.itunes");break;case Xt.kW.MY_MUSIC:t=l.Ru.get("local-files.source.my_music");break;case Xt.kW.WINDOWS_MUSIC_LIBRARY:t=l.Ru.get("local-files.source.windows_music_library");break;default:t=String(e.id)}return t}const ss=({source:e,onAddOrRemoveSource:t})=>{const[s,i]=(0,n.useState)(!es(e)||e.enabled),r=es(e)?String(e.id):e.path;return(0,u.jsxs)(y,{filterMatchQuery:ts(e),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:`settings.local-files.${r}`,children:ts(e)})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:`settings.local-files.${r}`,value:s,onSelected:s=>{i(s),t(e,s)}})})]})},ns=()=>{const[e,t]=(0,n.useState)(),s=(0,ht.A)(),i=(0,$t.i)(),a=(0,n.useCallback)((async()=>t(await s.getSources())),[s]);(0,n.useEffect)((()=>{a()}),[a]);const o=(0,n.useCallback)((async()=>{const{path:e}=await s.browseForFolder();e&&(await s.addFolder({path:e}),a(),i.say(l.Ru.get("settings.localFilesFolderAdded",e)))}),[i,s,a]),c=(0,n.useCallback)(((e,t)=>{e.enabled=t,s.mutateDefaultSource(e)}),[s]),d=(0,n.useCallback)(((e,t)=>{t?s.addFolder(e):s.removeFolder(e)}),[s]);return(0,u.jsxs)(F,{filterMatchQuery:l.Ru.get("settings.showSongsFrom"),children:[(0,u.jsx)(N,{children:l.Ru.get("settings.showSongsFrom")}),e?.defaultSources.map((e=>(0,u.jsx)(ss,{source:e,onAddOrRemoveSource:c},String(e.id)))),e?.folders.map((e=>(0,u.jsx)(ss,{source:e,onAddOrRemoveSource:d},e.path))),(0,u.jsx)("div",{children:(0,u.jsx)(r.n,{size:"small","aria-label":l.Ru.get("settings.addASource"),onClick:()=>{o()},children:l.Ru.get("settings.addASource")})})]})};var is=s(17282),rs=s(99701);const as="x-settings-tooltip",ls="x-settings-tooltipIconWrapper",os="x-settings-tooltipIcon",cs=({message:e,placement:t="top",messageClassName:s,iconClassName:n,iconSize:i="small"})=>(0,u.jsx)("div",{className:as,children:(0,u.jsx)(rs.Zp,{showDelay:0,label:e,placement:t,labelClassName:s,children:(0,u.jsx)("div",{className:b()(ls,n),"aria-label":e,"aria-describedby":rs.WO,tabIndex:0,children:(0,u.jsx)(is.N,{size:i,className:os})})})});function ds(){const e=(0,vt.t)(),[{data:t},{mutate:s}]=(0,kt.K)(e.quality.autoAdjustQuality);return void 0===t?null:(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.automatic-downgrade.title"),children:[(0,u.jsxs)(S,{children:[(0,u.jsx)(g,{htmlFor:"desktop.settings.automatic-downgrade",children:l.Ru.get("desktop.settings.automatic-downgrade.title")}),(0,u.jsx)(cs,{message:l.Ru.get("desktop.settings.automatic-downgrade.info")})]}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"desktop.settings.automatic-downgrade",value:t,onSelected:s})})]})}var us=s(37297),gs=s(32674);const hs={get[Ue.a1.AUTOMATIC](){return l.Ru.get("desktop.settings.streamingQualityAutomatic")},get[Ue.a1.LOW](){return l.Ru.get("desktop.settings.streamingQualityLow")},get[Ue.a1.MEDIUM](){return l.Ru.get("desktop.settings.streamingQualityNormal")},get[Ue.a1.HIGH](){return l.Ru.get("desktop.settings.streamingQualityHigh")},get[Ue.a1.VERY_HIGH](){return l.Ru.get("desktop.settings.streamingQualityVeryHigh")},get[Ue.a1.LOSSLESS](){return l.Ru.get("web-player.pigeon.audio-quality.lossless")}};function xs({maxQuality:e,formats:t}){const s=e===Ue.Qi.LOSSLESS,n=e>=Ue.Qi.VERY_HIGH;return(0,u.jsx)(u.Fragment,{children:t.filter((({quality:e})=>{switch(e){case Ue.a1.AUTOMATIC:return!s;case Ue.a1.LOW:case Ue.a1.MEDIUM:case Ue.a1.HIGH:return!0;case Ue.a1.VERY_HIGH:return n;case Ue.a1.LOSSLESS:return s;default:return!1}})).map((({quality:e})=>(0,u.jsx)("option",{value:e.toString(),children:hs[e]},e)))})}function ps(){const e=(0,vt.t)(),[{data:t},{mutate:s}]=(0,kt.K)(e.quality.downloadAudioQuality),[{data:n}]=(0,kt.K)(e.quality.maxSupportedQuality),i=(0,us.x)();return void 0===t||void 0===n||void 0===i?null:(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.downloadQuality.title"),children:[(0,u.jsxs)(S,{children:[(0,u.jsx)(g,{htmlFor:"desktop.settings.downloadQuality",children:l.Ru.get("desktop.settings.downloadQuality.title")}),(0,u.jsx)(cs,{message:l.Ru.get("desktop.settings.downloadQuality.info").replace(/(<([^>]+)>)/gi,"")})]}),(0,u.jsx)(k,{children:(0,u.jsx)(Ee.C,{id:"desktop.settings.downloadQuality",value:t.toString(),onSelect:e=>{const t=(0,gs.FB)(e);t&&s(t)},children:(0,u.jsx)(xs,{formats:i,maxQuality:n})})})]})}var ms=s(49885),js=s(89133),fs=s(23805),ys=s(11388);const vs=()=>{const e=(0,fs.N)(),{deviceFilterState:t}=(0,ms.j)(),[s,i]=(0,n.useState)((()=>e.isNormalizationOverriden())),r=s&&t.isOnboarded;return(0,ys.G)(js.n.NORMALIZATION_OVERRIDE_DISABLED,(()=>{i(!1)})),{isOverriden:r,disableOverride:()=>e.disableNormalizationOverride()}};var ks=s(26344),Rs=s(85907);let bs=function(e){return e[e["volume-increase"]=0]="volume-increase",e[e["normalization-turn-off"]=1]="normalization-turn-off",e[e["normalization-turn-on"]=2]="normalization-turn-on",e}({});const ws=({type:e,onClose:t,onConfirm:s})=>{const{disableOverride:n}=vs(),i="Normalisation";let r="";switch(e){case bs["volume-increase"]:r="Increasing the volume level while your headphones are optimized may cause occasional distortion.";break;case bs["normalization-turn-off"]:r="Turning off audio normalization while your headphones are optimized may cause audio distortion.";break;case bs["normalization-turn-on"]:r='We\'d recommend changing your volume level to "Quiet" after turning on audio normalization to avoid audio distortion (while your headphones are optimized).';break;default:(0,Rs.k)(e)}return(0,u.jsx)(ks.T,{onConfirm:()=>{n(),s(),t()},onClose:t,titleText:i,"aria-label":i,descriptionText:r,cancelText:"Cancel",confirmText:"Confirm"})},Ss={get[Ue.KR.QUIET](){return l.Ru.get("desktop.settings.loudnessQuiet")},get[Ue.KR.NORMAL](){return l.Ru.get("desktop.settings.loudnessNormal")},get[Ue.KR.LOUD](){return l.Ru.get("desktop.settings.loudnessLoud")}};function Cs(){const e=(0,vt.t)(),[{data:t},{mutate:s}]=(0,kt.K)(e.quality.normalizeVolume),[{data:i},{mutate:r}]=(0,kt.K)(e.quality.volumeLevel),{dialog:a,setNormalizeValue:o,setVolumeLevel:c}=((e,t)=>{const{isOverriden:s}=vs(),[i,r]=(0,n.useState)(null),a=(0,n.useRef)(null);return{setNormalizeValue:(0,n.useCallback)((t=>{s?(r(t?bs["normalization-turn-on"]:bs["normalization-turn-off"]),a.current=()=>{e(t)}):e(t)}),[s,e]),setVolumeLevel:(0,n.useCallback)((e=>{s&&e!==Ue.KR.QUIET?(r(bs["volume-increase"]),a.current=()=>{t(e)}):t(e)}),[s,t]),dialog:null!==i?(0,u.jsx)(ws,{type:i,onClose:()=>{r(null)},onConfirm:()=>{a.current?.()}}):null}})(s,r),{isOverriden:d}=vs();if(void 0===t)return null;const h=d?Ue.KR.QUIET:i;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.normalize"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"desktop.settings.normalize",children:l.Ru.get("desktop.settings.normalize")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"desktop.settings.normalize",value:!!t,onSelected:o})})]}),(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.loudnessEnvironment_with_limiter_details"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"desktop.settings.loudnessEnvironment",children:l.Ru.get("desktop.settings.loudnessEnvironment_with_limiter_details")})}),(0,u.jsx)(k,{children:(0,u.jsxs)(Ee.C,{id:"desktop.settings.loudnessEnvironment",disabled:!t,value:h,onSelect:e=>{const t=(0,gs.dt)(e);null!==t&&c(t)},children:[(0,u.jsx)("option",{value:Ue.KR.QUIET,children:Ss[Ue.KR.QUIET]}),(0,u.jsx)("option",{value:Ue.KR.NORMAL,children:Ss[Ue.KR.NORMAL]}),(0,u.jsx)("option",{value:Ue.KR.LOUD,children:Ss[Ue.KR.LOUD]})]})})]}),a]})}var Ms=s(78592),Fs=s(70381),Ns=s(53133);const Qs="teokJIHsNR2G8sc4ne4S";function Es(){const e=(0,vt.t)(),{enqueueSnackbar:t}=(0,Ns.d)(),s=(0,Fs.K)(Fs.X.VeryHighQualityAudio),[{data:i},{mutate:r}]=(0,kt.K)(e.quality.streamingQuality),[{data:a}]=(0,kt.K)(e.quality.maxSupportedQuality),o=(0,us.x)();return(0,n.useEffect)((()=>{s&&t(l.Ru.get("web-player.feature-activation-shelf.audio_quality_toast_message"))}),[s,t]),void 0===i||void 0===a||void 0===o?null:(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.streamingQuality"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"desktop.settings.streamingQuality",children:l.Ru.get("desktop.settings.streamingQuality")})}),(0,u.jsxs)(k,{children:[(0,u.jsx)(Ee.C,{id:"desktop.settings.streamingQuality",value:i.toString(),onSelect:e=>{const t=(0,gs.FB)(e);t&&r(t)},children:(0,u.jsx)(xs,{formats:o,maxQuality:a})}),s?(0,u.jsx)(Ms.Z,{className:Qs}):null]})]})}const As=()=>(0,u.jsxs)(F,{filterMatchQuery:l.Ru.get("desktop.settings.musicQuality"),children:[(0,u.jsx)(N,{children:l.Ru.get("desktop.settings.musicQuality")}),(0,u.jsx)(Es,{}),(0,u.jsx)(ps,{}),(0,u.jsx)(ds,{}),(0,u.jsx)(Cs,{})]});var Ls=s(1599),zs=s(46441),Os=s(98655);const Ts=()=>{const[e,t]=(()=>{const e=(0,K.jE)(),{user:t}=(0,z.d4)(Ot.Ht),s=t?.uri??"",{enqueueSnackbar:i}=(0,Ns.d)(),{data:r,queryKey:a}=(0,Os.Z)(zs.kp,[{uri:s}]),o=(0,n.useCallback)((async({showFollows:e})=>{await(0,zs.gN)(Ls.n.getInstance(),{uri:s,showFollows:e})}),[s]),c=(0,V.n)({mutationFn:o,onMutate:async t=>{await e.cancelQueries({queryKey:a});const s=e.getQueryData(a);return e.setQueryData(a,t),{prevState:s,newState:t}},onError:(t,s,n)=>{e.setQueryData(a,n?.prevState),i(l.Ru.get("error.generic"))},onSettled:()=>{e.invalidateQueries({queryKey:a})}});return[r?.showFollows??!0,c.mutate]})();return(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.showFollows"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"desktop.settings.showFollows",children:l.Ru.get("desktop.settings.showFollows")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"desktop.settings.showFollows",value:e,onSelected:e=>t({showFollows:e})})})]})},_s=()=>{const e=(0,vt.t)(),[{data:t},{mutate:s}]=(0,kt.K)(e.social.autoPublishPlaylist),[{data:n},{mutate:i}]=(0,kt.K)(e.social.shareListeningActivity),[{data:r},{mutate:a}]=(0,kt.K)(e.social.privateSession),[{data:o},{mutate:c}]=(0,kt.K)(e.social.showMyTopArtists);return void 0!==t&&void 0!==r?(0,u.jsxs)(F,{filterMatchQuery:l.Ru.get("desktop.settings.social"),children:[(0,u.jsx)(N,{children:l.Ru.get("desktop.settings.social")}),(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.newPlaylistsPublic"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"desktop.settings.newPlaylistsPublic",children:l.Ru.get("desktop.settings.newPlaylistsPublic")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"desktop.settings.newPlaylistsPublic",value:t,onSelected:s})})]}),(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.privateSession"),children:[(0,u.jsxs)(S,{children:[(0,u.jsx)(g,{htmlFor:"desktop.settings.privateSession",children:l.Ru.get("desktop.settings.privateSession")}),(0,u.jsx)(cs,{message:l.Ru.get("desktop.settings.privateSession.tooltip")})]}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"desktop.settings.privateSession",value:r,onSelected:a})})]}),(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.publishActivity"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"desktop.settings.publishActivity",children:l.Ru.get("desktop.settings.publishActivity")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"desktop.settings.publishActivity",disabled:r,value:!r&&!!n,onSelected:i})})]}),(0,u.jsxs)(y,{filterMatchQuery:l.Ru.get("desktop.settings.publishTopArtists"),children:[(0,u.jsx)(S,{children:(0,u.jsx)(g,{htmlFor:"desktop.settings.publishTopArtists",children:l.Ru.get("desktop.settings.publishTopArtists")})}),(0,u.jsx)(k,{children:(0,u.jsx)(T.l,{id:"desktop.settings.publishTopArtists",disabled:r,value:!r&&!!o,onSelected:c})})]}),(0,u.jsx)(Ts,{})]}):null};var Is=s(86723);const Ds=()=>{const{settings:e,setValue:t}=(0,Is.t0)(),s=(0,n.useRef)(null),[r]=(0,Yt.y)(),a=(0,i.NC)(qe.YSK);return(0,u.jsxs)(ie,{outerRef:s,children:[(0,u.jsx)(ce,{containerRef:s}),(0,u.jsx)(L,{}),(0,u.jsx)(Zt,{}),a?(0,u.jsx)(Y,{sectionAbove:(0,u.jsx)(Wt,{})}):(0,u.jsx)(Ht,{}),(0,u.jsx)(bt,{settings:e,setValue:t}),(0,u.jsx)(As,{}),(0,u.jsxs)(se,{children:[(0,u.jsx)(te,{}),(0,u.jsx)(Jt,{})]}),r?(0,u.jsx)(ns,{}):null,(0,u.jsx)(Lt,{}),(0,u.jsx)(_s,{}),(0,u.jsx)(yt,{settings:e,setValue:t}),(0,u.jsx)(Kt,{})]})}},70381:(e,t,s)=>{s.d(t,{X:()=>r.X,K:()=>i});var n=s(85387);function i(e){const{search:t}=(0,n.zy)();return new URLSearchParams(t).get("feature-activation")===e}var r=s(41547)},41547:(e,t,s)=>{s.d(t,{X:()=>n});let n=function(e){return e.SmartShuffle="smart-shuffle",e.GroupSessions="group-sessions",e.Blend="blend",e.CollaborativePlaylists="collaborative-playlists",e.Dj="dj",e.VeryHighQualityAudio="very-high-quality-audio",e.LiveEvents="live-events",e}({})},49885:(e,t,s)=>{s.d(t,{j:()=>g});var n=s(30758),i=s(16273),r=s(50486),a=s(92443),l=s(43013),o=s(23805),c=s(89133),d=s(11388);const u={headphoneDevice:null,audioDevice:null,predictedState:null,isOnboarded:!1,currentState:{externalizationEnabled:!1,specificEnabled:!1},contentRestrictions:{specificRestricted:!1,externalizationRestricted:!1,processingCapabilitiesRestricted:!1},toggleTuneHeadphones:null,toggleTuneStudio:null,setFilterState:()=>Promise.resolve()},g=()=>{const e=(0,o.N)(),t=(0,i.jE)(),s=(0,l.l)(),g=(0,n.useMemo)((()=>["puffin-current-device"]),[]),{data:h,isLoading:x,isError:p}=(0,r.I)({queryKey:g,queryFn:async()=>await e.getFilterState(),gcTime:5e3,staleTime:5e3});var m;return m=()=>{t.invalidateQueries({queryKey:g})},(0,d.G)(c.n.UPDATE,m),{deviceFilterState:!s&&h||u,isMaybeHeadphoneDevice:(0,a.lS)(h?.audioDevice),isLoading:x,isError:p}}},37297:(e,t,s)=>{s.d(t,{x:()=>r});var n=s(50486),i=s(97697);function r(){const e=(0,i.t)();return(0,n.I)({queryKey:["settings-formats"],queryFn:()=>e.quality.getFormats(),gcTime:36e5,staleTime:6e5}).data}},8284:(e,t,s)=>{s.d(t,{d:()=>r});var n=s(30758),i=s(29064);const r=()=>(0,n.useContext)(i.D)},11388:(e,t,s)=>{s.d(t,{G:()=>r});var n=s(30758),i=s(23805);function r(e,t){const s=(0,n.useRef)(t),r=(0,i.N)();s.current=t,(0,n.useEffect)((()=>{const t=r.getFiltersEvents();return t?.addListener(e,(e=>{s.current(e)}))}),[e,r])}}}]);
//# sourceMappingURL=xpui-routes-desktop-settings.js.map