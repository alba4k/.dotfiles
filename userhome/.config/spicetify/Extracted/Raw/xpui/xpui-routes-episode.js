"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[9528],{27038:(e,t,i)=>{i.d(t,{o:()=>N});var a=i(30758),s=i(95530),n=i(23046),r=i(99623),o=i(42814),l=i(31417),c=i(97848),d=i(23041),u=i(79871),p=i(82300),m=i(86677),h=i(32411),g=i(21082);const y="c5Ml9BbBuUEHjNkcSwZA";var x=i(86070);const b="70px",v=({adId:e,advertiser:t,tagline:i,displayImage:a,buttonMessage:s,cardOnClick:n,buttonOnClick:r,clickthroughUrl:o})=>(0,x.jsx)(g.N,{to:(0,h.H)(o),className:y,"data-testid":"leavebehind",children:(0,x.jsx)(c.v,{onClick:n,onClickHint:l.Ru.get("ad-formats.learnMore"),layout:"wide",variant:"tinted",id:e,size:"xl",title:(0,x.jsx)(d.d,{weight:"bold",variant:"ballad",lineClamp:1,"data-testid":"leavebehind-advertiser",children:t}),subtitle:(0,x.jsx)(u.j,{as:"div",lineClamp:2,"data-testid":"leavebehind-tagline",children:i}),media:(0,x.jsx)(p.C,{"data-testid":"leavebehind-image",src:a.src,alt:a.alt,imageHeight:b,imageWidth:b,size:"xl"}),trailing:(0,x.jsx)(m.$,{onClick:()=>{r&&r()},"data-testid":"leavebehind-button",colorSet:"invertedLight",size:"small","aria-label":l.Ru.get("ad-formats.learnMore"),children:s})})});var k=i(68750),f=i(555),C=i(78747),j=i(29195);const T="zlUJfROzFEOsEDWL7ucP",P="Fxvq1Fw7XQdGRDvYokRg",N=({leavebehinds:e,seeAllButton:t,surface:i,uri:c})=>{const d=(0,j.vh)(),u=(0,C.w)(C.P),[p,m]=(0,a.useState)(void 0);(0,a.useEffect)((()=>{e&&e.length>0&&p!==e[0].requestId&&c&&(e.forEach(((e,t)=>{e.uri===c&&(e.trackingEvents?.viewed.forEach((async t=>{try{await u(t)}catch(a){const s=a;d.send((0,r.G)({error_type:"trackingURLFailure",error_message:s.message,http_error_code:422,surface:(0,k.Fh)(i),request_url:t,request_type:"leavebehindAds",lineitem_id:e.lineitemId,ad_content_origin:(0,f.Zl)(i)}))}})),d.send((0,o.x)({leavebehind_lineitem_id:e.lineitemId,leavebehind_request_id:e.requestId,event:"event_viewed",event_reason:`viewed_on_${(0,k.Fh)(i).toLowerCase()}`,surface:(0,k.Fh)(i),surface_position:t+1,uri:c})))})),m(e[0].requestId))}),[d,u,e,c,i,p]);const h=({eventReason:e,lineitemId:t,requestId:a,trackingEvents:s,surfacePosition:n})=>{((e,t)=>{t?.forEach((async t=>{try{await u(t)}catch(a){const s=a;d.send((0,r.G)({error_type:"trackingURLFailure",error_message:s.name,http_error_code:422,surface:(0,k.Fh)(i),request_url:t,request_type:"leavebehindAds",lineitem_id:e,ad_content_origin:(0,f.Zl)(i)}))}}))})(t,s),d.send((0,o.x)({leavebehind_lineitem_id:t,leavebehind_request_id:a,event:"event_clicked",event_reason:e,surface:(0,k.Fh)(i),surface_position:n,uri:c}))};return(0,x.jsxs)("section",{"data-testid":"leavebehinds-wrapper",children:[(0,x.jsxs)("div",{className:P,children:[(0,x.jsx)(s.E,{as:"h2",semanticColor:"textBase",variant:"titleSmall",paddingBottom:(0,n.po)("tighter"),"data-testid":"leavebehinds-title",children:l.Ru.get("podcast-ads.recent_ads")}),t]}),(0,x.jsx)("div",{className:T,"data-testid":"leavebehinds-list-wrapper",children:e.map(((e,t)=>(0,x.jsx)(v,{...e,buttonOnClick:()=>{h({eventReason:"button_clicked",lineitemId:e.lineitemId,trackingEvents:e.trackingEvents?.clicked,requestId:e.requestId,surfacePosition:t+1})},cardOnClick:()=>{h({eventReason:"card_clicked",lineitemId:e.lineitemId,trackingEvents:e.trackingEvents?.clicked,requestId:e.requestId,surfacePosition:t+1})}},e.adId)))})]})}},75916:(e,t,i)=>{i.d(t,{J:()=>u});var a=i(60749),s=i(65503),n=i(42814),r=i(31417),o=i(68750),l=i(555),c=i(29195),d=i(86070);const u=({leavebehinds:e,surface:t,uri:i,pathname:u,state:p})=>{const m=(0,c.vh)(),h=`${r.Ru.get("view.see-all")} (${e.length<=l.E9?r.Ru.formatNumber(e.length):r.Ru.formatNumber(l.E9)})`;return(0,d.jsx)(a.N_,{to:u,state:p,children:(0,d.jsx)(s.H,{"data-testid":"leavebehinds-see-all",size:"small",onClick:()=>{m.send((0,n.x)({leavebehind_request_id:e[0].requestId,event:"event_clicked",event_reason:"cta_see_all",surface:(0,o.Fh)(t),uri:i}))},children:h})})}},7135:(e,t,i)=>{i.d(t,{W:()=>$});var a=i(97500),s=i.n(a),n=i(22726),r=i(31417),o=i(78464),l=i(57776),c=i(59147);const d=new l.l("internalLinkRecommenderEpisode","query","7961c70ee317dc56ff7deda89bcbe37e205d1070edc56bae713c86ce716e5bf9",null);var u=i(71056),p=i(30758),m=i(62411),h=i(99921),g=i(75040),y=i(65462),x=i(91676),b=i(33934),v=i(57239),k=i(23798),f=i(27012),C=i(67668),j=i(44825),T=i(99041),P=i(54003),N=i(18663),I=i(44672),S=i(51354),E=i(28340),A=i(86931),R=i(16157),_=i(15838),w=i(86070);const U=e=>`activation-trigger-mme-${e}`,L=p.memo((function({index:e=-1,audio:t,contentInformation:i,coverArt:a,contentRatingLabel:s,description:r,mediaTypes:o,releaseDate:l,name:c,playable:d,playedState:u,podcastSubscription:L,sharingInfo:M,showName:O,showTrailer:D,showTypes:F,showUri:B,status:q,totalMilliseconds:K,type:W,uri:$}){const z=u.playPositionMilliseconds,G=(0,p.useRef)(null),[H,J]=(0,p.useState)(u.state===R._w.Completed),{draggable:Z,onDragStart:Q}=(0,f.P)(),X=(0,C.V)(),V=(0,S.y)(),Y=(0,m.wA)(),{isActive:ee,isPlaying:te,togglePlay:ie}=(0,E.P)({uri:$},{featureIdentifier:"episode"}),[ae]=(0,A.S)(1e4,(e=>e?.item?.uri===$));(0,p.useEffect)((()=>{te&&(G.current=ae)}),[te,ae]),(0,p.useEffect)((()=>{!te&&G.current&&K<=G.current&&J(!0)}),[te,K]);const se=(0,p.useCallback)((e=>{e||(G.current=0),J(e)}),[]),ne={uri:B,name:O,trailer:D,showTypes:F},re=(0,j.C)({audio:t,name:c,uri:$,mediaTypes:o,coverArt:{sources:a}},ne),oe=(0,p.useCallback)((()=>{W!==R.I_.Episode?X?re():ie():v.h.set((()=>({triggerId:U($),triggerAction:null})))}),[W,X,$,re,ie]),le=L?.isPaywalled??!1,ce=L?.isUserSubscribed??!1,de=le&&!ce,ue=le&&X,{badges:pe}=(0,_.b)({contentRating:s,isPaywalled:le}),me=(0,p.useCallback)((()=>Y((0,h.Tf)(B))),[B,Y]),he=(0,p.useCallback)((e=>{let t=e;return(de||ue)&&(t=(0,w.jsx)(k.N,{enabled:!0,showUri:B,children:t})),!d&&pe.nineteen&&(t=(0,w.jsx)("div",{onClick:e=>{e.stopPropagation(),me()},children:e})),t=(0,w.jsx)(g.k,{id:U($),targetURI:(0,n.o_h)($),children:t}),t}),[de,ue,d,pe.nineteen,$,B,me]);return(0,w.jsx)(I.pZ,{value:"row",index:e,children:(0,w.jsx)(y.h,{menu:(0,w.jsx)(x.b,{uri:$,showUri:B,sharingInfo:M,isPlayed:H,onMarkAsPlayed:se}),children:(0,w.jsx)(b.k,{requestId:void 0,index:e,uri:$,size:V,images:a||[],name:c,showName:O,description:r,isPlayable:d||de,fullyPlayed:H,durationMs:K,releaseDate:l,resumePositionMs:G.current??z,draggable:Z,handleDragStart:e=>{if(e.target!==e.currentTarget)return;Q(e,{itemUris:[$],dragLabelText:`${c} â€¢ ${O}`,contextUri:B})},handlePlaybackClick:oe,isCurrentlyPlaying:ee,isPaywalled:le,isUserSubscribed:ce,isPlaying:te,position:te?ae:void 0,episodeSharingInfo:M,onMarkAsPlayed:se,contentInformation:i,showUri:B,mediaTypes:o??void 0,badges:(0,w.jsxs)(w.Fragment,{children:[pe.explicit&&(0,w.jsx)(T.U,{}),pe.paid&&(0,w.jsx)(P.y,{}),pe.nineteen&&(0,w.jsx)(N.q,{size:16})]}),playButtonWrapper:he,status:q})})})}));var M=i(7307);var O=i(73043),D=i(34647);const F="GgMHVmfXNzteIydSWMIA",B="GcupflQsYyy0IMOsCeD1",q="A4FqrLbXeENogU0IRaPn",K="YCYs0Gv5B5ctDN0f5Zby",W=({uri:e,isFullPage:t=!1})=>{const{data:i}=(a={uri:e},(0,c.I)(d,a,o));var a,o;const l=i?.seoRecommendedEpisode.totalCount,u=i?.seoRecommendedEpisode.items,p=function(e){return(e||[]).filter((e=>(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Episode"===e.__typename;var t})(e.data)))}(u),m=t?p:p.slice(0,5);if(0===l)return null;const h=(0,n.o_h)(e)?.id,g=`spotify:app:episode:${h}:more-like-this`;return(0,w.jsxs)("section",{className:s()(F,{[B]:!t}),"data-testid":"episode-list",children:[(0,w.jsx)(O.k,{title:r.Ru.get("internal-link-recommender.more-episodes-like-this"),showSeeAll:!t,seeAllUri:g}),m.map((({data:e},t)=>{const i=(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Podcast"===e.__typename;var t})(e.podcastV2.data)?e.podcastV2.data:null;return i?e&&(0,w.jsxs)("div",{className:K,children:[(0,w.jsx)("hr",{className:q,"aria-hidden":!0}),(0,w.jsx)(L,{index:t,audio:e.audio,contentInformation:e.contentInformation,contentRatingLabel:e.contentRating?.label,coverArt:e.coverArt?e.coverArt.sources:void 0,description:e.description,releaseDate:e.releaseDate,mediaTypes:e.mediaTypes,name:e.name,playable:e.playability.playable,playedState:e.playedState,podcastSubscription:(0,D.Wx)(e.restrictions,e.playability),sharingInfo:e.sharingInfo,showTrailer:(a=i.trailerV2?.data,a&&(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Episode"===e.__typename;var t})(a)?{type:M.c.EPISODE,uri:a.uri,name:a.name,coverArt:a.coverArt?.sources||[],audio:a.audio,audioPreview:a.audioPreview,sharingInfo:a.sharingInfo,duration:{milliseconds:a.duration.totalMilliseconds},contentRating:a.contentRating,mediaTypes:a.mediaTypes}:null),showName:i.name,showTypes:i.showTypes,showUri:i.uri,totalMilliseconds:e.duration.totalMilliseconds,type:e.type,uri:e.uri},`${e.uri}/${t}`)]},`${t}${e.uri}`):null;var a}))]})},$=e=>{const t=(0,u.D)({entityType:M.c.EPISODE,componentType:"list",uri:e.uri});return(0,w.jsx)(o.s,{onError:t,children:(0,w.jsx)(W,{...e})})}},32183:(e,t,i)=>{i.d(t,{g:()=>x});var a=i(30758),s=i(97500),n=i.n(s),r=i(95530),o=i(22726),l=i(65462),c=i(78516),d=i(29454),u=i(99701),p=i(21082),m=i(27012),h=i(33329),g=i(14178),y=i(86070);const x=({children:e,uri:t,name:i,nonInteractive:s=!1,creatorUri:x,spec:b})=>{let v=null;const{draggable:k,onDragStart:f}=(0,m.P)({itemUris:[t],dragLabelText:i}),C=(0,h.s)(),j=(0,a.useCallback)((()=>{b&&C.logInteraction(b.albumLinkFactory({uri:t}).hitUiNavigate({destination:t}))}),[C,b,t]);return s?(0,y.jsx)("span",{className:n()("standalone-ellipsis-one-line",g.A.text),children:e}):((0,o._Tv)(t)&&(v=(0,y.jsx)(c.h,{uri:t,artistUri:x})),(0,o.WB1)(t)&&(v=(0,y.jsx)(d.H,{uri:t})),(0,y.jsx)(l.h,{menu:v,children:(0,y.jsx)(r.E,{variant:"bodySmall",children:(0,y.jsx)(u.Zp,{label:i,showDelay:u.uF,children:(0,y.jsx)(p.N,{draggable:k,onDragStart:f,className:n()("standalone-ellipsis-one-line"),to:t,dir:"auto",onClick:j,children:e})})})}))}},13565:(e,t,i)=>{i.d(t,{P:()=>a.P});var a=i(99730)},96322:(e,t,i)=>{i.d(t,{o:()=>n});var a=i(6383),s=i(30157);function n(){return(0,s.N)(a.g)}},951:(e,t,i)=>{i.r(t),i.d(t,{default:()=>yi});var a=i(30758),s=i(60749),n=i(85387),r=i(8097),o=i(69707),l=i(22726),c=i(31417),d=i(15292),u=i(57239),p=i(7135),m=i(92202),h=i(91182),g=i(62411),y=i(12662),x=i(99921),b=i(88260),v=i(60038),k=i(2668),f=i(38157),C=i(58110),j=i(75830),T=i(91676),P=i(68204),N=i(31650),I=i(86568),S=i(75040),E=i(23798),A=i(34733),R=i(67668),_=i(55926),w=i(86070);const U="activation-trigger-mme",L=({episodeUri:e,showUri:t,isLocked:i,isPlaying:a,isPlayDisabled:s,playButtonPlayLabel:n,playButtonPauseLabel:r,onClick:o,size:c="large"})=>{const d=(0,_.c)();if((0,R.V)())return(0,w.jsx)(A.R,{size:c,onClick:o,isPlaying:a,disabled:s,locked:i,ariaPlayLabel:n,ariaPauseLabel:r});const u=(0,w.jsx)(E.N,{showUri:t,enabled:i,renderInline:!1,children:(0,w.jsx)(A.R,{size:c,onClick:o,isPlaying:a,disabled:s,locked:i,ariaPlayLabel:n,ariaPauseLabel:r})});return d?(0,w.jsx)(S.k,{id:U,targetURI:(0,l.o_h)(e),fadeOut:!0,children:u}):u};var M=i(13565),O=i(29368),D=i(20829),F=i(20817),B=i(86931),q=i(58685),K=i(33329),W=i(21549),$=i(55769),z=i(15838);const G="KY_tGmIGPqs9GPaaPqL1",H="ZDeijYE6qPzPqT9vG_2w",J="qEoBuparvnBwiHsPzwEj",Z="azmMKgbEFsGjSUnw2Knc",Q="oDljdc6tgUKxTeQMyh0D",X="eCpSFybAW4xJNfuGDJY3",V="aTeXTpJi_WmakpodeGxX",Y="kZWs1d_TjX2JQgmtx90y",ee="JCSifKpPc54eqcTYBj5Q",te="FlK1APGRiu5DTwm_0kix",ie="ahQLeD18bYXcFRWkL_vg",ae="l6peddfW1BiAnd1a_mF3",se="Xkg0O12dNVwomjL8dzm4",ne="OexEjZt7Kf7pFUW701v8",re="jAY3diSzPfk19oswf8_y",oe="F3BJWbXwGSqNOwZHInLz",le="YjVCpFaOT3LCR64t8jTN",ce="Q7HlO_WHb9N8aK8bgOjG",de="xTENSk0_RmQ8qEeEuhnE",ue="H1jMR2c5kT6qQ7lmTqpF",pe=({episode:e,onPlayEpisode:t,isPlaying:i,isActive:s,isFullyPlayed:n,setIsFullyPlayed:r,backgroundColor:o,isLocked:l,spec:d})=>{const{uri:u,playedState:p,contentRating:m,playability:h}=e,S=(0,K.s)(),E=(0,g.wA)(),[A]=(0,B.S)(1e4,(e=>e?.item?.uri===u)),R=(0,q.o)((e=>e?.duration)),{badges:_}=(0,z.b)({contentRating:m?.label}),U=(0,a.useCallback)((e=>{!h.playable&&_.nineteen&&(e.stopPropagation(),E((0,x.Tf)(u||"")))}),[u,h.playable,_.nineteen,E]),G=(0,a.useCallback)((()=>{const e=d.contextMenuButtonFactory().hitUiReveal();S.logInteraction(e)}),[S,d]),H=(0,a.useCallback)(((e,t)=>{(0,D.Qv)(t,d.downloadButtonFactory(),S,u)}),[S,d,u]),J=(0,I.d$)(),{spec:Z,logger:Q}=(0,W.r)(y.e,{data:{uri:u}});(0,a.useEffect)((()=>{J&&Q.logImpression(Z.impression())}),[J,Q,Z]);const V=(0,a.useCallback)((e=>{const t=d.saveButtonFactory();S.logInteraction(e?t.hitLike({itemToBeLiked:u}):t.hitRemoveLike({itemNoLongerLiked:u})),e&&J&&Q.logInteraction(Z.hitAddToPlaylist({itemToBeAdded:u,playlist:F.Xn}))}),[S,d,u,J,Q,Z]),Y=!l&&!e.playability.playable,ee=c.Ru.get("tracklist.a11y.play",e.name,e.podcast?.name),te=c.Ru.get("tracklist.a11y.pause",e.name,e.podcast?.name),ie=e.podcast?.uri,ae=(0,O.j)(),se=(0,N.v)(e.uri),ne=!l;return(0,w.jsxs)(b.E,{backgroundColor:o,children:[(0,w.jsxs)("div",{className:X,children:[(0,w.jsx)(M.P,{episode:e}),(0,w.jsx)($.j,{fullyPlayed:n,durationMs:s&&R?R:e.duration.milliseconds,releaseDate:e.releaseDate,resumePositionMs:p.playPositionMilliseconds,isPlaying:i,position:s&&A||void 0})]}),(0,w.jsxs)(v.S,{children:[(0,w.jsx)("div",{onClick:U,children:(0,w.jsx)(L,{episodeUri:e.uri,showUri:ie,isLocked:l,onClick:()=>{t(p.playPositionMilliseconds)},isPlaying:i,isPlayDisabled:Y,playButtonPlayLabel:ee,playButtonPauseLabel:te,size:ae})}),(0,w.jsx)(k.e,{uri:e.uri,onClick:H,size:ae,canDownload:ne,condensed:!0}),se?(0,w.jsx)(P.g,{uri:e.uri,size:ae}):(0,w.jsx)(C.b,{uri:e.uri,size:ae,onClick:V,condensed:!0}),(0,w.jsx)(j.b,{onShow:G,menu:(0,w.jsx)(T.b,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:ie,contextUri:e.uri,isPlayed:n,onMarkAsPlayed:r}),children:(0,w.jsx)(f.e,{label:c.Ru.get("more.label.context",e.name),size:ae})})]})]})};var me=i(74159),he=i(14343),ge=i(27038),ye=i(75916),xe=i(68750),be=i(64652),ve=i(93049),ke=i(555),fe=i(33625),Ce=i(622),je=i(7307);const Te=xe.ui.EPISODE_PAGE,Pe=({leavebehinds:e,uri:t,seeAllPath:i})=>{const s=(0,a.useMemo)((()=>e.slice(0,ke.un)),[e]);return(0,w.jsx)(ge.o,{leavebehinds:s,surface:Te,uri:t,seeAllButton:e.length>ke.un?(0,w.jsx)(ye.J,{leavebehinds:e,surface:Te,uri:t,pathname:i,state:{uri:t}}):null})};function Ne(e){const t=(0,fe.L)(),i=(0,l.o_h)(e.uri)?.id,s=(0,ve.c)(i),{data:n,error:r,getLeavebehinds:o}=(0,be.A)({surface:Te,uri:e.uri}),c=(d=t?.item.type,(0,Ce.Z)(d)===je.c.AD&&d===je.c.EPISODE);var d;(0,a.useEffect)((()=>{o()}),[o]),(0,a.useEffect)((()=>{c&&o()}),[c]);const u=(0,a.useMemo)((()=>n?(0,ke.iT)(n,e.uri):[]),[n?.requestId]);return u.length<1||r?null:(0,w.jsx)(Pe,{uri:e.uri,leavebehinds:u,seeAllPath:s})}var Ie=i(17866),Se=i(95530),Ee=i(13922),Ae=i(86677);const Re=({cardHeaderText:e,cardBodyText:t,buttonText:i,buttonTarget:a})=>(0,w.jsxs)("div",{className:ee,children:[(0,w.jsxs)("div",{className:te,children:[(0,w.jsx)(Se.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:e}),(0,w.jsx)(Se.E,{semanticColor:"textBase",children:t})]}),(0,w.jsx)(Ae.$,{size:"small",colorSet:"invertedLight",href:(0,l.o_h)(a).toURLPath(!0),component:Ie.v,children:i})]});var _e=i(38501);const we=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:i,hasDescription:s,htmlDescription:n,onTimeStampClick:r,playability:o,showHeader:l=!0,spec:d})=>{const u=(0,K.s)(),p=(s||t)&&l,m=(0,a.useCallback)((e=>{const t=d.readMoreButtonFactory();u.logInteraction(e?t.hitUiReveal():t.hitUiHide())}),[d,u]),h=(0,he.NC)(_e.ZK8,{loadingValue:!1});return(0,w.jsxs)(w.Fragment,{children:[p&&(0,w.jsx)(Se.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Z,children:c.Ru.get("episode.description-title")}),t&&(0,w.jsx)(Re,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),s&&(0,w.jsx)(Ee.N,{className:J,onTimeStampClick:r,maxLines:4,onExpanded:m,content:(i||"").trim(),htmlContent:e&&n?n:void 0,enableTimestamps:o.playable,enableAutomaticLinkification:h&&e&&!!n})]})};var Ue=i(97500),Le=i.n(Ue),Me=i(21743),Oe=i(29681),De=i(35141),Fe=i(82055),Be=i(78505),qe=i(30147),Ke=function(e){return e.DESCRIPTION="description",e.TRANSCRIPT="transcript",e}(Ke||{});const We=a.memo((function({transcriptSections:e,descriptionContent:t,transcriptContent:i,spec:s}){const n=(0,K.s)(),[r,o]=(0,a.useState)(Ke.DESCRIPTION),l=(0,qe.v7)(),{ref:d,inView:u}=(0,Me.Wx)({threshold:[1],root:l.current,rootMargin:`-${Be.uC+1}px 100000px 0px 100000px`}),p=(0,a.useRef)(null),m=(0,a.useCallback)((e=>{p.current=e,d(e)}),[d]);return(0,a.useEffect)((()=>{const e=p.current?.parentElement?.offsetTop,t=l?.current;if(!e||!t)return;const i=e-Be.uC;t.scrollTop>i&&t.scrollTo({top:i})}),[l,r]),(0,w.jsx)(Oe.j,{list:(0,w.jsxs)(De.L,{className:Le()(le,{[ce]:!u}),ref:m,children:[(0,w.jsx)(Fe.Y,{label:c.Ru.get("web-player.episode.description"),sentenceCase:!0,active:r===Ke.DESCRIPTION,onClick:()=>{const e=s.tabsFactory().descriptionTabButtonFactory().hitUiReveal();n.logInteraction(e),o(Ke.DESCRIPTION)},className:Le()(de,{[ie]:r===Ke.DESCRIPTION})}),(0,w.jsx)(Fe.Y,{label:c.Ru.get("web-player.episode.transcript"),sentenceCase:!0,disabled:null===e,active:r===Ke.TRANSCRIPT,onClick:()=>{const e=s.tabsFactory().transcriptTabButtonFactory().hitUiReveal();n.logInteraction(e),o(Ke.TRANSCRIPT)},className:Le()(de,{[ie]:r===Ke.TRANSCRIPT})})]}),children:null===e||r===Ke.DESCRIPTION?t:i})}));var $e=i(73779),ze=i(28340),Ge=i(82935);const He=(0,a.memo)((function({transcriptSections:e,onTimeStampClick:t,episodeUri:i}){const{spec:a,logger:s}=(0,W.r)($e.c,{data:{uri:i}}),{isPlaying:n}=(0,ze.P)({uri:i},{featureIdentifier:"episode"}),r=a.timestampLinkFactory();return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:se,children:(0,w.jsx)(Se.E,{variant:"bodySmall",semanticColor:"textBase",children:c.Ru.get("web-player.episode.transcript.disclaimer")})}),e.map(((e,a)=>{const o=`transcript-section-${a}`;return(0,w.jsxs)("div",{className:ae,children:[(0,w.jsx)("button",{className:ne,onClick:()=>{t(e.startMs,o),s.logInteraction(n?r.hitSeekToTime({msToSeekTo:e.startMs}):r.hitPlay({itemToBePlayed:i}))},children:(0,w.jsx)(S.k,{id:o,targetURI:(0,l.o_h)(i),fadeOut:!0,children:(0,w.jsx)(Se.E,{variant:"marginalBold",semanticColor:"textSubdued",className:re,children:(0,Ge.f)(e.startMs)})})}),e.content.map(((e,t)=>(0,w.jsx)(Se.E,{variant:"bodySmall",semanticColor:"textBase",className:oe,dir:"auto",children:e},`transcript-text-${t}`)))]},o)}))]})}));var Je=i(37115),Ze=i(94994),Qe=i(94246),Xe=i(32183),Ve=i(20455),Ye=i(27305),et=i(591),tt=i(67799),it=i(82391),at=i(13679),st=i(38215),nt=i(93627),rt=i(95797),ot=i(40638),lt=i(18377),ct=i(52166),dt=i(89402),ut=i(94139),pt=i(14178);const mt=({children:e,index:t,ariaRowIndex:i,onTriggerPlay:s,isActive:n,uri:r,spec:o})=>{const l=(0,K.s)(),{pushPopSelected:c,toggleSelected:d,isSelected:u}=(0,a.useContext)(ct.m),p=(0,a.useRef)(null),m=(0,dt.W)(),h=(0,ot.YQ)((e=>{m({intent:"play",type:"double-click"});const t=l.logInteraction(o.doubleHitPlay({itemToBePlayed:r}));s(e,t)}),ut.d,{leading:!0,trailing:!1}),g=(0,a.useCallback)((e=>{d(t,e.shiftKey,e.ctrlKey||e.metaKey)}),[d,t]),y=(0,a.useCallback)((e=>{if(!p.current?.contains(e.target))return;const i="ArrowUp"===e.key?-1:1;["ArrowUp","ArrowDown"].includes(e.key)&&(e.shiftKey?c(t,i):d(t+i,!1,!1))}),[c,d,t]),x=u(t),b=x&&u(t-1),v=x&&u(t+1);return(0,w.jsx)(lt.$,{rowIndex:i,"aria-selected":x,children:(0,w.jsx)("div",{"data-testid":"tracklist-row",className:Le()(pt.A.trackListRow,pt.A.trackListRowGrid,{[pt.A.active]:n,[pt.A.selected]:x,[pt.A.isPreviousRowSelected]:b,[pt.A.isNextRowSelected]:v}),onDoubleClick:h,onClick:g,onKeyDown:y,ref:p,children:e})})};var ht=i(7159),gt=i(44672);const yt=({uri:e,title:t="",index:i,subtitle:s="",showName:n="",showUri:r="",duration:o=0,start:l,stop:d})=>{const{isActive:u,isPlaying:p,onClick:m}=(0,ht.L)({episodeUri:e,start:l,stop:d}),h=(0,a.useCallback)(((e,t)=>{m(t)}),[m]),{spec:g}=(0,W.r)(Qe.i,{data:{position:i,reason:"",uri:e}});return(0,w.jsx)(gt.pZ,{value:"row",index:i,children:(0,w.jsxs)(mt,{index:i,ariaRowIndex:i+1,onTriggerPlay:h,isActive:u,spec:g,uri:e,children:[(0,w.jsxs)(at.U,{ariaColIndex:0,children:[(0,w.jsx)(et.$,{uri:e,playAriaLabel:c.Ru.get("tracklist.a11y.play",s,n),onClick:h,isPlaying:p,isActive:u,spec:g,children:(0,w.jsx)(tt.a,{children:(0,w.jsx)(Ze.M,{className:pt.A.talkIcon,"aria-hidden":!0})})}),(0,w.jsxs)(Ye.l,{children:[(0,w.jsx)(rt.p,{titleText:t,children:t}),(0,w.jsx)(nt.p,{children:s})]})]}),(0,w.jsx)(st.o,{ariaColIndex:1,children:(0,w.jsx)(Xe.g,{uri:r,name:n,spec:g,children:(0,w.jsx)("span",{dir:"auto",children:n})})}),(0,w.jsx)(it.l,{ariaColIndex:2,children:(0,w.jsx)(Ve.P,{duration:o,className:pt.A.talkSegmentDuration})})]})})};var xt=i(96614),bt=i(4266),vt=i(26639),kt=i(54622),ft=i(80737),Ct=i(95931),jt=i(62358),Tt=i(44335);const Pt="HRApv65revEcL42QzRjJ",Nt="HbJqPqSmOY5H3lLnQVzD",It="DBcCnhHVt7coNqp3wMB4",St=({episodeUri:e,index:t,duration:i,start:s,stop:n,name:r,uri:o,artists:l,album:d,playable:u})=>{const{isActive:p,isPlaying:m,onClick:h}=(0,ht.L)({episodeUri:e,start:s,stop:n}),g=(0,a.useCallback)(((e,t)=>{u&&h(t)}),[h,u]),{spec:y}=(0,W.r)(Qe.i,{data:{position:t,reason:"",uri:o}});return(0,w.jsx)(gt.pZ,{value:"row",index:t,children:(0,w.jsx)(vt.t,{trigger:"right-click",action:"open",menu:(0,w.jsx)(kt.P,{uri:o}),children:(0,w.jsxs)(jt.w,{uri:o,index:t,ariaRowIndex:t+1,dragMetadata:{name:r,createdBy:l?.[0].name??""},onTriggerPlay:g,isActive:p,isPlayable:u,spec:y,children:[(0,w.jsxs)(at.U,{ariaColIndex:0,children:[(0,w.jsx)(et.$,{uri:o,playAriaLabel:c.Ru.get("tracklist.a11y.play",r,l?.[0].name),onClick:g,isPlaying:m,isActive:p,spec:y,children:(0,w.jsx)(tt.a,{children:(0,w.jsx)("img",{className:Nt,src:d.image,alt:d.name})})}),(0,w.jsxs)(Ye.l,{children:[(0,w.jsx)(rt.p,{titleText:r,children:r}),(0,w.jsx)(nt.p,{children:(0,w.jsx)(ft.l,{artists:l,spec:y})})]})]}),(0,w.jsx)(st.o,{ariaColIndex:1,children:(0,w.jsx)(Xe.g,{uri:d.uri,name:d.name,spec:y,children:d.name})}),(0,w.jsxs)(it.l,{ariaColIndex:2,children:[(0,w.jsx)(Tt.d,{uri:o,spec:y}),(0,w.jsx)(Ve.P,{duration:i}),(0,w.jsx)(Ct.Y,{spec:y,menu:(0,w.jsx)(kt.P,{uri:o,artists:l}),label:c.Ru.get("more.label.track",r,l?.[0].name)})]})]})})})};var Et=i(96322),At=i(85907);function Rt(e,t,i){return e.reduce(((e,a,s)=>((s>0||t>0)&&e.push({type:"SPACER",id:`spacer-${e.length}`}),"MUSIC"===a.type?e.push(function(e,t,i){return{type:"MUSIC",index:t,uri:i.uri,episodeUri:e,start:i.start,stop:i.stop,duration:i.duration,name:i.track.name,artists:i.track.artists,album:i.track.album,playable:i.track.playable}}(i,s,a)):"TALK"===a.type&&e.push(function(e,t,i){return{type:"TALK",index:t,uri:e,title:i.title,subtitle:i.subtitle,start:i.start,stop:i.stop,duration:i.duration,showUri:i.show.uri,showName:i.show.name}}(i,s,a)),e)),[])}const _t=({uri:e,segmentCount:t})=>{const i=(0,Et.o)(),s=(0,a.useCallback)((async(a,s)=>{const n=Math.ceil(a/2);try{return{items:Rt(await i.getSegments(e,n,s),n,e),totalLength:2*t-1}}catch(e){return{items:[],totalLength:0}}}),[t,i,e]),n=(0,a.useCallback)((t=>{switch(t.type){case"SPACER":return(0,w.jsx)("div",{className:It},t.id);case"MUSIC":return(0,w.jsx)(St,{...t},`${e}-${t.index}`);case"TALK":return(0,w.jsx)(yt,{...t},`${e}-${t.index}`);default:return(0,At.d)(t)}}),[e]),r=(0,a.useCallback)((e=>({uri:"MUSIC"===e.type?e.uri:""})),[]),o=c.Ru.get("music_and_talk.in_this_episode");return(0,w.jsxs)("div",{children:[(0,w.jsx)(Se.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Pt,children:o}),(0,w.jsx)(xt.S4,{ariaLabel:o,hasHeaderRow:!0,rowPlaceholder:Je.qq,columns:[bt.$.TITLE_AND_ARTIST,bt.$.ALBUM_OR_SHOW,bt.$.DURATION],renderRow:n,fetchTracks:s,resolveItem:r,limit:50,nrTracks:2*t-1,testID:"music-and-talk-tracklist"})]})},wt=()=>null;var Ut=i(19795),Lt=i(83327);const Mt=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:i,hasDescription:s,hasMusicAndTalkSegments:n,htmlDescription:r,onDescriptionTimestampClick:o,onTranscriptTimestampClick:l,playability:d,segmentCount:u,showUrl:p,transcript:m,uri:h,spec:g})=>{const y=(0,K.s)(),x=(0,he.NC)(_e.iGu,{loadingValue:!1}),b=(0,a.useMemo)((()=>g.descriptionSectionFactory()),[g]),v=(0,a.useMemo)((()=>b.trackListFactory()),[b]),[k,f]=(0,a.useState)(null),C=(0,a.useCallback)((async e=>{const t=await(0,Ut.Q)(e);f(t)}),[]);(0,a.useEffect)((()=>{m&&m.length>0&&C(m[0].cdnUrl)}),[C,m]);const j=l=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(we,{hasDescription:s,contentInformation:t,onTimeStampClick:o,description:i,areHTMLDescriptionsEnabled:e,htmlDescription:r,playability:d,showHeader:l,spec:b}),n&&(0,w.jsx)(Lt.r,{spec:v,children:(0,w.jsx)(_t,{segmentCount:u,uri:h})}),p&&(0,w.jsx)(me.n,{size:"small",className:Q,href:p,component:Ie.v,onClick:()=>{y.logInteraction(b.allEpisodesLinkFactory().hitUiNavigate({destination:p}))},children:c.Ru.get("episode.see_all_episodes")}),x&&(0,w.jsx)(a.Suspense,{fallback:null,children:(0,w.jsx)(wt,{uri:h,className:ue})}),(0,w.jsx)(Ne,{uri:h})]}),T=m&&m?.length>0&&d.playable;return(0,w.jsx)(w.Fragment,{children:T?(0,w.jsx)(We,{transcriptSections:k,descriptionContent:j(!1),transcriptContent:(0,w.jsx)(He,{transcriptSections:k||[],onTimeStampClick:l,episodeUri:h}),spec:g}):j(!0)})};var Ot=i(65462),Dt=i(25577),Ft=i(87018),Bt=i(88711),qt=i(46110),Kt=i(1246),Wt=i(25493),$t=i(2070),zt=i(1227),Gt=i(62986),Ht=i(21082),Jt=i(60281),Zt=i(32255),Qt=i(69624),Xt=i(98712),Vt=i(51354);const Yt=({coverArt:e,name:t})=>{const i=(0,Vt.y)(),a=i===Xt.E.SMALL||i===Xt.E.XSMALL;return(0,w.jsx)(Zt.b,{images:e,type:je.c.EPISODE,shape:Zt.u.ROUNDED_CORNERS,title:t,size:a?Qt.Qe.SIZE_20:Qt.Qe.SIZE_24,className:V})};var ei=i(16157);const ti=({episode:e,isFullyPlayed:t,setIsFullyPlayed:i,backgroundColor:s,spec:n})=>{const{uri:r,name:o,sharingInfo:d,playedState:u,episodeType:p,releaseDate:m,coverArt:h}=e,g=(0,K.s)(),y=function(e,t,i,a,s){const n=t===ei.I_.Episode;return(0,Jt.hD)(e,a,i,s)?(0,w.jsx)(Jt.Ih,{isMusicAndTalk:n}):n?c.Ru.get("type.showEpisode"):c.Ru.get("type.podcastEpisode")}(r,p||ei.I_.Unknown,u.playPositionMilliseconds,function(e){return e?.replace(/T.*/,"")||""}(m?.isoString),u.state===ei._w.Completed),x=e.podcast?.uri,b=function(e){const t=(0,l.o_h)(e);return`/show/${(0,l.cEw)(t?.id||"")}`}(x),v=(0,a.useCallback)((()=>{g.logInteraction(n.podcastLinkFactory().hitUiNavigate({destination:b}))}),[g,b,n]),k=e.podcast?.coverArt,f=!!(k&&k.length===h.length&&h.every(((e,t)=>e.url===k[t].url))),C=(0,w.jsx)(T.b,{uri:r,sharingInfo:d,showUri:x,contextUri:r,isPlayed:t,onMarkAsPlayed:i});return(0,w.jsxs)(Dt.z,{backgroundColor:s,children:[(0,w.jsx)(qt.h,{children:(0,w.jsx)(Ot.h,{menu:C,children:(0,w.jsx)(Kt.X,{text:o,dragUri:r,dragLabel:o})})}),!f&&(0,w.jsx)(Ft.X,{children:(0,w.jsx)(Ot.h,{menu:C,children:(0,w.jsx)(Wt.b,{loading:"eager",name:o,images:h,placeholderType:"episode",shape:Wt.u.SQUARE})})}),(0,w.jsxs)(Bt.Y,{children:[(0,w.jsx)($t.B,{children:y}),(0,w.jsx)(Ot.h,{menu:C,children:(0,w.jsx)(Gt.mm,{dragUri:r,dragLabel:o,scaleAtMinWidth:Gt.tw,className:H,children:(0,w.jsx)("span",{"data-testid":"episodeTitle",children:o})})}),(0,w.jsx)(Ot.h,{menu:C,children:(0,w.jsxs)(Ht.N,{to:b,onClick:v,className:Y,children:[f&&(0,w.jsx)(Yt,{name:o,coverArt:h}),(0,w.jsx)(zt.g,{children:(0,w.jsx)("span",{"data-testid":"showTitle",children:e.podcast?.name})})]})})]})]})};var ii=i(62814),ai=i(2983),si=i(12755),ni=i(39566),ri=i(44825),oi=i(58337),li=i(33449),ci=i(66339),di=i(87182),ui=i(2679),pi=i(18464),mi=i(41031),hi=i(56970);const gi=({episode:e})=>{const{uri:t,episodeType:i,description:o,htmlDescription:c,podcastSubscription:m,segmentsCount:g,podcast:y,contentInformation:x,playedState:b,coverArt:v}=e,{spec:k,logger:f}=(0,W.r)(r.g,{data:{uri:t}}),C=(0,ni.n)(),j=(0,a.useMemo)((()=>k.headerFactory()),[k]),T=(0,a.useMemo)((()=>k.actionBarFactory()),[k]),[P,N]=(0,a.useState)(b.state===ei._w.Completed),I=(0,di.z)(),S=void 0!==g&&g>0,E=(0,R.V)(),{triggerPlay:A,togglePlay:L,isActive:M}=(0,ze.P)({uri:t,...C?{}:{pages:[{items:[{type:je.c.EPISODE,uri:t,uid:null,provider:null}]}]}},{featureIdentifier:"episode"}),{isActive:O,isPlaying:D}=(0,ui.te)(t),F=v.at(0)?.url,B=(0,oi.H)(F||null),K=(0,q.o)((e=>e?.isPaused??void 0)),$=(0,_.c)(),z=m.isPaywalled&&!m.isUserSubscribed,H=O||M,J=e?{name:e.name,uri:e.uri,mediaTypes:e.mediaTypes,audio:{items:e.audio.items.map((e=>({url:e.url})))}}:null,Z=y?{name:y.name,uri:y.uri,trailer:y.trailer,showTypes:y.showTypes}:null,Q=(0,ri.C)(J,Z),X=(0,a.useCallback)(((e,t,a,s)=>{const n=()=>{K?(s?.("resume"),I.resume()):(s?.("pause"),I.pause())};if(!z)if(i===ei.I_.Episode&&$)u.h.set((()=>({triggerId:a||U,triggerAction:null})));else if(M&&!t)E?n():L({loggingParams:s?.()});else if(O&&!t)n();else{const t=s?.("play");E?Q({seekTo:e,loggingParams:t}):A({seekTo:e,loggingParams:t})}}),[z,i,$,O,M,E,K,I,L,Q,A]),V=(0,a.useCallback)((e=>{X(e,!1,void 0,(e=>{const i=k.actionBarFactory().playButtonFactory();let a;return a="pause"===e||D?i.hitPause({itemToBePaused:t}):"resume"===e||H?i.hitResume({itemToBeResumed:t}):i.hitPlay({itemToBePlayed:t}),f.logInteraction(a)}))}),[X,H,D,f,k,t]),Y=(0,a.useCallback)((e=>{X(e,!0,void 0,(()=>f.logInteraction(k.descriptionSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:t}))))}),[X,f,k,t]),ee=(0,a.useCallback)(((e,t)=>{X(e,!0,t)}),[X]),[te,ie]=(0,s.ok)();(e=>{const t=(0,n.Zp)(),[i]=(0,s.ok)(),r=(0,he.NC)(_e.MCN,{loadingValue:!1}),o=e.gatedEntityRelations?.entitiesWithValueProps.at(0),c=(0,l.o_h)(o?.fallbackNavigation?.uri),d=o?.uri,u=i.has("si");(0,a.useEffect)((()=>{if(!r||!u||!d)return;let i;e.hasGatedEntityRelationAccess&&e.uri!==d?i=(0,l.o_h)(d)?.toURLPath(!0):!e.hasGatedEntityRelationAccess&&c&&(i=c.toURLPath(!0)),i&&t(i,{replace:!0})}),[r,c,u,t,d,e.hasGatedEntityRelationAccess,e.uri])})(e),(0,a.useEffect)((()=>{if(e&&!H&&te.has("t")){const t=te.get("t")||"0",i=1e3*parseInt(t,10);i<=e.duration.milliseconds&&(te.delete("t"),ie(te,{replace:!0}),X(i,!0))}}),[e,X,H,te,ie]);const ae=!!o||!!c,se=e.podcast?.uri,ne=(0,l.o_h)(se)?.toURLPath(!0);return(0,w.jsxs)("section",{"data-testid":"episode",className:G,children:[(0,w.jsx)(d.Q,{children:(0,hi.L$)({episodeOrChapterName:e.name,showOrAudiobookName:e.podcast?.name??"",type:"Podcast"})}),(0,w.jsx)(h.c,{artistOrShow:e.podcast?.name,title:e.name,uri:t,entityType:h.p.EPISODE}),(0,w.jsx)(ti,{episode:e,isFullyPlayed:P,setIsFullyPlayed:N,backgroundColor:B,spec:j}),(0,w.jsx)(pe,{episode:e,onPlayEpisode:V,isPlaying:D,isActive:H,isFullyPlayed:P,setIsFullyPlayed:N,backgroundColor:B,isLocked:z,spec:T}),(0,w.jsxs)("div",{className:"contentSpacing",children:[(0,w.jsx)(ii.q,{gatedEntityRelations:e.gatedEntityRelations,upsellExplanation:e.upsellExplanation,hasAccess:e.hasGatedEntityRelationAccess,showValueProps:!1,showCoverArt:!1}),(0,w.jsx)(Mt,{transcript:e.transcript,hasDescription:ae,contentInformation:x,onDescriptionTimestampClick:Y,onTranscriptTimestampClick:ee,description:e.description,areHTMLDescriptionsEnabled:!0,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegments:S,segmentCount:g,uri:e.uri,showUrl:ne,spec:k}),$&&(0,w.jsx)(p.W,{uri:t})]})]})},yi=a.memo((function(){const{episodeId:e=""}=(0,n.g)(),t=(0,l.iMK)(e).toURI(),i=(0,pi.d)(t),{data:s,isLoading:r}=(0,ci.r)(t);return i?.isError||!i?.episodeOrChapter||r?(0,w.jsx)(m.LoadingPage,{hasError:i?.isError||!1,errorMessage:c.Ru.get("error.not_found.title.podcast")}):(0,mi.Gr)(i.episodeOrChapter)?(0,w.jsx)(ai.$,{to:(0,l.o_h)(i.episodeOrChapter.book?.uri).toURLPath(!0)}):(0,w.jsx)(a.Suspense,{fallback:null,children:(0,w.jsx)(si.u,{pageId:o.$h.PODCAST_EPISODE,uri:t,children:(0,w.jsx)(li.d,{dynamicColors:s,children:(0,w.jsx)(gi,{episode:i.episodeOrChapter})})})})}))},7159:(e,t,i)=>{i.d(t,{L:()=>o});var a=i(30758),s=i(28340),n=i(58685),r=i(24620);function o({episodeUri:e,start:t,stop:i}){const{togglePlay:o,triggerPlay:l,isPlaying:c,isActive:d}=(0,s.P)({uri:e},{featureIdentifier:"episode"}),u=(0,n.o)((e=>(0,r.s)(e)??0)),p=d&&function(e,t,i){return i>=e&&i<t}(t,i,u),m=c&&p;return{onClick:(0,a.useCallback)((e=>{p?o({seekTo:t,loggingParams:e}):l({seekTo:t,loggingParams:e})}),[p,t,o,l]),isPlaying:m,isActive:p}}},19795:(e,t,i)=>{i.d(t,{Q:()=>h});var a=i(21364),s=i(22795),n=i.n(s);let r=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.PLAINTEXT_CONTENT=1]="PLAINTEXT_CONTENT",e[e.MUSIC_TRACK=2]="MUSIC_TRACK",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED",e}({});function o(e){switch(e){case 0:case"UNKNOWN":return r.UNKNOWN;case 1:case"PLAINTEXT_CONTENT":return r.PLAINTEXT_CONTENT;case 2:case"MUSIC_TRACK":return r.MUSIC_TRACK;default:return r.UNRECOGNIZED}}const l={encode(e,t=n().Writer.create()){""!==e.version&&t.uint32(10).string(e.version),""!==e.episodeUri&&t.uint32(18).string(e.episodeUri),""!==e.publishedAt&&t.uint32(26).string(e.publishedAt);for(const i of e.sections)c.encode(i,t.uint32(34).fork()).ldelim();return""!==e.language&&t.uint32(42).string(e.language),!0===e.curated&&t.uint32(48).bool(e.curated),t},decode(e,t){const i=e instanceof n().Reader?e:new(n().Reader)(e);let a=void 0===t?i.len:i.pos+t;const s={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};for(;i.pos<a;){const e=i.uint32();switch(e>>>3){case 1:s.version=i.string();break;case 2:s.episodeUri=i.string();break;case 3:s.publishedAt=i.string();break;case 4:s.sections.push(c.decode(i,i.uint32()));break;case 5:s.language=i.string();break;case 6:s.curated=i.bool();break;default:i.skipType(7&e)}}return s},fromJSON:e=>({version:p(e.version)?String(e.version):"",episodeUri:p(e.episodeUri)?String(e.episodeUri):"",publishedAt:p(e.publishedAt)?String(e.publishedAt):"",sections:Array.isArray(e?.sections)?e.sections.map((e=>c.fromJSON(e))):[],language:p(e.language)?String(e.language):"",curated:!!p(e.curated)&&Boolean(e.curated)}),toJSON(e){const t={};return void 0!==e.version&&(t.version=e.version),void 0!==e.episodeUri&&(t.episodeUri=e.episodeUri),void 0!==e.publishedAt&&(t.publishedAt=e.publishedAt),e.sections?t.sections=e.sections.map((e=>e?c.toJSON(e):void 0)):t.sections=[],void 0!==e.language&&(t.language=e.language),void 0!==e.curated&&(t.curated=e.curated),t},fromPartial(e){const t={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};return t.version=e.version??"",t.episodeUri=e.episodeUri??"",t.publishedAt=e.publishedAt??"",t.sections=e.sections?.map((e=>c.fromPartial(e)))||[],t.language=e.language??"",t.curated=e.curated??!1,t}};const c={encode:(e,t=n().Writer.create())=>(0!==e.type&&t.uint32(8).int32(e.type),0!==e.startMs&&t.uint32(16).int32(e.startMs),void 0!==e.plaintextContent&&d.encode(e.plaintextContent,t.uint32(26).fork()).ldelim(),void 0!==e.musicTrack&&u.encode(e.musicTrack,t.uint32(50).fork()).ldelim(),""!==e.title&&t.uint32(34).string(e.title),void 0!==e.fallback&&d.encode(e.fallback,t.uint32(42).fork()).ldelim(),t),decode(e,t){const i=e instanceof n().Reader?e:new(n().Reader)(e);let a=void 0===t?i.len:i.pos+t;const s={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};for(;i.pos<a;){const e=i.uint32();switch(e>>>3){case 1:s.type=i.int32();break;case 2:s.startMs=i.int32();break;case 3:s.plaintextContent=d.decode(i,i.uint32());break;case 6:s.musicTrack=u.decode(i,i.uint32());break;case 4:s.title=i.string();break;case 5:s.fallback=d.decode(i,i.uint32());break;default:i.skipType(7&e)}}return s},fromJSON:e=>({type:p(e.type)?o(e.type):0,startMs:p(e.startMs)?Number(e.startMs):0,plaintextContent:p(e.plaintextContent)?d.fromJSON(e.plaintextContent):void 0,musicTrack:p(e.musicTrack)?u.fromJSON(e.musicTrack):void 0,title:p(e.title)?String(e.title):"",fallback:p(e.fallback)?d.fromJSON(e.fallback):void 0}),toJSON(e){const t={};return void 0!==e.type&&(t.type=function(e){switch(e){case r.UNKNOWN:return"UNKNOWN";case r.PLAINTEXT_CONTENT:return"PLAINTEXT_CONTENT";case r.MUSIC_TRACK:return"MUSIC_TRACK";default:return"UNKNOWN"}}(e.type)),void 0!==e.startMs&&(t.startMs=Math.round(e.startMs)),void 0!==e.plaintextContent&&(t.plaintextContent=e.plaintextContent?d.toJSON(e.plaintextContent):void 0),void 0!==e.musicTrack&&(t.musicTrack=e.musicTrack?u.toJSON(e.musicTrack):void 0),void 0!==e.title&&(t.title=e.title),void 0!==e.fallback&&(t.fallback=e.fallback?d.toJSON(e.fallback):void 0),t},fromPartial(e){const t={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};return t.type=e.type??0,t.startMs=e.startMs??0,t.plaintextContent=void 0!==e.plaintextContent&&null!==e.plaintextContent?d.fromPartial(e.plaintextContent):void 0,t.musicTrack=void 0!==e.musicTrack&&null!==e.musicTrack?u.fromPartial(e.musicTrack):void 0,t.title=e.title??"",t.fallback=void 0!==e.fallback&&null!==e.fallback?d.fromPartial(e.fallback):void 0,t}};const d={encode(e,t=n().Writer.create()){for(const i of e.plaintext)t.uint32(10).string(i);return t},decode(e,t){const i=e instanceof n().Reader?e:new(n().Reader)(e);let a=void 0===t?i.len:i.pos+t;const s={plaintext:[]};for(;i.pos<a;){const e=i.uint32();if(e>>>3==1)s.plaintext.push(i.string());else i.skipType(7&e)}return s},fromJSON:e=>({plaintext:Array.isArray(e?.plaintext)?e.plaintext.map((e=>String(e))):[]}),toJSON(e){const t={};return e.plaintext?t.plaintext=e.plaintext.map((e=>e)):t.plaintext=[],t},fromPartial(e){const t={plaintext:[]};return t.plaintext=e.plaintext?.map((e=>e))||[],t}};const u={encode:(e,t=n().Writer.create())=>(""!==e.uri&&t.uint32(10).string(e.uri),t),decode(e,t){const i=e instanceof n().Reader?e:new(n().Reader)(e);let a=void 0===t?i.len:i.pos+t;const s={uri:""};for(;i.pos<a;){const e=i.uint32();if(e>>>3==1)s.uri=i.string();else i.skipType(7&e)}return s},fromJSON:e=>({uri:p(e.uri)?String(e.uri):""}),toJSON(e){const t={};return void 0!==e.uri&&(t.uri=e.uri),t},fromPartial(e){const t={uri:""};return t.uri=e.uri??"",t}};function p(e){return null!=e}function m(e){return e.type===r.MUSIC_TRACK?{type:"track",startMs:e.startMs,content:e.fallback?.plaintext||[],trackUri:e.musicTrack?.uri}:{type:"text",startMs:e.startMs,content:e.plaintextContent?.plaintext||[]}}async function h(e){try{const t=await fetch(e,{});if(t.ok&&t.body){const e=await t.arrayBuffer(),i=l.decode(new Uint8Array(e));return i.sections.map(m)}return null}catch(e){return null}}n().util.Long!==a.A&&(n().util.Long=a.A,n().configure())}}]);
//# sourceMappingURL=xpui-routes-episode.js.map