"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[8606],{23432:(e,t,a)=>{a.d(t,{I:()=>l});var s=a(30758),i=a(45664),r=a(89402),n=a(24533),o=a(86070);const l=s.memo((function({uri:e,size:t=i.M.md,className:a,onClick:l,canDownload:c,condensedAll:d}){const[u,m]=(0,n.A)(e),h=(0,r.W)(),p=(0,s.useCallback)((()=>{h({targetUri:e,intent:u?"unsave":"save",type:"click"}),m(!u)}),[h,e,u,m]);return(0,o.jsx)(i.f,{className:a,isFollowing:u,onFollow:p,onClick:l,uri:e,size:t,canDownload:c,condensedAll:d,condensed:!0})}))},43673:(e,t,a)=>{a.d(t,{G:()=>P});var s=a(97500),i=a.n(s),r=a(31417),n=a(95530);const o="YNXLVjlRXPfM4xObTojA",l="CVRy4NtxZYSle8dJ1E67",c="holKDGFNEFSz85czBeSv",d="gqidZhN1lgoZDfI_7E6w",u="_IQ8dgA5pEr_V8PfUkWa",m="xNkPMA_OvAxcFTdfyroI";var h=a(86070);const p=({value:e,label:t,hasDivider:a=!1})=>(0,h.jsxs)("div",{className:c,"aria-hidden":"true",children:[(0,h.jsx)(n.E,{variant:"titleSmall",className:i()({[u]:a}),children:e}),(0,h.jsx)(n.E,{variant:"marginal",semanticColor:"textSubdued",children:t})]});var g=a(30758);const x=1e3,y=60*x,v=60*y,b=24*v;var j=a(95204),f=a(19870);const C={days:0,hours:0,minutes:0,seconds:0};function w(e){return e>0?function(e){const t=Math.abs(e);return{days:Math.floor(t/b),hours:Math.floor(t%b/v),minutes:Math.floor(t%v/y),seconds:Math.floor(t%y/x)}}(e):C}var k=a(32255),S=a(7307);const P=({targetDate:e,className:t,onComplete:a,images:s,imageTitle:n})=>{const{days:c,hours:u,minutes:x,seconds:y}=((e,t)=>{const a=(0,g.useRef)(t);a.current=t;const[s,i]=(0,g.useState)((()=>w((0,j.u)(e))));return(0,f.$)((t=>{const s=(0,j.u)(e),r=w(s);i(r),s<=0&&(t(),a.current?.())}),1e3),s})(e,a),v=void 0!==s&&s.length>0&&n,b=r.Ru.get("web-player.prerelease.countdown_label",{days:c,hours:u,minutes:x,seconds:y});return(0,h.jsxs)("div",{className:i()(o,t,{[l]:v}),role:"timer","data-testid":"countdown",children:[(0,h.jsx)("span",{className:m,children:b}),v&&(0,h.jsx)(k.b,{images:s,type:S.c.ALBUM,shape:k.u.ROUNDED_CORNERS,className:d,title:n}),(0,h.jsx)(p,{value:c,label:r.Ru.get("web-player.prerelease.days",c),hasDivider:!0}),(0,h.jsx)(p,{value:u,label:r.Ru.get("web-player.prerelease.hours",u),hasDivider:!0}),(0,h.jsx)(p,{value:x,label:r.Ru.get("web-player.prerelease.minutes",x),hasDivider:!0}),(0,h.jsx)(p,{value:y,label:r.Ru.get("web-player.prerelease.seconds",y)})]})}},86236:(e,t,a)=>{a.d(t,{W:()=>o});var s=a(30758),i=a(74159),r=a(31417),n=a(86070);const o=(0,s.memo)((function({isFollowing:e,onClick:t,disabled:a=!1,buttonText:s,size:o="small",className:l}){const c=e?r.Ru.get("following"):r.Ru.get("follow");return(0,n.jsx)(i.n,{onClick:t,disabled:a,size:o,className:l,children:s||c})}))},13611:(e,t,a)=>{a.d(t,{h:()=>u});var s=a(30758),i=a(57239),r=a(74941),n=a(67668),o=a(70028),l=a(30157);var c=a(26184),d=a(86070);const u=({children:e,action:t,uri:a})=>{const u=(0,n.V)(),m=(0,l.N)(o.JD);let h;const p=()=>{const e={triggerId:r.d,triggerAction:{type:t}};i.h.set((t=>({...t,...e}))),m.storeAction(o.j8,{operation:c.tS.ADD,uris:[a]})};try{h=s.Children.only(e)}catch(t){return(0,d.jsx)(d.Fragment,{children:e})}return u?s.cloneElement(h,{onClick:p}):(0,d.jsx)(d.Fragment,{children:e})}},36685:(e,t,a)=>{a.d(t,{H4:()=>s});a(30758),a(97500),a(31417),a(99701),a(35352);a(86070);let s=function(e){return e.primary="primary",e.secondary="secondary",e.transparent="transparent",e}({})},11584:(e,t,a)=>{a.d(t,{v:()=>m});var s=a(74159),i=a(97285),r=a(86677),n=a(41562),o=a(31417),l=a(13611),c=a(36213),d=a(20463),u=a(86070);const m=({uri:e,isBook:t=!1})=>{const{isPreSaved:a,addPresave:m,removePresave:h}=(0,c.w)({uri:e,isBook:t});return a?(0,u.jsx)(s.n,{onClick:h,iconTrailing:i.k,children:o.Ru.get("web-player.prerelease.presaved")}):(0,u.jsx)(l.h,{uri:e,action:d.no.SAVE_PRERELEASE,children:(0,u.jsx)(r.$,{disabled:void 0===a,onClick:m,iconTrailing:n.P,children:o.Ru.get("web-player.prerelease.presave")})})}},67239:(e,t,a)=>{a.d(t,{g:()=>A});var s=a(30758),i=a(3074),r=a.n(i),n=a(53860),o=a(84703),l=a(95530),c=a(14343),d=a(22765),u=a(75830),m=a(57447),h=a(1555),p=a(10994),g=a(41874),x=a(12864),y=a(4266),v=a(31417),b=a(47160),j=a(29324),f=a(86070);const C=({onSelect:e})=>{const{viewMode:t,setViewMode:a}=(0,b.a)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g.y,{children:v.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as")}),j.i.map((({value:s,icon:i,text:r},n)=>(0,f.jsx)(x.D,{role:"menuitemradio","aria-checked":t===s,divider:n===j.i.length-1?"after":void 0,autoClose:!1,leadingIcon:i(),onClick:()=>{a(s),e?.(s)},children:r()},s)))]})},w=({heading:e,selected:t,onSelect:a,options:s,enableViewModeMenu:i=!1,onSelectViewMode:r,sortOrder:n,...o})=>{let l;n&&(n===y.H.ASC||n===y.H.SECONDARY_ASC?l=m.U:n!==y.H.DESC&&n!==y.H.SECONDARY_DESC||(l=h.R));return(0,f.jsxs)(p.W,{getInitialFocusElement:e=>e?.querySelector('[aria-checked="true"]'),...o,children:[e?(0,f.jsx)(g.y,{children:e}):null,s.map((({key:e,value:s},i)=>(0,f.jsx)(x.D,{role:"menuitemradio","aria-checked":e===t.key,CheckedIcon:l,onClick:()=>a(e,i),children:s},e))),i&&(0,f.jsx)(C,{onSelect:r})]})};var k=a(61147),S=a(21549),P=a(43329);const R="x-sortBox-sortDropdown",E="cvTLPmjt6T7M85EKcB8w",N="SbDHY3fVADNJ4l9qOLQ2",I=({isOpen:e,className:t})=>e?(0,f.jsx)(n.J,{size:"small","aria-hidden":"true",className:t}):(0,f.jsx)(o.y,{size:"small","aria-hidden":"true",className:t}),A=({heading:e,options:t,selected:a,onSelect:i,sortOrder:n,variant:o="bodySmall",semanticColor:m,disabled:h,onClick:p,ariaLabel:g,enableViewModeMenu:x=!1})=>{const y=(0,c.NC)(P.mA)&&x,{viewMode:v}=(0,k.a)();a||(a=t?.[0]);const b=j.i.find((({value:e})=>e===v))||j.i[0],C=(0,s.useMemo)((()=>`sortboxlist-${r().create().hex}`),[]),{spec:A,logger:B}=(0,S.r)(d.d,{});return(0,f.jsx)(u.b,{menu:(0,f.jsx)(w,{selected:a,options:t,onSelect:(e,t)=>{i(e,t);const a=A.sortBySectionFactory().sortOptionFactory({identifier:e}).hitSort();B.logInteraction(a)},sortOrder:n,heading:e,enableViewModeMenu:y,onSelectViewMode:e=>{const t=A.viewAsSectionFactory().viewOptionFactory({identifier:e}).hitUiElementToggle();B.logInteraction(t)},id:C}),children:(e,t,s)=>(0,f.jsxs)("button",{className:R,onClick:e=>{h||(p?.(e),t(e))},ref:s,type:"button","aria-label":g,role:"combobox","aria-controls":C,"aria-expanded":e,children:[(0,f.jsx)(l.E,{"data-sortbox-label":!0,semanticColor:m,variant:o,className:E,children:a?.value||(y?b.text():"")}),y?b.icon():(0,f.jsx)(I,{isOpen:e,className:N})]})})}},13813:(e,t,a)=>{a.d(t,{N:()=>p});var s=a(97500),i=a.n(s),r=a(30758),n=a(86228),o=a(21082);const l="nLNTsyonBwoRIzAv1AME",c="E4I5I7G2CfW32hLWZaqE",d="w4ZoklZWkrsyrVA34vI8";var u=a(86070);const m=({title:e,uri:t,className:a,onClick:s,position:l})=>{const m=(0,r.useCallback)((e=>{s?.(e,{uri:t,position:l})}),[s,l,t]);return(0,u.jsx)(o.N,{"aria-label":e,className:i()(c,d,a),to:t,onClick:m,children:(0,u.jsx)(n.v,{as:"span",children:e})})};function h(e){return!!e.uri&&!!e.title}const p=({topics:e,className:t,onClick:a})=>(0,u.jsx)("div",{className:i()(l,t),children:e.filter(h).map(((e,t)=>{const s=`${e.uri}-${t}`;return(0,u.jsx)(m,{title:e.title,uri:e.uri,position:t,onClick:a},s)}))})},88986:(e,t,a)=>{a.d(t,{B:()=>R,q:()=>N});var s=a(30758),i=a(62411),r=a(91305),n=a(22726),o=a(99921),l=a(75040),c=a(65462),d=a(91676),u=a(33934),m=a(57239),h=a(23798),p=a(99730),g=a(27012),x=a(67668),y=a(55926),v=a(44825),b=a(44672),j=a(51354),f=a(86931),C=a(50671),w=a(21549),k=a(16157),S=a(15838),P=a(86070);function R(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}const E=e=>`activation-trigger-mme-${e}`,N=s.memo((function({index:e=-1,showMetadata:t,episode:a,usePlayContextItem:N,status:I,variant:A}){const B=(0,y.c)(),_=a.playedState.playPositionMilliseconds,T=a.uri,F=(0,s.useRef)(null),[M,D]=(0,s.useState)(a.playedState.state===k._w.Completed),{draggable:L,onDragStart:U}=(0,g.P)(),O=(0,x.V)(),z=(0,j.y)(),V=(0,i.wA)(),{UBIFragment:H,spec:G,logger:W}=(0,w.r)(r.d,{data:{uri:T,reason:a.requestId||"",position:e}}),q=(0,C.t)(G),{isActive:K,isPlaying:$,togglePlay:Y}=N({uri:T}),[X]=(0,f.S)(1e4,(e=>e?.item?.uri===T));(0,s.useEffect)((()=>{$&&(F.current=X)}),[$,X]),(0,s.useEffect)((()=>{!$&&F.current&&a.duration.milliseconds<=F.current&&D(!0)}),[$,a.duration.milliseconds]);const Q=(0,s.useCallback)((e=>{e||(F.current=0),D(e)}),[]),J=R(t),Z=(0,v.C)({...a,coverArt:{sources:a.coverArt}},J),ee=(0,s.useCallback)((()=>{if(a.episodeType===k.I_.Episode&&B)m.h.set((()=>({triggerId:E(a.uri),triggerAction:null})));else if(O)Z();else{let e;e=$?G.playButtonFactory().hitPause({itemToBePaused:T}):K?G.playButtonFactory().hitResume({itemToBeResumed:T}):G.playButtonFactory().hitPlay({itemToBePlayed:T});const t=W.logInteraction(e);Y({loggingParams:t})}}),[K,Z,Y,T,$,O,a,B,W,G]),te=(0,s.useCallback)((()=>{W.logInteraction(G.hitUiNavigate({destination:T}))}),[T,W,G]),ae=a.podcastSubscription?.isPaywalled??!1,se=a.podcastSubscription?.isUserSubscribed??!1,ie=ae&&!se,re=ae&&O,{badges:ne}=(0,S.b)({contentRating:a.contentRating?.label,isPaywalled:ae}),oe=(0,s.useCallback)((()=>V((0,o.Tf)(t.uri))),[t.uri,V]),le=(0,s.useCallback)((e=>{let s=e;return(ie||re)&&(s=(0,P.jsx)(h.N,{enabled:!0,showUri:a.podcast?.uri||t.uri,renderInline:!1,children:s})),!a.playability.playable&&ne.nineteen&&(s=(0,P.jsx)("div",{onClick:e=>{e.stopPropagation(),oe()},children:e})),s=(0,P.jsx)(l.k,{id:E(T),targetURI:(0,n.o_h)(T),children:s}),s}),[T,ie,re,t.uri,ne.nineteen,a.playability.playable,oe,a.podcast?.uri]);return(0,P.jsx)(H,{spec:G,children:(0,P.jsx)(b.pZ,{value:"row",index:e,children:(0,P.jsx)(c.h,{onShow:()=>{W.logInteraction(G.secondaryHitUiReveal())},menu:(0,P.jsx)(d.b,{uri:T,showUri:t.uri,sharingInfo:a.sharingInfo,isPlayed:M,onMarkAsPlayed:Q}),children:(0,P.jsx)(u.k,{ref:q,requestId:a.requestId,index:e,uri:T,size:z,images:a.coverArt||[],name:a.name,showName:a.podcast?.name||t.name,description:a.description,isPlayable:a.playability.playable||ie,fullyPlayed:M,durationMs:a.duration.milliseconds,releaseDate:a.releaseDate,resumePositionMs:F.current??_,draggable:L,handleDragStart:e=>{if(e.target!==e.currentTarget)return;const s=`${a.name} • ${t.name}`;U(e,{itemUris:[T],dragLabelText:s,contextUri:t.uri})},handlePlaybackClick:ee,handleClick:te,isCurrentlyPlaying:K,isPaywalled:ae,isUserSubscribed:se,isPlaying:$,position:$?X:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:Q,contentInformation:a.contentInformation,showUri:a.podcast?.uri||t.uri,mediaTypes:a.mediaTypes??void 0,badges:(0,P.jsx)(p.P,{episode:a}),playButtonWrapper:le,onMoreButtonClick:()=>{W.logInteraction(G.moreButtonFactory().hitUiReveal())},status:I,variant:A})})})})}))},6444:(e,t,a)=>{a.d(t,{_:()=>d});var s=a(30758),i=a(21743),r=a(97500),n=a.n(r);const o="eqw9lvuoZHrkWMTdyTpY",l="lb08f71wES9AQnKx6e0R";var c=a(86070);const d=(0,s.memo)((function(e){const{triggerOnInitialLoad:t=!1,onReachBottom:a,showScrollbar:r=!0,horizontalScroll:d=!1,className:u}=e,{ref:m,inView:h}=(0,i.Wx)({initialInView:t});return(0,s.useLayoutEffect)((()=>{h&&a&&a()}),[h,a]),(0,c.jsxs)("div",{className:n()({[l]:!r,[o]:d},u),"data-testid":"infinite-scroll-list",children:[e.children,(0,c.jsx)("div",{ref:m})]})}))},95204:(e,t,a)=>{function s(e){const t=new Date;return(e instanceof Date?e:new Date(e)).getTime()-t.getTime()}a.d(t,{u:()=>s})},41755:(e,t,a)=>{a.d(t,{v:()=>n});var s=a(57776),i=a(59147);const r=new s.l("internalLinkRecommenderShow","query","6c369ff272a666b31fef1629c169925a1bd80f372195396c82304142cacd89e8",null),n=(e,t)=>(0,i.I)(r,e,t)},80895:(e,t,a)=>{a.d(t,{K:()=>s});const s=e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"Podcast"===e.__typename;var t}},36213:(e,t,a)=>{a.d(t,{w:()=>d});var s=a(30758),i=a(3117),r=a(31417),n=a(53133),o=a(74008),l=a(48905),c=a(21549);const d=({uri:e,isBook:t})=>{const{add:a,remove:d}=(0,l.p)("prerelease"),u=(0,o.o)("prerelease",[e]).at(0),{enqueueSnackbar:m}=(0,n.d)(),{spec:h,logger:p}=(0,c.r)(i.k,{data:{uri:e}});return{isPreSaved:u,addPresave:(0,s.useCallback)((async()=>{p.logInteraction(h.actionBarFactory().preSaveButtonFactory().hitPresave({prereleaseId:e,itemToBePresaved:e,contextUri:e})),await a(e),m(t?r.Ru.get("web-player.prerelease.audiobook_feedback_presaved"):r.Ru.get("web-player.prerelease.album_feedback_presaved"))}),[a,m,t,p,h,e]),removePresave:(0,s.useCallback)((async()=>{p.logInteraction(h.actionBarFactory().preSaveButtonFactory().hitRemovePresave({prereleaseId:e,itemToBeRemovedFromPresaved:e,contextUri:e})),await d(e)}),[p,d,h,e])}}},11010:(e,t,a)=>{a.r(t),a.d(t,{default:()=>zs});var s=a(30758),i=a(85387),r=a(24466),n=a(69707),o=a(22726),l=a(31417),c=a(15292),d=a(92202),u=a(97500),m=a.n(u),h=a(62411),p=a(95530),g=a(14343),x=a(37475),y=a(33641),v=a(98293),b=a(38157),j=a(75830),f=a(62648),C=a(13813),w=a(88751),k=a(36685),S=a(34733),P=a(64281),R=a(99041),E=a(32255),N=a(69624),I=a(18663),A=a(50866),B=a(7307),_=a(15838);const T="Bns6t3CfzQaCA4DLRzPQ",F="zGFcpmwFVhJxRDXUXoXA",M="_FLyhB96W9W0msGYNWUl",D="Si5iVyGLDY7mGWH_U2wA",L="HLBtD6mJyIB9EeOzDtXE",U="DRO0ur1WXqpK9BelywtE",O="vtlBEOtYFwv1cxC32ccc",z="Pq_DZj9ECxwTsK8pBxe0",V="bu7LVUNyDPF_FcrKMv74",H="bYP2npsc_CeChpMGcr6g",G="Ux7aVnDYlwojS4AmkSLg";var W=a(86070);let q=function(e){return e.SMALL="small",e.LARGE="large",e}({});const K=({images:e,title:t,contentRating:a,duration:s,moreButton:i,onClick:r,onContextMenu:n,onTouchStart:o,onTouchEnd:l,isPlaying:c,isActive:d,size:u,className:h,label:p,isPlayable:g=!0})=>{const x=u===q.LARGE?"medium":"small",{badges:y}=(0,_.b)({contentRating:a});return(0,W.jsxs)("div",{"data-testid":"trailer-component",className:m()(T,h,{[F]:d}),onContextMenu:n,onTouchStart:o,onTouchEnd:l,children:[(0,W.jsxs)("div",{className:D,children:[(0,W.jsxs)("div",{className:z,children:[(0,W.jsx)(E.b,{type:B.c.EPISODE,title:t,className:m()(O,{[G]:u===q.SMALL,[H]:u===q.LARGE}),size:N.Qe.SIZE_56,images:e,shape:E.u.ROUNDED_CORNERS}),(0,W.jsx)("div",{className:V,children:(0,W.jsx)(S.R,{"data-testid":"trailer-play-button",version:k.H4.transparent,size:x,isPlaying:c,onClick:r,disabled:!g})})]}),(0,W.jsxs)("div",{children:[(0,W.jsx)("div",{className:L,children:(0,W.jsx)(w.Z,{dir:"auto",className:M,variant:"balladBold",children:t})}),(0,W.jsxs)("div",{className:U,children:[(0,W.jsx)(P.E,{text:p}),y.explicit&&(0,W.jsx)(R.U,{}),y.nineteen&&(0,W.jsx)(I.q,{}),(0,W.jsx)(w.Z,{dir:"auto",variant:"mesto",children:(0,W.jsx)(A.d,{durationMs:s})})]})]})]}),i]})};var $=a(13922),Y=a(33329);const X=({htmlDescription:e,narrators:t,spec:a,isPreRelease:i})=>{const r=(0,Y.s)(),n=(0,s.useCallback)((e=>{const t=a.seeMoreButtonFactory();r.logInteraction(e?t.hitUiReveal():t.hitUiHide())}),[r,a]);return(0,W.jsxs)(W.Fragment,{children:[t.length?(0,W.jsx)(p.E,{as:"p",variant:"bodyMedium",children:l.Ru.get("web-player.audiobooks.narratedByX",t.join(l.Ru.getSeparator()))}):null,e&&(0,W.jsx)($.N,{maxLines:4,content:e,htmlContent:e,onExpanded:n,isOpen:i||null})]})};var Q=a(12662),J=a(88260),Z=a(60038),ee=a(83352),te=a(23432),ae=a(47863),se=a(21951),ie=a(79401),re=a(79678),ne=a(55769);const oe="myIGgR3zdb9nFuJ1pXYl",le="e74TmRHu_W1yZHspTBmR",ce="rrcjfInomKt1lXRDRdR8",de="Wj9mxFJDtPdiMcUtS1te",ue="SCwESjClY3m_9JlV2L7S",me="Yoa_yG2jhELT4w9wJpHf",he="xsw253oiwmIAafVfjl1J",pe="JPqnsg5dgBTzsEoClLmD",ge="bhuRgaz03VXMf0mOG3Q2",xe="GP_qgmZlmL0CJ9r22AD9",ye="bilV2VquzmEnhV4d97Tc",ve="caqddwmUJf4ix6GI84NX",be=({explicit:e,durationMs:t,publishDate:a,preReleaseEndDateTime:s,isPreRelease:i,uri:r,isPlaying:n})=>{const o=(0,re.p)(r),{isMarkedAsFinished:c}=(0,ie.z)(r);let d;return i&&s?d=l.Ru.get("web-player.prerelease.releases_on",{date:l.Ru.formatDate(s)}):!i&&a&&(d=l.Ru.formatDate(a)),(0,W.jsxs)("div",{className:ge,children:[e&&(0,W.jsx)(R.U,{className:ve}),(0,W.jsxs)("div",{className:xe,children:[d&&(0,W.jsx)(p.E,{variant:"bodySmall",className:ye,children:d}),t?(0,W.jsxs)(W.Fragment,{children:[o?.playPositionMilliseconds?(0,W.jsx)(p.E,{variant:"bodySmall",className:ye,children:(0,W.jsx)(A.d,{durationMs:t})}):null,(0,W.jsx)(ne.j,{isPlaying:n,fullyPlayed:c,durationMs:t,position:o?.playPositionMilliseconds})]}):null]})]})};var je=a(86677),fe=a(11584);const Ce=(0,s.createContext)(null),we=({children:e,isPreRelease:t})=>{const[a,i]=(0,s.useState)(!t),r=(0,s.useMemo)((()=>({isPreRelease:t,isCountdownFinished:a,setCountdownFinished:()=>i(!0)})),[t,a,i]);return(0,W.jsx)(Ce.Provider,{value:r,children:e})};function ke(){const e=(0,s.useContext)(Ce);if(null===e)throw new Error("Trying to use 'PreRealeaseCountdownContext' without 'PreRealeaseCountdownProvider'!");return e}var Se=a(96571);const Pe="nz8Wc80RAtdAb3yU9FxM",Re=({uri:e})=>{const{isCountdownFinished:t}=ke(),{invalidateCache:a}=(0,Se.W)(e);return(0,W.jsx)("div",{className:Pe,children:t?(0,W.jsx)(je.$,{onClick:a,children:l.Ru.get("web-player.audiobooks.goToAudiobook")}):(0,W.jsx)(fe.v,{uri:e,isBook:!0})})};var Ee=a(35895),Ne=a(40638),Ie=a(53133),Ae=a(67668),Be=a(41833);const _e="NQAShVY0o7RQ2bCTDSkw";function Te({uri:e,price:t,size:a,spec:s,logger:i,onPlayback:r}){const{enqueueSnackbar:n}=(0,Ie.d)(),o=(0,Ae.V)(),c=0===t?.finalPrice?.amount,d=c?s.getButtonFactory({uri:e}):s.buyButtonFactory({uri:e}),u=(0,Ne.YQ)((async()=>{if(i.logInteraction(d.hitShowPaywall({paywalledItem:e})),o)r();else{try{t?.finalPrice?await(0,Be.S)({show_uri:e,currency:t.finalPrice.currency,price:t.finalPrice.amount}):n(l.Ru.get("error.generic"))}catch(e){n(l.Ru.get("error.generic"))}r()}}),2e3,{leading:!0,trailing:!1});return(0,W.jsx)(je.$,{size:a,className:_e,style:{flexShrink:0},onClick:u,children:c?l.Ru.get("web-player.audiobooks.buyFree"):l.Ru.get("web-player.audiobooks.buy")})}const Fe=({uri:e,isLocked:t,price:a,isPlaying:s,isConsumptionCapped:i,onPlayback:r,logger:n,spec:o,size:l="large"})=>t&&!i?(0,W.jsx)(Te,{size:l,uri:e,price:a,logger:n,spec:o,onPlayback:r}):(0,W.jsx)(Ee.D,{size:l,isPlaying:s,uri:e,onClick:r});var Me=a(86568),De=a(29368),Le=a(39566),Ue=a(24533),Oe=a(35035),ze=a(21549);const Ve="8px",He=s.memo((function({backgroundColor:e,uri:t,name:a,isPlaying:i,togglePlay:r,isLocked:n,isSaved:o,consumptionCapExplanation:c,price:d,spec:u,isExplicit:m,publishDate:p,preReleaseEndDateTime:g,duration:x}){const[y,f]=(0,Ue.A)(t,o),C=!(0,Le.n)(),{isPreRelease:w}=ke(),k=(0,h.wA)(),S=(0,Y.s)(),P=(0,Me.d$)(),{spec:R,logger:E}=(0,ze.r)(Q.e,{data:{uri:t}});(0,s.useEffect)((()=>{P&&E.logImpression(R.impression())}),[P,E,R]);const N=(0,s.useCallback)((()=>{const e=u.saveToLibraryButtonFactory();y?S.logInteraction(e.hitUnfollow({itemToBeUnfollowed:t})):(S.logInteraction(e.hitFollow({itemToBeFollowed:t})),P&&E.logInteraction(R.hitFollow({itemToBeFollowed:t}))),f(!y)}),[t,y,u,f,S,P,E,R]),I=(0,s.useCallback)(((e,a)=>{const s=u.downloadButtonFactory();c?k((0,v._3)(c)):a===Oe.NV.ADD?S.logInteraction(s.hitDownload({itemToDownload:t})):a===Oe.NV.REMOVE?S.logInteraction(s.hitRemoveDownload({itemToRemoveFromDownloads:t})):a===Oe.NV.NO_PERMISSION&&S.logInteraction(s.hitUiReveal())}),[c,k,S,u,t]),A=(0,s.useCallback)((()=>{const e=u.contextButtonFactory().hitUiReveal();S.logInteraction(e)}),[S,u]),B=(0,De.j)(),_=!!c,T=!n&&!_;return(0,W.jsxs)(J.E,{backgroundColor:e,style:{"--action-bar-padding-bottom":Ve},children:[(0,W.jsx)(Z.S,{testId:"book-action-bar-metadata",children:(0,W.jsx)(be,{explicit:m,publishDate:p,preReleaseEndDateTime:g,durationMs:x,isPreRelease:w,uri:t,isPlaying:i})}),(0,W.jsxs)(Z.S,{children:[w&&(0,W.jsx)(Re,{uri:t}),!w&&(0,W.jsx)(Fe,{uri:t,isLocked:n,isConsumptionCapped:_,price:d,isPlaying:i,onPlayback:r,logger:S,spec:u,size:B}),!w&&(0,W.jsx)(se.e,{children:(0,W.jsx)(ee.M,{isAdded:y,onClick:N,disabled:C,size:B,condensed:!0})},"follow-button"),(0,W.jsx)(te.I,{uri:t,onClick:I,size:B,canDownload:T}),(0,W.jsx)(j.b,{menu:(0,W.jsx)(ae.p,{uri:t,isPreRelease:w}),children:(0,W.jsx)(b.e,{label:l.Ru.get("more.label.context",a),onClick:A,size:B})})]})]})}));var Ge=a(65462),We=a(43673),qe=a(76123),Ke=a(25577),$e=a(17843),Ye=a(88711),Xe=a(46110),Qe=a(1246),Je=a(73658),Ze=a(2070),et=a(1227),tt=a(62986),at=a(98712),st=a(51354);const it="BBK_i9SHovXTLVjas0kc",rt=s.memo((function({coverArt:e,name:t,authorName:a,uri:s,backgroundColor:i,isPlaying:r,togglePlay:n,isLocked:o,price:c,isConsumptionCapped:d,logger:u,spec:m,preReleaseEndDateTime:h}){const g=(0,st.y)(),x=g===at.E.SMALL||g===at.E.XSMALL,{isPreRelease:y,setCountdownFinished:v}=ke(),b=y&&x,j=(0,W.jsx)(ae.p,{uri:s});return(0,W.jsxs)(Ke.z,{backgroundColor:i,size:y?Ke.K.XLARGE:Ke.K.DEFAULT,children:[(0,W.jsxs)(Xe.h,{children:[y&&(0,W.jsx)(Re,{uri:s}),!y&&(0,W.jsx)(Fe,{uri:s,isLocked:o,price:c,isPlaying:r,isConsumptionCapped:d,onPlayback:n,logger:u,spec:m,size:"medium"}),(0,W.jsx)(Ge.h,{menu:j,children:(0,W.jsx)(Qe.X,{text:t,dragUri:s,dragLabel:t})})]}),!b&&(0,W.jsx)(Ge.h,{menu:j,children:(0,W.jsx)($e.K,{images:e,name:t,dragUri:s,dragMimeType:qe.fl.AUDIOBOOKS,shape:E.u.SQUARE})}),(0,W.jsxs)(Ye.Y,{children:[(0,W.jsx)(Ze.B,{children:l.Ru.get("web-player.audiobooks.audiobook")}),(0,W.jsx)(Ge.h,{menu:j,children:(0,W.jsx)(tt.mm,{canEdit:!1,onClick:()=>{},scaleAtMinWidth:tt.tw,dragUri:s,dragMimeType:qe.fl.AUDIOBOOKS,dragLabel:t,children:t})}),y?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(Je.X,{children:(0,W.jsx)(p.E,{className:it,variant:"bodySmallBold","data-testid":"entityAuthor",children:a})}),h&&(0,W.jsx)(We.G,{targetDate:h,images:b?e:[],imageTitle:t,onComplete:v})]}):(0,W.jsx)(et.g,{children:a})]})]})})),nt="pwjwUMaZVoJ0wBcQlIDf",ot=s.memo((({price:e})=>e.finalPrice&&e.finalListPrice?0===e.finalPrice.amount&&0===e.finalListPrice.amount?(0,W.jsxs)("div",{className:nt,children:[(0,W.jsx)(p.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:l.Ru.get("audiobook.freePriceDescription")}),(0,W.jsx)(p.E,{variant:"bodySmall",children:l.Ru.get("audiobook.freePriceExplanation")})]}):(0,W.jsxs)("div",{className:nt,children:[(0,W.jsx)(p.E,{variant:"titleSmall",semanticColor:"textBase",children:e.finalPrice.formattedPrice}),e.finalPrice.amount<e.finalListPrice.amount&&(0,W.jsx)(p.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:l.Ru.get("web-player.audiobooks.retailPrice",(0,W.jsx)("span",{style:{textDecoration:"line-through"},children:e.finalListPrice.formattedPrice}))})]}):null));var lt=a(23041),ct=a(97848),dt=a(53187),ut=a(20829),mt=a(58685),ht=a(24620);const pt="XzRW0BrBLoXKWET5f8m4",gt="ooqITYCPJKua4e5yv8_9",xt="zN8lTnSnAUSRAMPb7XYV",yt="llVyicNXe8z0QAnoRur1",vt="fCrjgF2UgDUWjtqWls4Q",bt="CLnKy_BRVtIluLfBWy5t",jt="RZa0qnXymlZCoGOdE03d",ft="RFXE57hUzWvvK4_7GX13",Ct="ALQqkJiR2lZOSYvhHesh",wt="BQwrI2BbKK4n451iu2QC",kt="VYLq_YaQVNISHPQOu2af",St=s.memo((function({name:e,duration:t,uri:a,bookName:i,usePlayContextItem:r,isChapterLocked:n,isPlayable:o,resumePositionMs:c,isFullyPlayed:d,isExplicit:u,is19PlusOnly:g,spec:x,index:y,consumptionCapExplanation:b}){const C=(0,s.useRef)(c),{isPlaying:w,togglePlay:k,isActive:P}=r({uri:a}),E=(0,Y.s)(),N=(0,Ae.V)(),B=(0,h.wA)(),_=(0,mt.o)((e=>{if(e?.item?.uri===a){const t=(0,ht.s)(e)??0;return C.current=t,t}return 0})),T=(0,s.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),F=(0,s.useCallback)((e=>{if(T(e),b&&!N)return void B((0,v._3)(b));const t=x.chapterBlockFactory({position:y,uri:a}).playButtonFactory();if(n)E.logInteraction(t.hitShowPaywall({paywalledItem:a}));else{const e=(0,ut.$I)({isPlaying:w,isActive:P,spec:t,logger:E,uri:a});k({loggingParams:e})}}),[b,B,y,P,N,n,w,E,x,T,k,a]),M=(0,s.useCallback)((()=>{const e=x.chapterBlockFactory({position:y,uri:a}).secondaryHitUiReveal();E.logInteraction(e)}),[y,E,x,a]),D=(0,s.useCallback)((e=>{T(e);const t=x.chapterBlockFactory({position:y,uri:a}).contextMenuFactory().hitUiReveal();E.logInteraction(t)}),[y,E,x,T,a]),L=!(n||b),U=(0,W.jsx)(lt.d,{className:m()({[gt]:P}),children:e}),O=(0,W.jsxs)("div",{className:bt,children:[u&&(0,W.jsx)(R.U,{fullText:!0}),g&&(0,W.jsx)(I.q,{size:16}),(0,W.jsxs)("div",{className:jt,children:[C.current?(0,W.jsx)(p.E,{variant:"bodySmall",className:kt,children:(0,W.jsx)(A.d,{durationMs:t.milliseconds})}):null,(0,W.jsx)(ne.j,{isPlaying:w,fullyPlayed:d,durationMs:t.milliseconds,resumePositionMs:C.current,position:w?_:void 0})]})]}),z=(0,W.jsxs)("div",{className:Ct,children:[(0,W.jsx)("div",{className:wt,children:L?(0,W.jsx)(j.b,{menu:(0,W.jsx)(f.r,{uri:a}),children:(0,W.jsx)(dt.e,{className:vt,size:dt.M.xs,label:l.Ru.get("more.label.context",e),onClick:D})}):null}),(0,W.jsx)("div",{className:ft,children:(0,W.jsx)(S.R,{size:"small",version:S.H.secondary,onClick:F,isPlaying:w,ariaPlayLabel:l.Ru.get("tracklist.a11y.play",e,i),ariaPauseLabel:l.Ru.get("tracklist.a11y.pause",e,i),locked:n&&!b,disabled:!o&&!(n||b)})})]}),V=(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("hr",{className:xt,"aria-hidden":!0}),(0,W.jsx)(ct.v,{id:`chapter-${y}`,title:U,body:O,footer:z,onDoubleClick:e=>{F(e)},className:pt})]});return L?(0,W.jsx)(Ge.h,{menu:(0,W.jsx)(f.r,{uri:a}),onShow:M,children:(0,W.jsx)("div",{className:yt,children:V})}):(0,W.jsx)("div",{className:yt,children:V})}));var Pt=a(6444),Rt=a(62270);var Et=a(41031);const Nt=({bookUri:e,bookName:t,sampleUri:a,isFinishedUnlockingJourney:i,usePlayContextItem:r,spec:n,consumptionCapExplanation:o})=>{const l=function(e,t){const a=(0,Rt.T)();return(0,s.useCallback)((async(s,i)=>a.getBookContents(e,{offset:s,limit:i,doRefreshSubscription:t})),[t,a,e])}(e,i),c=(0,s.useRef)(!1),d=(0,s.useRef)(0),{isMarkedAsFinished:u}=(0,ie.z)(e),[m,h]=(0,s.useState)([]),p=(0,s.useCallback)((e=>e?.uri===a),[a]),g=(0,s.useCallback)((e=>(e=>null!==e)(e)&&!p(e)),[p]),x=(0,s.useCallback)((()=>{l&&(c.current||null===d.current||(c.current=!0,l(d.current,50).then((e=>{c.current=!1,d.current=e.nextOffset,e.items.length>0&&h((t=>t.concat(e.items.filter(g))))}))))}),[l,g]);return(0,s.useEffect)((()=>{d.current=0,h([])}),[e]),(0,W.jsx)("ul",{children:(0,W.jsx)(Pt._,{onReachBottom:x,triggerOnInitialLoad:!0,children:m.map(((e,a)=>{const{name:s,duration:i,uri:l,playability:{playable:c},playedState:{playPositionMilliseconds:d,state:m},isExplicit:h,is19PlusOnly:p}=e,g=m===Et._w.Completed||u,x=function(e){return!e.playability?.playable&&(e.playability?.reason===Et.Uk.PaymentRequired||e.playability?.reason===Et.Uk.Anonymous)}(e);return(0,W.jsx)(St,{name:s,duration:i,uri:l,bookName:t,usePlayContextItem:r,isPlayable:c,isChapterLocked:x,consumptionCapExplanation:o,resumePositionMs:d,isFullyPlayed:g,isExplicit:h,is19PlusOnly:p,spec:n,index:a},l)}))})})};var It=a(91182),At=a(58337),Bt=a(38501),_t=a(88007),Tt=a(83330),Ft=a(75947);const Mt="_yl4tOZxcpoUt28k6B8I",Dt="lcJflizNrSwDM9yPNk6h",Lt="ret7iHkCxcJvsZU14oPY",Ut=({rating:e,className:t,onClick:a})=>{if(!e)return null;const s=Boolean(e.rating?.rating);return(0,W.jsxs)("button",{className:m()(Mt,t),onClick:a,children:[(0,W.jsx)(w.Z,{dir:"auto",variant:"mestoBold",children:e.averageRating?.showAverage?l.Ru.formatNumber(e.averageRating.average,{maximumFractionDigits:1}):l.Ru.get("web-player.audiobooks.noRating")}),s?(0,W.jsx)(Tt.j,{iconSize:16,className:m()(Dt)}):(0,W.jsx)(Ft.a,{iconSize:16,className:m()(Dt)}),e.averageRating?.showAverage&&(0,W.jsxs)(w.Z,{variant:"mesto",className:m()(Lt),children:["(",l.Ru.formatNumberCompact(Number(e.averageRating.totalRatings)),")"]})]})};var Ot=a(622),zt=a(28340),Vt=a(25357),Ht=a(56970);const Gt={shuffle:!1,repeat:Vt.p.REPEAT_NONE},Wt=s.memo((function({metadata:e}){const{uri:t,coverArt:a,name:r,htmlDescriptionPlain:o,authorName:d,sample:u,narrators:w,rating:k,isExplicit:S,duration:P,copyrights:R,publishDate:E,price:N,isLocked:I,isSaved:A,consumptionCapExplanation:_,signifierText:T,resumeEpisodeLink:F,topics:M,isPreRelease:D,preReleaseEndDateTime:L}=e,{search:U}=(0,i.zy)(),O=!!new URLSearchParams(U).get("isUnlockingAudiobook"),z=!(!(0,Ot.Z)(O)||O),V=(0,Ae.V)(),H=(0,At.H)(a[0]?.url),G=(0,h.wA)(),$=(0,g.NC)(Bt.NzS,{loadingValue:!1}),{spec:Y,logger:Q}=(0,ze.r)(x.U,{data:{uri:t,identifier:n.$h.PODCAST_SHOW_AUDIOBOOK}}),{spec:J,logger:Z}=(0,ze.r)(x.U,{data:{uri:t,identifier:n.$h.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK}}),{spec:ee,logger:te}=(0,ze.r)(y.Y,{data:{uri:t,identifier:n.$h.PODCAST_SHOW_AUDIOBOOK}}),ae=(0,s.useMemo)((()=>Y.actionBarFactory()),[Y]),se=(0,s.useMemo)((()=>J.aboutSectionFactory()),[J]),ie=(0,s.useMemo)((()=>Y.chapterListFactory()),[Y]);(0,s.useEffect)((()=>{I&&te.logImpression(ee.impression())}),[ee,te,I]);const{isPlaying:re,togglePlay:ne,usePlayContextItem:ge,isActive:xe,triggerPlay:ye}=(0,zt.P)({uri:t},{featureIdentifier:"audiobook"},Gt),{togglePlay:ve,isPlaying:be,isActive:je}=(0,zt.P)({uri:u?.uri??"",pages:[{items:[{uri:u?.uri??"",uid:u?.uri??"",type:B.c.CHAPTER,provider:null,metadata:D?{is_pre_release:"true",type:"trailer"}:void 0}]}]},{featureIdentifier:"audiobook"},Gt),fe=re&&!be,Ce=xe&&!je,ke=(0,s.useCallback)((async()=>{const e=Y.actionBarFactory().playButtonFactory();if(_&&!V)return Q.logInteraction(e.hitShowPaywall({paywalledItem:t})),void G((0,v._3)(_));if(!I||V)if(V)ne();else{const a=(0,ut.$I)({isPlaying:fe,isActive:Ce,spec:e,logger:Q,uri:t});Ce?ne({loggingParams:a}):ye({skipTo:F?{uri:F}:void 0,loggingParams:a})}}),[Y,_,V,I,Q,t,G,ne,fe,Ce,ye,F]),Se=(0,s.useCallback)((()=>{u?.uri&&ve()}),[ve,u?.uri]),Pe=(0,s.useCallback)((()=>{const a=se.ratingButtonFactory().hitUiReveal();Z.logInteraction(a),G((0,v.eH)(t,e))}),[se,G,e,Z,t]),Re=(0,st.y)(),Ee=I&&!_&&N;return(0,W.jsx)("section",{className:oe,children:(0,W.jsxs)(we,{isPreRelease:D,children:[(0,W.jsx)(c.Q,{children:(0,Ht.hV)({showOrAudiobookName:r,type:"Audiobook"})}),(0,W.jsx)(It.c,{artistOrShow:d,title:r,uri:t,entityType:It.p.AUDIOBOOK}),(0,W.jsx)(rt,{name:r,authorName:d,uri:t,coverArt:a,backgroundColor:H,togglePlay:ke,isPlaying:fe,isLocked:I,isConsumptionCapped:!!_,price:N,logger:Q,spec:Y.actionBarFactory(),preReleaseEndDateTime:L}),(0,W.jsx)(He,{name:r,backgroundColor:H,uri:t,togglePlay:ke,isPlaying:fe,isLocked:I,isSaved:A,consumptionCapExplanation:_,isExplicit:S,duration:P,publishDate:E,preReleaseEndDateTime:L,price:N,spec:ae}),(0,W.jsxs)("div",{className:m()(le,"contentSpacing",{[ce]:Re===at.E.LARGE}),children:[(0,W.jsxs)("div",{className:de,children:[(0,W.jsxs)("div",{className:pe,children:[T&&(0,W.jsx)(p.E,{variant:"bodyMedium",as:"p",semanticColor:"textBrightAccent",children:T}),!T&&Ee&&(0,W.jsx)(ot,{price:N})]}),(0,W.jsx)(X,{htmlDescription:o,narrators:w,spec:se,isPreRelease:D??!1})]}),(0,W.jsxs)("div",{className:ue,children:[u?.isPlayable&&(0,W.jsx)(K,{label:l.Ru.get("audiobook.page.sample"),images:u.coverArt,title:u.name,duration:u.duration.milliseconds,moreButton:I?null:(0,W.jsx)(j.b,{menu:(0,W.jsx)(f.r,{uri:u.uri}),children:(0,W.jsx)(b.e,{})}),onClick:Se,isPlaying:be,isActive:je,size:q.LARGE,contentRating:u.contentRating?.label,isPlayable:u.isPlayable}),!D&&(0,W.jsx)("div",{className:me,children:(0,W.jsx)(Ut,{rating:k,onClick:Pe})}),M.length>0&&(0,W.jsx)(C.N,{topics:M})]}),(0,W.jsxs)("div",{className:he,children:[!D&&(0,W.jsx)(Nt,{bookUri:t,bookName:r,sampleUri:u?.uri,isFinishedUnlockingJourney:z,usePlayContextItem:ge,spec:ie,consumptionCapExplanation:_},`${t}-${I}-${!!_}`),$&&(0,W.jsx)(_t.Z,{copyrights:R})]})]})]})})}));var qt=a(2983),Kt=a(29454),$t=a(86236);const Yt=({uri:e,name:t,isSaved:a,backgroundColor:i,spec:r})=>{const n=(0,Y.s)(),o=!(0,Le.n)(),[c,d]=(0,Ue.A)(e,a),u=(0,Me.d$)(),{spec:m,logger:h}=(0,ze.r)(Q.e,{data:{uri:e}});(0,s.useEffect)((()=>{u&&h.logImpression(m.impression())}),[u,h,m]);const p=(0,s.useCallback)((()=>{const t=r.followButtonFactory();n.logInteraction(c?t.hitUnfollow({itemToBeUnfollowed:e}):t.hitFollow({itemToBeFollowed:e})),!c&&u&&h.logInteraction(m.hitFollow({itemToBeFollowed:e})),d(!c)}),[e,c,r,n,d,u,h,m]),g=(0,s.useCallback)((()=>{n.logInteraction(r.contextButtonFactory().hitUiReveal())}),[n,r]),x=(0,De.j)();return(0,W.jsx)(J.E,{backgroundColor:i,children:(0,W.jsxs)(Z.S,{children:[(0,W.jsx)(se.e,{children:(0,W.jsx)($t.W,{isFollowing:c,onClick:p,disabled:o})},"follow-button"),(0,W.jsx)(j.b,{menu:(0,W.jsx)(Kt.H,{uri:e}),onShow:g,children:(0,W.jsx)(b.e,{label:l.Ru.get("more.label.context",t),size:x})})]})})};var Xt=a(87150),Qt=a(82300),Jt=a(16753),Zt=a(42814),ea=a(68750),ta=a(13353),aa=a(555),sa=a(21082),ia=a(29195);const ra="BknvXMyUnN3fQCz8mvLI",na="slMInsl3HL9_02zHT22R",oa="40px",la=({leavebehinds:e})=>{let t;return 1===e.length&&(t=(0,W.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser})),2===e.length&&(t=l.Ru.get("podcast-ads.recent_ads_just_two",(0,W.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser}),(0,W.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[1].advertiser}))),e.length>2&&(t=l.Ru.get("podcast-ads.recent_ads_more_than_two",(0,W.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser}),(0,W.jsx)(p.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[1].advertiser}))),(0,W.jsxs)(p.E,{variant:"bodySmall",semanticColor:"textSubdued","data-testid":"show-leavebehinds-text",children:[l.Ru.get("podcast-ads.recent_ads_from"),t]})},ca=({leavebehinds:e,uri:t,surface:a})=>{const i=(0,ia.vh)();if((0,s.useEffect)((()=>{t&&e.length>0&&i.send((0,Zt.x)({leavebehind_request_id:e[0].requestId,event:"event_viewed",event_reason:`viewed_on_${(0,ea.Fh)(a).toLowerCase()}`,surface:(0,ea.Fh)(a),uri:t}))}),[i,e,t,a]),0===e.length)return null;const r=(0,o.o_h)(t)?.id,n=1===e.length?e[0].clickthroughUrl:(0,ta.q)(r),c=aa.Qd,d=e.length>c,u=e.length-(c-1),m=e.slice(0,d?c-1:c);return(0,W.jsx)(sa.N,{to:n,pathname:e.length>1?n:void 0,state:{uri:t},className:na,onClick:()=>i.send((0,Zt.x)({leavebehind_request_id:e[0].requestId,event:"event_clicked",event_reason:"cta_see_all",surface:(0,ea.Fh)(a),uri:t})),"data-testid":"show-leavebehinds-container",children:(0,W.jsx)(ct.v,{layout:"wide",variant:"tinted",size:"xl",id:"show-leavebehinds",title:(0,W.jsxs)("div",{className:ra,"data-testid":"show-leavebehinds-logos-container",children:[m.map((e=>(0,W.jsx)(Qt.C,{"data-testid":"show-leavebehind-image",src:e.displayImage.src,alt:e.displayImage.alt,imageHeight:oa,imageWidth:oa},e.adId))),d?(0,W.jsx)(da,{"data-testid":"show-leavebehinds-more-count-indicator",variant:"tinted",minBlockSize:oa,borderRadius:"4px",padding:"6px",children:(0,W.jsx)(p.E,{variant:"bodyMedium","data-testid":"show-leavebehinds-more-count-indicator-text",children:l.Ru.get("podcast-ads.show_more_indicator",u)})}):null]}),body:(0,W.jsx)(la,{leavebehinds:e})})})};var da=(0,Xt.Ay)(Jt.a).withConfig({displayName:"LeavebehindsPreview___StyledBox",componentId:"sc-qakd80-0"})({backgroundColor:"#121212",width:"40px",display:"flex",alignItems:"center",justifyContent:"center"}),ua=a(64652);const ma=ea.ui.SHOW_PAGE;function ha({uri:e}){const{data:t,error:a,getLeavebehinds:i}=(0,ua.A)({surface:ma,uri:e});(0,s.useEffect)((()=>{i()}),[i]);const r=(0,s.useMemo)((()=>t?(0,aa.iT)(t,e):[]),[t?.requestId]);return a||t?.leavebehindAds&&t?.leavebehindAds?.length<1?null:(0,W.jsx)(ca,{leavebehinds:r,uri:e,surface:ma})}var pa=a(91676),ga=a(90559),xa=a(74024),ya=a(64094),va=a(30343),ba=a(78464),ja=a(41755),fa=a(71056),Ca=a(80895),wa=a(92255),ka=a(16717);const Sa=({className:e,title:t,uri:a})=>{const{data:s}=(0,ja.v)({uri:a}),i=s?.seoRecommendedPodcast.totalCount,r=s?.seoRecommendedPodcast.items,n=function(e){return(e||[]).filter((e=>(0,Ca.K)(e.data)))}(r);if(0===i)return null;const c=(0,o.o_h)(a)?.id;return(0,W.jsx)(wa.$,{className:e,title:t,seeAllLabel:l.Ru.get("shelf.see-all"),total:i,alwaysShowSeeAll:!0,seeAllUri:`spotify:app:show:${c}:more-like-this`,children:n?.map((({data:e},t)=>(0,W.jsx)(va.o,{uri:e.uri,name:e.name,images:e.coverArt?.sources||[],publisher:e.publisher?.name??"",sharingInfo:null,mediaType:(0,ka.w)(e.mediaType),index:t},e.uri)))})},Pa=e=>{const t=(0,fa.D)({entityType:B.c.SHOW,componentType:"shelf",uri:e.uri});return(0,W.jsx)(ba.s,{onError:t,children:(0,W.jsx)(Sa,{...e})})};var Ra=a(62814),Ea=a(88986),Na=a(86228),Ia=a(81670),Aa=a(55645),Ba=a(26413);const _a=(0,s.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),Ta=s.memo((function({uri:e,children:t}){return(0,W.jsx)(Ba.E,{uri:e,defaultState:[],sortContext:_a,localStorageKey:"showFilterParams-v2",children:t})}));var Fa=a(96057);const Ma={field:Fa.WY.PUBLISH_DATE,order:Fa.AX.DESC},Da={field:Fa.WY.PUBLISH_DATE,order:Fa.AX.ASC},La=Da,Ua={episodic:Ma,sequential:Da,recent:Ma};function Oa(){return new Map([[Ma,{key:"newest-to-oldest",value:l.Ru.get("shows.sort.newest-to-oldest")}],[Da,{key:"oldest-to-newest",value:l.Ru.get("shows.sort.oldest-to-newest")}]])}function za(e){return Ua[e]}const Va=(0,s.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowSortProvider")},sortState:za("recent")}),Ha=e=>{const t=Oa();return Array.from(t.keys()).some((({field:t})=>t===e?.field))},Ga=s.memo((function({uri:e,children:t,defaultSortParam:a}){return(0,W.jsx)(Ba.E,{uri:e,defaultState:a,sortContext:Va,localStorageKey:"showSortParam",validator:Ha,children:t})}));var Wa=a(55926),qa=a(44672),Ka=a(13295),$a=a(88308);const Ya="ysJC093hc_2ixGCy40_s",Xa="mJP3Bamg3hN7S0p7XKfN",Qa="clPqCj1L_KSfoVuTuP6x",Ja="vqQmhCMZq7eUtTV7YYOQ",Za=s.memo((function({showMetadata:e,usePlayContextItem:t}){const{sortState:a}=(0,s.useContext)(Va),{sortState:i}=(0,s.useContext)(_a),r=function(e,t,a){const s=(0,Rt.T)(),{canSort:i}=s.capabilities,r=(0,$a.U0)((async(i,r)=>s.getContents(e,{offset:i,limit:r,sort:t,filters:a})),[s,e,t,a]),n=(0,$a.U0)((async(t,a)=>s.getContents(e,{offset:t,limit:a})),[s,e]);return i?r:n}(e.uri,a,i),n=(0,Wa.c)(),o=n?6:50,[c,d]=(0,s.useState)(o),u=(0,s.useCallback)((async(e,t)=>{const a=await r(e,t);return{items:a.items,totalLength:a.totalCount}}),[r]),{getItems:m,nrValidItems:h}=(0,Ka.E)({fetch:u,nrItems:o,limit:50}),g=(0,s.useCallback)((()=>{d((e=>e+o))}),[o]),x=n&&h>c,y=(0,Aa.x)(e.uri);return(0,W.jsxs)(qa.pZ,{value:"track-list",children:[(0,W.jsx)(Pt._,{onReachBottom:n?void 0:g,children:m(0,c-1).map(((a,s)=>a&&(0,W.jsxs)("div",{className:Xa,children:[(0,W.jsx)("hr",{className:Ya,"aria-hidden":!0}),(0,W.jsx)(Ea.q,{index:s,episode:a,showMetadata:e,usePlayContextItem:t},`${a.uri}/${s}`)]},`${s}${a.uri}`)))}),x&&(0,W.jsx)("div",{className:Qa,children:(0,W.jsxs)(Na.v,{onClick:()=>{g(),y({category:Aa.J.LoadMore})},className:Ja,children:[(0,W.jsx)(p.E,{variant:"bodySmallBold",children:l.Ru.get("internal-link-recommender.load-more-episodes")}),(0,W.jsx)(Ia.V,{size:"xsmall"})]})})]})}));var es=a(67239);const ts={field:Fa.K$.ISPLAYED,operator:Fa.uj.EQUALS,value:!1},as={field:Fa.K$.STARTEDPLAYING,operator:Fa.uj.GREATER_THAN,value:0};const ss="all-episodes",is=({onFilter:e})=>{const{sortState:t,setSortState:a}=(0,s.useContext)(_a),i=new Map([[ts,{key:"is-played",value:l.Ru.get("shows.filter.unplayed")}],[as,{key:"started-playing",value:l.Ru.get("shows.filter.in-progress")}]]),r=Array.from(i.values());r.unshift({key:ss,value:l.Ru.get("mwp.podcast.all.episodes")});const n=Array.from(i.keys()),o=(0,s.useCallback)((t=>{if(t===ss)a([]);else{const e=n.find((e=>i.get(e)?.key===t));e&&a([e])}e()}),[e,a,n,i]);if(!i.size||!n)return null;let c=r[0];const d=Array.from(i.entries()).filter((e=>t?.some((t=>t.field===e[0].field&&t.operator===e[0].operator))));return d.length>0&&(c=d[0][1]),(0,W.jsx)(es.g,{options:r,onSelect:e=>o(e),selected:c,variant:"bodyMediumBold",semanticColor:"textBase",heading:l.Ru.get("drop_down.filter_by")})},rs=({onSort:e})=>{const{sortState:t,setSortState:a}=(0,s.useContext)(Va),i=Oa(),r=Array.from(i.values()),n=Array.from(i.keys()),o=(0,s.useCallback)((t=>{const s=n.find((e=>i.get(e)?.key===t));s&&a(s),e()}),[n,e,i,a]);if(!i.size||!t)return null;const c=Array.from(i.keys()).find((e=>e.field===t.field&&e.order===t.order));if(!c)return null;const d=i.get(c);return d?(0,W.jsx)(es.g,{options:r,onSelect:e=>o(e),selected:d,heading:l.Ru.get("drop_down.sort_by")}):null},ns="bOAvdKi0zqyA_S6ThcvF",os="jVWq1orbpiIK34UFHkFb",ls="gYTsg8kvcGmu41_lilIb",cs="GMHh7OED_Nijo4zzSfrb",ds="sNEwCEh44Lapg36PnVFw",us="SoIsw3P_1RnUtFBHs_2d",ms="OMG3QMzpwer8oWsiJpzs",hs="r0yVSge7A1iSTNfudfyV",ps="yP6EeRtQJeqKq10IsMxn",gs="MIaGJ1KyQ3JLblOjWL19",xs="p8WHC1qBUrwrBwzp_vYY",ys="Uzyuaxpkm_Gwb6jOGbva",vs="TSNj_F4gGzCuxrzx6n98",bs="E4HX0M3aD0MY5dUCKSCb",js="CbSqM7wDwoLFnyIo1iKL",fs="c0h80mSMc3PkNlHX0DYs",Cs="SGGetEMTKgQk1aJvG4k9",ws="ne3ntrWAoMrE6_4A23Mf",ks=({spec:e})=>{const t=(0,Y.s)(),{canSort:a,canFilter:i}=(0,Rt.T)().capabilities,r=(0,s.useCallback)((()=>{t.logInteraction(e.episodeListFactory().filterButtonFactory().hitFilter())}),[t,e]),n=(0,s.useCallback)((()=>{t.logInteraction(e.episodeListFactory().sortButtonFactory().hitSort())}),[t,e]);return(0,W.jsxs)("div",{className:ps,children:[i&&(0,W.jsx)("div",{className:xs,children:(0,W.jsx)(is,{onFilter:r})}),!i&&(0,W.jsx)(p.E,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:ys,children:l.Ru.get("mwp.podcast.all.episodes")}),a&&(0,W.jsx)("div",{className:gs,children:(0,W.jsx)(rs,{onSort:n})})]})};var Ss=a(44825),Ps=a(66583),Rs=a(61451),Es=a(83327);const Ns=e=>{switch(e){case Et.t5.TRAILER:return l.Ru.get("podcasts.next-episode.trailer");case Et.t5.UP_NEXT:return l.Ru.get("podcasts.next-episode.up-next");case Et.t5.CONTINUE_LISTENING:return l.Ru.get("podcasts.next-episode.continue-listening");case Et.t5.FIRST_PUBLISHED:return l.Ru.get("podcasts.next-episode.first-published");case Et.t5.LATEST_PUBLISHED:return l.Ru.get("podcasts.next-episode.latest-published");default:return}},Is=({breakpoint:e,metadata:t,spec:a})=>{const{uri:i,trailer:n,topics:o,description:c,htmlDescription:d,rating:u}=t,x=(0,Y.s)(),{spec:y,logger:b}=(0,ze.r)(r.R,{data:{uri:i}}),f=(0,s.useMemo)((()=>y.aboutSectionFactory()),[y]),w=(0,s.useMemo)((()=>a.episodeListFactory()),[a]),k=(0,h.wA)(),S=(0,g.NC)(Bt.Pfj,{loadingValue:!1}),P=(0,Ae.V)(),{sortState:R}=(0,s.useContext)(_a),E=(0,Rt.T)(),N=(0,Wa.c)(),{usePlayContextItem:I}=(0,zt.P)({uri:i,metadata:{[Rs.W.SORTING_CRITERIA]:E.getPlayerSort(La),[Rs.W.FILTERING_PREDICATE]:E.getPlayerFilter(R)}},{featureIdentifier:"show"}),{isActive:A,isPlaying:B,togglePlay:_}=I({uri:n?.uri||""}),T=(0,s.useCallback)((e=>{const t=a.aboutSectionFactory().seeMoreButtonFactory(),s=e?t.hitUiReveal():t.hitUiHide();x.logInteraction(s)}),[x,a]),F=(0,s.useCallback)(((e,t)=>{const s=a.aboutSectionFactory().topicFactory(t).hitUiNavigate({destination:t.uri});x.logInteraction(s)}),[x,a]),M=n?{name:n.name,uri:n.uri,audio:{items:n.audio.items.map((e=>({url:e.url})))}}:null,D=(0,Ea.B)(t),L=(0,Ss.C)(M,D),U=(0,s.useCallback)((()=>{n?.uri&&(P?L():_())}),[L,P,_,n?.uri]),{ref:O,breakpoint:z}=(0,Ps.x)({[at.E.MEDIUM]:0,[at.E.LARGE]:600}),V=o.length>0,H=c||d,G=H||V,X=t.nextBestEpisode?.type===Et.t5.LATEST_PUBLISHED&&S,Q=(0,ga.z)(),J=(0,ga.$)(),Z=`${i}|[]`,ee=(0,xa.A)(Z);return(0,s.useEffect)((()=>{Q||J||ee()}),[Z,ee,Q,J]),(0,W.jsxs)("div",{className:m()(os,"contentSpacing",{[cs]:e===at.E.LARGE}),ref:O,children:[(0,W.jsx)(Ra.q,{className:ls,gatedEntityCoverArt:t.gatedEntityCoverArt,gatedEntityRelations:t.gatedEntityRelations,upsellExplanation:t.upsellExplanation,hasAccess:t.hasGatedEntityRelationAccess,showCoverArt:!0}),(0,W.jsxs)("div",{className:ds,children:[G&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(p.E,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:ys,children:l.Ru.get("artist.about")}),H&&(0,W.jsx)($.N,{maxLines:4,content:(c||"").trim(),onExpanded:T,htmlContent:d||void 0}),n&&(0,W.jsx)(Ge.h,{menu:(0,W.jsx)(pa.b,{uri:n.uri,showUri:i,sharingInfo:n.sharingInfo}),children:(0,W.jsx)(K,{label:l.Ru.get("track-trailer"),className:vs,images:n.coverArt,title:n.name,duration:n.duration.milliseconds,moreButton:(0,W.jsx)(j.b,{menu:(0,W.jsx)(pa.b,{uri:n.uri,sharingInfo:n.sharingInfo,showUri:i}),children:(0,W.jsx)(dt.e,{})}),onClick:U,isPlaying:B,isActive:A,size:q.LARGE,contentRating:n.contentRating?.label})}),(0,W.jsxs)("div",{className:js,children:[u&&(0,W.jsx)("div",{className:fs,children:(0,W.jsx)(Ut,{rating:u,onClick:()=>{const e=f.ratingButtonFactory().hitUiReveal();b.logInteraction(e),k((0,v.eH)(i,t))}})}),V&&(0,W.jsx)(C.N,{topics:o,className:Cs,onClick:F})]})]}),(0,W.jsx)(ha,{uri:i})]}),(0,W.jsx)(st.o.Provider,{value:z,children:(0,W.jsxs)("div",{className:m()(ms,{[hs]:N}),"data-testid":"show-all-episode-list",children:[t.nextBestEpisode&&!X&&(0,W.jsx)(Ea.q,{showMetadata:t,episode:t.nextBestEpisode.data,usePlayContextItem:I,status:Ns(t.nextBestEpisode.type),variant:"next-best-episode"}),(0,W.jsx)(ks,{spec:a}),(0,W.jsx)(Es.r,{spec:w,children:(0,W.jsx)(Za,{showMetadata:t,usePlayContextItem:I})})]})}),(0,W.jsx)(_t.Z,{copyrights:[]}),(0,W.jsxs)("div",{className:us,children:[Q&&(0,W.jsx)(ya.w,{uri:i,title:l.Ru.get("internal-link-recommender.popular-episodes"),"data-testid":"popular-episodes-above"}),N&&(0,W.jsx)(Pa,{title:l.Ru.get("internal-link-recommender.more-podcasts-like-this"),uri:i,className:ws}),J&&(0,W.jsx)(ya.w,{uri:i,title:l.Ru.get("internal-link-recommender.popular-episodes"),"data-testid":"popular-episodes-below"})]})]})},As=s.memo(Is);var Bs=a(87018),_s=a(25493);const Ts=({reason:e})=>{const t=function(e){switch(e){case"OTP":return l.Ru.get("podcasts.subscriber-indicator.otp");case"SUBSCRIPTION":return l.Ru.get("podcasts.subscriber-indicator.subscription");default:return""}}(e);return t?(0,W.jsx)(p.E,{variant:"bodySmall",semanticColor:"textBase",className:bs,children:t}):null};const Fs=({metadata:e,backgroundColor:t})=>{const{uri:a,coverArt:s,name:i,podcastType:r,publisherName:n,gatedContentAccessReason:o}=e,c=(0,W.jsx)(Kt.H,{uri:a});return(0,W.jsxs)(Ke.z,{backgroundColor:t,children:[(0,W.jsx)(Xe.h,{children:(0,W.jsx)(Ge.h,{menu:c,children:(0,W.jsx)(Qe.X,{text:i,dragUri:a,dragLabel:i})})}),(0,W.jsx)(Bs.X,{children:(0,W.jsx)(Ge.h,{menu:c,children:(0,W.jsx)(_s.b,{loading:"eager",name:i,images:s,placeholderType:"show",shape:_s.u.SQUARE})})}),(0,W.jsxs)(Ye.Y,{children:[(0,W.jsxs)(Ze.B,{children:["SHOW"===r?l.Ru.get("type.show"):l.Ru.get("type.podcast"),o&&(0,W.jsx)(Ts,{reason:o})]}),(0,W.jsx)(Ge.h,{menu:c,children:(0,W.jsx)(tt.mm,{dragUri:a,dragLabel:i,scaleAtMinWidth:tt.tw,children:(0,W.jsx)("span",{"data-testid":"show-title",children:i})})}),(0,W.jsx)(et.g,{children:n})]})]})};var Ms=a(12755),Ds=a(33449),Ls=a(66339),Us=a(38307);const Os=({metadata:e,showId:t})=>{const{coverArt:a,name:i,uri:n,isSaved:o}=e,{spec:l}=(0,ze.r)(r.R,{data:{uri:n}}),d=(0,s.useMemo)((()=>l.actionBarFactory()),[l]),u=(0,At.H)(a[0]?.url||null),m=(0,st.y)();return(0,W.jsxs)("section",{className:ns,children:[(0,W.jsx)(c.Q,{children:(0,Ht.hV)({showOrAudiobookName:i,type:"Podcast"})}),(0,W.jsx)(It.c,{artistOrShow:i,uri:n,entityType:It.p.PODCAST}),(0,W.jsx)(Fs,{metadata:e,backgroundColor:u}),(0,W.jsx)(Yt,{uri:n,name:i,isSaved:o,backgroundColor:u,spec:d}),(0,W.jsx)(As,{breakpoint:m,metadata:e,showId:t,spec:l})]})},zs=(0,s.memo)((function(){const{showId:e=""}=(0,i.g)(),t=`spotify:show:${e}`,{data:a,error:r,redirectUri:c}=(0,Se.W)(t),{data:u,isLoading:m}=(0,Ls.r)(t);if(c){const e=(0,o.Lce)(c);return(0,W.jsx)(qt.$,{to:e.toURLPath(!0)})}const h=a&&(0,Et.Go)(a);return!a||m||r?r instanceof Us.W?(0,W.jsx)(d.LoadingPage,{hasError:!0,errorMessage:l.Ru.get("error-page.not-available-in-region.title")}):(0,W.jsx)(d.LoadingPage,{hasError:!!r,errorMessage:l.Ru.get("error.not_found.title.page")}):h?(0,W.jsx)(s.Suspense,{fallback:null,children:(0,W.jsx)(Ms.u,{pageId:n.$h.PODCAST_SHOW_AUDIOBOOK,uri:t,children:(0,W.jsx)(Ds.d,{dynamicColors:u,children:(0,W.jsx)(Wt,{metadata:a},`${!!a.consumptionCapExplanation}`)})})}):(0,W.jsx)(s.Suspense,{fallback:null,children:(0,W.jsx)(Ms.u,{pageId:n.$h.PODCAST,uri:t,children:(0,W.jsx)(Ta,{uri:a.uri,children:(0,W.jsx)(Ga,{uri:a.uri,defaultSortParam:za(a.consumptionOrder),children:(0,W.jsx)(Ds.d,{dynamicColors:u,children:(0,W.jsx)(Os,{showId:e,metadata:a})})})})})})}))},19870:(e,t,a)=>{a.d(t,{$:()=>i});var s=a(30758);const i=(e,t)=>{const a=(0,s.useRef)(e);(0,s.useEffect)((()=>{a.current=e}),[e]),(0,s.useEffect)((()=>{let e;function s(){e&&clearInterval(e)}if(null!==t)return e=setInterval((function(){a.current(s)}),t),s}),[t])}}}]);
//# sourceMappingURL=xpui-routes-show.js.map