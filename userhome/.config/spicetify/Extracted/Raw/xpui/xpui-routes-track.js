"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3890],{42311:(e,a,t)=>{t.r(a),t.d(a,{default:()=>m});var n=t(30758),r=t(62411),i=t(85387),c=t(22726),o=t(31417),s=t(92202),l=t(36148),d=t(36061),k=t(59147),u=t(87182),f=t(29074),g=t(86070);const p=n.memo((function(){const e=(0,i.Zp)(),a=(0,i.zy)(),t=(0,f.m)(),p=(0,u.z)(),{trackId:m=""}=(0,i.g)(),{isAnonymous:b}=(0,r.d4)(d.Ht),h=(0,n.useMemo)((()=>new URLSearchParams(a.search)),[a.search]),y=h.get("context")||"",U=(0,c.Mce)(m).toURI(),_=(0,l.J)({uri:U},{gcTime:30*k.i}),T="Track"===_.data?.trackUnion.__typename&&_.data?.trackUnion?.playability.playable,x=(0,n.useCallback)(((a,t)=>{const n=p.getState(),r=(0,c.o_h)(t)?.toURLPath(!0);h.delete("context");const i=h.toString()?`&${h.toString()}`:"",o=`${r}?highlight=${U}${i}`;b?e(o):(n&&!n.isPaused||!T||a>-1&&p.play({uri:t},{featureIdentifier:"track",referrerIdentifier:"deeplink"},{skipTo:{index:a}}),e(o,{replace:!0}))}),[p,h,U,b,e,T]),I=(0,n.useCallback)((()=>{if(!_.loading&&_.data?.trackUnion&&"Track"===_.data.trackUnion.__typename){const e=(_.data.trackUnion.albumOfTrack?.tracks?.items??[]).findIndex((e=>e.track.uri===U));e>=0&&x(e,_.data.trackUnion.albumOfTrack?.uri||"")}}),[x,_,U]);return(0,n.useEffect)((()=>{const e=(0,c.tbX)(y);y&&e?t.getContents(y).then((e=>{const a=e.items.findIndex((e=>e?.uri===U));a<0?I():x(a,y)})):I()}),[y,I,x,t,U]),_.loading||_.error||"Track"!==_.data?.trackUnion?.__typename?(0,g.jsx)(s.LoadingPage,{hasError:!_.loading,errorMessage:o.Ru.get("track-page.error")}):null})),m=p}}]);
//# sourceMappingURL=xpui-routes-track.js.map