"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[9480],{21394:(e,t,i)=>{i.d(t,{M:()=>c});var a=i(79209),r=i(25493),s=i(27012),o=i(68266),n=i(63547);const l="profile-editImage-imageContainer",u="profile-editImage-editImageButtonContainer";var d=i(86070);const c=function({onClick:e,name:t,images:i,canEdit:c,placeholderType:m,shape:g=r.u.SQUARE,dragUri:p=""}){const[h,f]=(0,o.P)(i),v=(0,n.b)(h,f)===n.g.loaded,{draggable:x,onDragStart:b}=(0,s.P)({itemUris:[p],dragLabelText:t});return(0,d.jsxs)("div",{className:l,"data-testid":`${m}-image`,draggable:x&&!!p,onDragStart:b,children:[(0,d.jsx)(r.b,{loading:"eager",name:t,images:i,placeholderType:m,shape:g}),c&&(0,d.jsx)("div",{className:u,children:(0,d.jsx)(a.a,{overlay:v,onClick:e,rounded:g===r.u.CIRCLE})})]})}},79209:(e,t,i)=>{i.d(t,{a:()=>h});var a=i(97500),r=i.n(a),s=i(10599),o=i(95530),n=i(31417);const l="main-editImage-buttonContainer",u="main-editImageButton-image",d="main-editImageButton-overlay",c="main-editImageButton-rounded",m="main-editImageButton-icon",g="main-editImageButton-copy";var p=i(86070);const h=function({overlay:e=!1,rounded:t=!1,onClick:i}){return(0,p.jsx)("div",{className:l,children:(0,p.jsx)("button",{"data-testid":"edit-image-button",className:r()(u,{[c]:t,[d]:e}),"aria-haspopup":"true",onClick:i,type:"button",children:(0,p.jsxs)("div",{className:r()(m,"icon"),children:[(0,p.jsx)(s.G,{size:"xlarge","aria-hidden":"true"}),(0,p.jsx)(o.E,{variant:"bodyMedium",className:g,children:n.Ru.get("choose_photo")})]})})})}},87018:(e,t,i)=>{i.d(t,{X:()=>n});var a=i(97500),r=i.n(a),s=i(55760),o=i(86070);const n=({children:e})=>(0,o.jsx)("div",{className:r()(s.A.imageContainer,s.A.imageContainerNew),children:e})},2070:(e,t,i)=>{i.d(t,{B:()=>o});var a=i(95530),r=i(55760),s=i(86070);const o=({children:e})=>(0,s.jsx)(a.E,{variant:"bodySmall",className:r.A.pretitle,children:e})},86236:(e,t,i)=>{i.d(t,{W:()=>n});var a=i(30758),r=i(74159),s=i(31417),o=i(86070);const n=(0,a.memo)((function({isFollowing:e,onClick:t,disabled:i=!1,buttonText:a,size:n="small",className:l}){const u=e?s.Ru.get("following"):s.Ru.get("follow");return(0,o.jsx)(r.n,{onClick:t,disabled:i,size:n,className:l,children:a||u})}))},6556:(e,t,i)=>{i.d(t,{M:()=>c});var a=i(97500),r=i.n(a),s=i(37289),o=i(95530);const n="artist-artistVerifiedBadge-wrapper",l="artist-artistVerifiedBadge-badge",u="artist-artistVerifiedBadge-fillColor";var d=i(86070);const c=({text:e,iconSize:t="medium",className:i})=>(0,d.jsxs)("span",{className:r()(n,i),children:[(0,d.jsx)("div",{className:`${l} ${u}`}),(0,d.jsx)(s.O,{semanticColor:"textAnnouncement",className:l,size:t}),e?(0,d.jsx)(o.E,{variant:"bodySmall",children:e}):null]})},61800:(e,t,i)=>{i.d(t,{u:()=>l,i:()=>n});var a=i(30758);const r="main-imagePicker-fileInput";var s=i(86070);const o={accept:"image/.jpg, image/.jpeg, image/.png"};let n=function(e){return e.FILE_TOO_BIG="FILE_TOO_BIG",e.IMAGE_TOO_SMALL="IMAGE_TOO_SMALL",e.IMAGE_TOO_BIG="IMAGE_TOO_BIG",e.IMAGE_TYPE_NOT_SUPPORTED="IMAGE_TYPE_NOT_SUPPORTED",e}({});const l=function({onChange:e,onError:t,isOpen:i=!1,minImageWidth:l=0,minImageHeight:u=0,maxImageWidth:d=1e4,maxImageHeight:c=1e4,maxFileSizeMB:m=1/0,...g}){const p=a.useRef(null),h={...o,...g};(0,a.useEffect)((()=>{p.current&&i&&p.current.click()}),[p,i]);const f=1048576*m;return(0,s.jsx)("input",{...h,type:"file","data-testid":"image-file-picker",ref:p,className:r,onChange:async function(i){const a=i.target,[r]=Array.from(a.files||[]),s=await async function(e){const t=await function(e){return new Promise(((t,i)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>{t(a.result?.toString()??"")},a.onerror=e=>i(e)}))}(e),[i,a]=await function(e){return new Promise(((t,i)=>{const a=new Image;a.onload=()=>{const{width:e,height:i}=a;t([e,i])},a.src=e,a.onerror=e=>i(e)}))}(t);return{imageFile:e,imageDataUrl:t,imageWidth:i,imageHeight:a}}(r);try{await async function(e){if(!["image/jpg","image/jpeg","image/png"].includes(e.imageFile.type))throw n.IMAGE_TYPE_NOT_SUPPORTED;if(e.imageWidth<l||e.imageHeight<u)throw n.IMAGE_TOO_SMALL;if(e.imageWidth>d||e.imageHeight>c)throw n.IMAGE_TOO_BIG;if(e.imageFile.size>f)throw n.FILE_TOO_BIG}(s),e(s)}catch(e){if("string"!=typeof e||!Object.values(n).includes(e))throw e;t(e)}}})}},86365:(e,t,i)=>{i.d(t,{z:()=>m});var a=i(97500),r=i.n(a),s=i(95530),o=i(64820);const n="pIZVZOfjnJGth1BcoA1E",l="ZBBTIITnUdwh05dCI0tm",u="sz8Nwj2lvhOZxDwYWRQr",d="jjPsW7vuG9xH9qhEGL3I";var c=i(86070);const m=({message:e,isErrorMessage:t=!1})=>e?(0,c.jsx)("div",{role:"alert",children:(0,c.jsx)("div",{className:r()(n,{[l]:t}),children:(0,c.jsxs)(s.E,{as:"p",variant:"marginal",className:u,children:[(0,c.jsx)(o.b,{size:"small",className:d,"aria-hidden":"true"}),e]})})}):null},32183:(e,t,i)=>{i.d(t,{g:()=>v});var a=i(30758),r=i(97500),s=i.n(r),o=i(95530),n=i(22726),l=i(65462),u=i(78516),d=i(29454),c=i(99701),m=i(21082),g=i(27012),p=i(33329),h=i(14178),f=i(86070);const v=({children:e,uri:t,name:i,nonInteractive:r=!1,creatorUri:v,spec:x})=>{let b=null;const{draggable:j,onDragStart:y}=(0,g.P)({itemUris:[t],dragLabelText:i}),k=(0,p.s)(),I=(0,a.useCallback)((()=>{x&&k.logInteraction(x.albumLinkFactory({uri:t}).hitUiNavigate({destination:t}))}),[k,x,t]);return r?(0,f.jsx)("span",{className:s()("standalone-ellipsis-one-line",h.A.text),children:e}):((0,n._Tv)(t)&&(b=(0,f.jsx)(u.h,{uri:t,artistUri:v})),(0,n.WB1)(t)&&(b=(0,f.jsx)(d.H,{uri:t})),(0,f.jsx)(l.h,{menu:b,children:(0,f.jsx)(o.E,{variant:"bodySmall",children:(0,f.jsx)(c.Zp,{label:i,showDelay:c.uF,children:(0,f.jsx)(m.N,{draggable:j,onDragStart:y,className:s()("standalone-ellipsis-one-line"),to:t,dir:"auto",onClick:I,children:e})})})}))}},97445:(e,t,i)=>{i.d(t,{p:()=>r});var a=i(30758);function r(){const[e,t]=(0,a.useState)(!1);return[e,(0,a.useCallback)((()=>{t(!0),setTimeout((()=>t(!1)),0)}),[t])]}},40701:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Gi});var a=i(30758),r=i(85387),s=i(69707),o=i(22726),n=i(41715),l=i(6772),u=i(31417),d=i(92202),c=i(92255),m=i(10831),g=i(40855),p=i(86070);const h=({entity:e,index:t})=>(0,o.ecE)(e.uri)?(0,p.jsx)(m.a,{index:t,uri:e.uri,name:e.name,images:[{url:e.image_url}]}):(0,p.jsx)(g.a,{index:t,uri:e.uri,name:e.name,images:[{url:e.image_url}]});var f=i(46441),v=i(98655);const x=e=>{const{uri:t}=e,{data:i,loading:a,error:r}=(0,v.Z)(f.SR,[t]),s=i?.profiles;return a?(0,p.jsx)(d.LoadingPage,{hasError:null!==r,errorMessage:u.Ru.get("error.not_found.title.page")}):(0,p.jsx)(c.$,{title:u.Ru.get("followers"),total:s?.length,showAll:!0,fullPage:!0,rowGap:l.lT,children:s?.map(((e,t)=>(0,p.jsx)(h,{index:t,entity:e},e.uri)))})};var b=i(86228);const j="WqHooc2Y_6VuGI84LxQj",y=e=>{const{uri:t}=e,{data:i,loading:r,error:s}=(0,v.Z)(f.mH,[t]),n=i?.profiles,l=(0,a.useMemo)((()=>n?.filter((e=>(0,o.ecE)(e.uri)))||[]),[n]),m=(0,a.useMemo)((()=>n?.filter((e=>(0,o.APS)(e.uri)))||[]),[n]),[g,x]=(0,a.useState)("all"),y=l.length&&m.length,k=(0,a.useMemo)((()=>{if(!y)return n;switch(g){case"artists":return l;case"users":return m;default:return n}}),[g,n,l,m,y]),I=(0,a.useCallback)((()=>y?(0,p.jsxs)("div",{className:j,children:[(0,p.jsx)(b.v,{selected:"all"===g,onClick:()=>{x("all")},selectedColorSet:"invertedLight",children:u.Ru.get("web-player.user-page.following.filter-all")}),(0,p.jsx)(b.v,{selected:"artists"===g,onClick:()=>{x("artists")},selectedColorSet:"invertedLight",children:u.Ru.get("web-player.user-page.following.filter-artists")}),(0,p.jsx)(b.v,{selected:"users"===g,onClick:()=>{x("users")},selectedColorSet:"invertedLight",children:u.Ru.get("web-player.user-page.following.filter-friends")})]}):(0,p.jsx)(p.Fragment,{})),[g,y]);return r?(0,p.jsx)(d.LoadingPage,{hasError:null!==s,errorMessage:u.Ru.get("error.not_found.title.page")}):(0,p.jsx)(c.$,{title:u.Ru.get("following"),total:n?.length,showAll:!0,fullPage:!0,renderSubHeader:I,children:k?.map(((e,t)=>(0,p.jsx)(h,{index:t,entity:e},e.uri)))})};var k=i(16273),I=i(62411),R=i(42551),_=i(14343),N=i(5403),w=i(80809),P=i(65462),T=i(84816),A=i(15292),E=i(21394),S=i(25577),C=i(87018),O=i(88711),U=i(46110),L=i(1246),M=i(25493),D=i(2070),B=i(62986),F=i(6556),H=i(33712),G=i(97500),W=i.n(G),J=i(95530),z=i(7315),Q=i(95076),$=i(86677),q=i(44971),V=i(61800),Z=i(97445),K=i(86365),Y=i(10599),X=i(68266),ee=i(63547);const te="profile-userEditDetails-image",ie="valcBm4lLe9qFBcg0sFY",ae="tAIzXn8C9KriGwGuBfWg",re="PsrXxenHUFXYM1ub1xWw",se="U_VWfeeLWnDPhUTxCmrQ",oe=function({onClickEdit:e,onClickRemove:t,name:i,images:a,canEdit:r}){const[s,o]=(0,X.P)(a),n=(0,ee.b)(s,o)===ee.g.loaded;return(0,p.jsxs)("div",{className:te,children:[(0,p.jsx)(M.b,{loading:"eager",name:i,images:a,placeholderType:"user",shape:M.u.CIRCLE}),r&&(0,p.jsxs)("div",{className:W()(ie,{[re]:n}),children:[(0,p.jsx)("button",{className:ae,"aria-haspopup":"true",onClick:e,type:"button",children:(0,p.jsx)(J.E,{variant:"bodyMedium",children:u.Ru.get("user.edit-details.choose-photo")})}),(0,p.jsx)("div",{className:W()(se,"icon"),children:(0,p.jsx)(Y.G,{size:"xlarge","aria-hidden":!0})}),(0,p.jsx)("button",{className:ae,onClick:t,type:"button",children:(0,p.jsx)(J.E,{variant:"bodyMedium",children:u.Ru.get("user.edit-details.remove-photo")})})]})]})};var ne=i(22795);const le={paths:""},ue={encode(e,t=ne.Writer.create()){for(const i of e.paths)t.uint32(10).string(i);return t},decode(e,t){const i=e instanceof Uint8Array?new ne.Reader(e):e;let a=void 0===t?i.len:i.pos+t;const r={...le};for(r.paths=[];i.pos<a;){const e=i.uint32();if(e>>>3==1)r.paths.push(i.string());else i.skipType(7&e)}return r},fromJSON(e){const t={...le};if(t.paths=[],void 0!==e.paths&&null!==e.paths)for(const i of e.paths)t.paths.push(String(i));return t},fromPartial(e){const t={...le};if(t.paths=[],void 0!==e.paths&&null!==e.paths)for(const i of e.paths)t.paths.push(i);return t},toJSON(e){const t={};return e.paths?t.paths=e.paths.map((e=>e)):t.paths=[],t}};i(1903);var de=i(21364),ce=i(84686).hp;const me={value:0},ge={value:!1},pe={value:""};const he={encode:(e,t=ne.Writer.create())=>(t.uint32(8).int32(e.value),t),decode(e,t){const i=e instanceof Uint8Array?new ne.Reader(e):e;let a=void 0===t?i.len:i.pos+t;const r={...me};for(;i.pos<a;){const e=i.uint32();if(e>>>3==1)r.value=i.int32();else i.skipType(7&e)}return r},fromJSON(e){const t={...me};return void 0!==e.value&&null!==e.value?t.value=Number(e.value):t.value=0,t},fromPartial(e){const t={...me};return void 0!==e.value&&null!==e.value?t.value=e.value:t.value=0,t},toJSON(e){const t={};return void 0!==e.value&&(t.value=e.value),t}},fe={encode:(e,t=ne.Writer.create())=>(t.uint32(8).bool(e.value),t),decode(e,t){const i=e instanceof Uint8Array?new ne.Reader(e):e;let a=void 0===t?i.len:i.pos+t;const r={...ge};for(;i.pos<a;){const e=i.uint32();if(e>>>3==1)r.value=i.bool();else i.skipType(7&e)}return r},fromJSON(e){const t={...ge};return void 0!==e.value&&null!==e.value?t.value=Boolean(e.value):t.value=!1,t},fromPartial(e){const t={...ge};return void 0!==e.value&&null!==e.value?t.value=e.value:t.value=!1,t},toJSON(e){const t={};return void 0!==e.value&&(t.value=e.value),t}},ve={encode:(e,t=ne.Writer.create())=>(t.uint32(10).string(e.value),t),decode(e,t){const i=e instanceof Uint8Array?new ne.Reader(e):e;let a=void 0===t?i.len:i.pos+t;const r={...pe};for(;i.pos<a;){const e=i.uint32();if(e>>>3==1)r.value=i.string();else i.skipType(7&e)}return r},fromJSON(e){const t={...pe};return void 0!==e.value&&null!==e.value?t.value=String(e.value):t.value="",t},fromPartial(e){const t={...pe};return void 0!==e.value&&null!==e.value?t.value=e.value:t.value="",t},toJSON(e){const t={};return void 0!==e.value&&(t.value=e.value),t}};ne.util.Long!==de.A&&(ne.util.Long=de.A,(0,ne.configure)());const xe=globalThis;xe.atob,xe.btoa;const be={maxWidth:0,maxHeight:0,url:""},je={},ye={},ke={encode:(e,t=ne.Writer.create())=>(t.uint32(8).int32(e.maxWidth),t.uint32(16).int32(e.maxHeight),t.uint32(26).string(e.url),t),decode(e,t){const i=e instanceof Uint8Array?new ne.Reader(e):e;let a=void 0===t?i.len:i.pos+t;const r={...be};for(;i.pos<a;){const e=i.uint32();switch(e>>>3){case 1:r.maxWidth=i.int32();break;case 2:r.maxHeight=i.int32();break;case 3:r.url=i.string();break;default:i.skipType(7&e)}}return r},fromJSON(e){const t={...be};return void 0!==e.maxWidth&&null!==e.maxWidth?t.maxWidth=Number(e.maxWidth):t.maxWidth=0,void 0!==e.maxHeight&&null!==e.maxHeight?t.maxHeight=Number(e.maxHeight):t.maxHeight=0,void 0!==e.url&&null!==e.url?t.url=String(e.url):t.url="",t},fromPartial(e){const t={...be};return void 0!==e.maxWidth&&null!==e.maxWidth?t.maxWidth=e.maxWidth:t.maxWidth=0,void 0!==e.maxHeight&&null!==e.maxHeight?t.maxHeight=e.maxHeight:t.maxHeight=0,void 0!==e.url&&null!==e.url?t.url=e.url:t.url="",t},toJSON(e){const t={};return void 0!==e.maxWidth&&(t.maxWidth=e.maxWidth),void 0!==e.maxHeight&&(t.maxHeight=e.maxHeight),void 0!==e.url&&(t.url=e.url),t}},Ie={encode(e,t=ne.Writer.create()){void 0!==e.username&&void 0!==e.username&&ve.encode({value:e.username},t.uint32(10).fork()).ldelim(),void 0!==e.name&&void 0!==e.name&&ve.encode({value:e.name},t.uint32(18).fork()).ldelim();for(const i of e.images)ke.encode(i,t.uint32(26).fork()).ldelim();return void 0!==e.verified&&void 0!==e.verified&&fe.encode({value:e.verified},t.uint32(34).fork()).ldelim(),void 0!==e.editProfileDisabled&&void 0!==e.editProfileDisabled&&fe.encode({value:e.editProfileDisabled},t.uint32(42).fork()).ldelim(),void 0!==e.reportAbuseDisabled&&void 0!==e.reportAbuseDisabled&&fe.encode({value:e.reportAbuseDisabled},t.uint32(50).fork()).ldelim(),void 0!==e.abuseReportedName&&void 0!==e.abuseReportedName&&fe.encode({value:e.abuseReportedName},t.uint32(58).fork()).ldelim(),void 0!==e.abuseReportedImage&&void 0!==e.abuseReportedImage&&fe.encode({value:e.abuseReportedImage},t.uint32(66).fork()).ldelim(),void 0!==e.hasSpotifyName&&void 0!==e.hasSpotifyName&&fe.encode({value:e.hasSpotifyName},t.uint32(74).fork()).ldelim(),void 0!==e.hasSpotifyImage&&void 0!==e.hasSpotifyImage&&fe.encode({value:e.hasSpotifyImage},t.uint32(82).fork()).ldelim(),void 0!==e.color&&void 0!==e.color&&he.encode({value:e.color},t.uint32(90).fork()).ldelim(),t},decode(e,t){const i=e instanceof Uint8Array?new ne.Reader(e):e;let a=void 0===t?i.len:i.pos+t;const r={...je};for(r.images=[];i.pos<a;){const e=i.uint32();switch(e>>>3){case 1:r.username=ve.decode(i,i.uint32()).value;break;case 2:r.name=ve.decode(i,i.uint32()).value;break;case 3:r.images.push(ke.decode(i,i.uint32()));break;case 4:r.verified=fe.decode(i,i.uint32()).value;break;case 5:r.editProfileDisabled=fe.decode(i,i.uint32()).value;break;case 6:r.reportAbuseDisabled=fe.decode(i,i.uint32()).value;break;case 7:r.abuseReportedName=fe.decode(i,i.uint32()).value;break;case 8:r.abuseReportedImage=fe.decode(i,i.uint32()).value;break;case 9:r.hasSpotifyName=fe.decode(i,i.uint32()).value;break;case 10:r.hasSpotifyImage=fe.decode(i,i.uint32()).value;break;case 11:r.color=he.decode(i,i.uint32()).value;break;default:i.skipType(7&e)}}return r},fromJSON(e){const t={...je};if(t.images=[],void 0!==e.username&&null!==e.username?t.username=String(e.username):t.username=void 0,void 0!==e.name&&null!==e.name?t.name=String(e.name):t.name=void 0,void 0!==e.images&&null!==e.images)for(const i of e.images)t.images.push(ke.fromJSON(i));return void 0!==e.verified&&null!==e.verified?t.verified=Boolean(e.verified):t.verified=void 0,void 0!==e.editProfileDisabled&&null!==e.editProfileDisabled?t.editProfileDisabled=Boolean(e.editProfileDisabled):t.editProfileDisabled=void 0,void 0!==e.reportAbuseDisabled&&null!==e.reportAbuseDisabled?t.reportAbuseDisabled=Boolean(e.reportAbuseDisabled):t.reportAbuseDisabled=void 0,void 0!==e.abuseReportedName&&null!==e.abuseReportedName?t.abuseReportedName=Boolean(e.abuseReportedName):t.abuseReportedName=void 0,void 0!==e.abuseReportedImage&&null!==e.abuseReportedImage?t.abuseReportedImage=Boolean(e.abuseReportedImage):t.abuseReportedImage=void 0,void 0!==e.hasSpotifyName&&null!==e.hasSpotifyName?t.hasSpotifyName=Boolean(e.hasSpotifyName):t.hasSpotifyName=void 0,void 0!==e.hasSpotifyImage&&null!==e.hasSpotifyImage?t.hasSpotifyImage=Boolean(e.hasSpotifyImage):t.hasSpotifyImage=void 0,void 0!==e.color&&null!==e.color?t.color=Number(e.color):t.color=void 0,t},fromPartial(e){const t={...je};if(t.images=[],void 0!==e.username&&null!==e.username?t.username=e.username:t.username=void 0,void 0!==e.name&&null!==e.name?t.name=e.name:t.name=void 0,void 0!==e.images&&null!==e.images)for(const i of e.images)t.images.push(ke.fromPartial(i));return void 0!==e.verified&&null!==e.verified?t.verified=e.verified:t.verified=void 0,void 0!==e.editProfileDisabled&&null!==e.editProfileDisabled?t.editProfileDisabled=e.editProfileDisabled:t.editProfileDisabled=void 0,void 0!==e.reportAbuseDisabled&&null!==e.reportAbuseDisabled?t.reportAbuseDisabled=e.reportAbuseDisabled:t.reportAbuseDisabled=void 0,void 0!==e.abuseReportedName&&null!==e.abuseReportedName?t.abuseReportedName=e.abuseReportedName:t.abuseReportedName=void 0,void 0!==e.abuseReportedImage&&null!==e.abuseReportedImage?t.abuseReportedImage=e.abuseReportedImage:t.abuseReportedImage=void 0,void 0!==e.hasSpotifyName&&null!==e.hasSpotifyName?t.hasSpotifyName=e.hasSpotifyName:t.hasSpotifyName=void 0,void 0!==e.hasSpotifyImage&&null!==e.hasSpotifyImage?t.hasSpotifyImage=e.hasSpotifyImage:t.hasSpotifyImage=void 0,void 0!==e.color&&null!==e.color?t.color=e.color:t.color=void 0,t},toJSON(e){const t={};return void 0!==e.username&&(t.username=e.username),void 0!==e.name&&(t.name=e.name),e.images?t.images=e.images.map((e=>e?ke.toJSON(e):void 0)):t.images=[],void 0!==e.verified&&(t.verified=e.verified),void 0!==e.editProfileDisabled&&(t.editProfileDisabled=e.editProfileDisabled),void 0!==e.reportAbuseDisabled&&(t.reportAbuseDisabled=e.reportAbuseDisabled),void 0!==e.abuseReportedName&&(t.abuseReportedName=e.abuseReportedName),void 0!==e.abuseReportedImage&&(t.abuseReportedImage=e.abuseReportedImage),void 0!==e.hasSpotifyName&&(t.hasSpotifyName=e.hasSpotifyName),void 0!==e.hasSpotifyImage&&(t.hasSpotifyImage=e.hasSpotifyImage),void 0!==e.color&&(t.color=e.color),t}},Re={encode:(e,t=ne.Writer.create())=>(void 0!==e.mask&&void 0!==e.mask&&ue.encode(e.mask,t.uint32(10).fork()).ldelim(),void 0!==e.userProfile&&void 0!==e.userProfile&&Ie.encode(e.userProfile,t.uint32(18).fork()).ldelim(),t),decode(e,t){const i=e instanceof Uint8Array?new ne.Reader(e):e;let a=void 0===t?i.len:i.pos+t;const r={...ye};for(;i.pos<a;){const e=i.uint32();switch(e>>>3){case 1:r.mask=ue.decode(i,i.uint32());break;case 2:r.userProfile=Ie.decode(i,i.uint32());break;default:i.skipType(7&e)}}return r},fromJSON(e){const t={...ye};return void 0!==e.mask&&null!==e.mask?t.mask=ue.fromJSON(e.mask):t.mask=void 0,void 0!==e.userProfile&&null!==e.userProfile?t.userProfile=Ie.fromJSON(e.userProfile):t.userProfile=void 0,t},fromPartial(e){const t={...ye};return void 0!==e.mask&&null!==e.mask?t.mask=ue.fromPartial(e.mask):t.mask=void 0,void 0!==e.userProfile&&null!==e.userProfile?t.userProfile=Ie.fromPartial(e.userProfile):t.userProfile=void 0,t},toJSON(e){const t={};return void 0!==e.mask&&(t.mask=e.mask?ue.toJSON(e.mask):void 0),void 0!==e.userProfile&&(t.userProfile=e.userProfile?Ie.toJSON(e.userProfile):void 0),t}};var _e=i(72671),Ne=i(16151);const we=`${_e.I_}/identity`;async function Pe(e,t,{name:i,imageUploadToken:a}){void 0!==i&&await async function(e,t,i){const a=Re.encode(Re.fromPartial({mask:{paths:["name"]},userProfile:null!==i?{name:i}:{}}));await e.build().withHost(we).withMethod("POST").withPath(`/v3/user/username/${encodeURIComponent((0,Ne.v)(t))}`).withEndpointIdentifier("/v3/user/username/{username}").withBody(a.finish()).withoutMarket().send()}(e,t,i),void 0!==a&&(null!==a?await async function(e,t,i){await e.build().withHost(we).withMethod("POST").withPath(`/v3/profile-image/${encodeURIComponent((0,Ne.v)(t))}/${i}`).withEndpointIdentifier("/v3/profile-image/{username}/{uploadToken}").withoutMarket().send()}(e,t,a):await async function(e,t){await e.build().withHost(we).withMethod("DELETE").withPath(`/v3/profile-image/${encodeURIComponent((0,Ne.v)(t))}`).withEndpointIdentifier("/v3/profile-image/{username}").withoutMarket().send()}(e,t))}var Te=i(1599);const Ae={type:"error",get message(){return u.Ru.get("user.edit-details.error.file-size-exceeded",10)}},Ee={type:"error",get message(){return u.Ru.get("user.edit-details.error.too-small",300,300)}},Se={type:"error",get message(){return u.Ru.get("user.edit-details.error.too-big",1e4,1e4)}},Ce={type:"error",get message(){return u.Ru.get("user.edit-details.error.image-type-not-supported")}},Oe={type:"error",get message(){return u.Ru.get("user.edit-details.error.missing-name")}},Ue={type:"error",get message(){return u.Ru.get("user.edit-details.error.failed-to-save")}},Le={type:"error",get message(){return u.Ru.get("user.edit-details.error.file-upload-failed")}};function Me(e){return{type:"setLoading",loading:e}}function De(e){return{type:"setMessage",message:e}}function Be(e,t){switch(t.type){case"setName":return{...e,name:t.name};case"setMessage":return{...e,message:t.message,loading:!1};case"setLoading":return{...e,loading:t.loading,message:null};case"setImageData":return{...e,imageData:t.data,removeImage:!1};case"setImageToken":return{...e,imageToken:t.token,removeImage:!1};case"removeImage":return{...e,imageToken:void 0,imageData:void 0,image:void 0,removeImage:!0};default:return e}}const Fe="profile-userEditDetails-container",He="profile-userEditDetails-content",Ge="profile-userEditDetails-header",We="profile-userEditDetails-closeButton",Je="vAeyAmeLkDEDKdL9Hou0",ze="dnmzO6yYKkxUV8jl7O1Z",Qe="profile-userEditDetails-nameInput",$e="profile-userEditDetails-name",qe="profile-userEditDetails-label",Ve="profile-userEditDetails-labelText",Ze="dMhJaxli87_22jb_3d9x",Ke="profile-userEditDetails-saveButton",Ye="profile-userEditDetails-disclaimer",Xe=a.memo((function({uri:e,name:t,image:i,onClose:r,shouldOpenImagePicker:s,userCapabilities:o}){const[n,l]=(0,Z.p)(),[d,c]=function({name:e,image:t}){return(0,a.useReducer)(Be,{loading:!1,message:null,name:e,image:t})}({name:t,image:i}),m=(0,a.useMemo)((()=>{const e=d.imageData||d.image;return e?[{url:e,width:300,height:300}]:[]}),[d.image,d.imageData]);(0,a.useEffect)((()=>{s&&l()}),[l,s]);const g=(0,a.useCallback)((e=>{e===V.i.FILE_TOO_BIG?c(De(Ae)):e===V.i.IMAGE_TOO_SMALL?c(De(Ee)):e===V.i.IMAGE_TOO_BIG?c(De(Se)):e===V.i.IMAGE_TYPE_NOT_SUPPORTED&&c(De(Ce))}),[c]),h=(0,a.useCallback)((()=>{c({type:"removeImage"})}),[c]),f=(0,a.useCallback)((async t=>{t.preventDefault();if(0!==d.name.trim().length){c(Me(!0));try{const t=d.removeImage?null:d.imageToken;await async function(e,{name:t,imageUploadToken:i}){await Pe(Te.n.getInstance(),e,{name:t,imageUploadToken:i})}(e,{name:d.name,imageUploadToken:t}),r({name:d.name,image:d.imageData||d.image})}catch(e){c(De(Ue))}}else c(De(Oe))}),[c,r,d.image,d.imageData,d.imageToken,d.name,d.removeImage,e]);return(0,p.jsx)(q.A,{isOpen:!0,contentLabel:u.Ru.get("user.edit-details.title"),onRequestClose:()=>r(),children:(0,p.jsxs)("div",{className:Fe,children:[(0,p.jsxs)("div",{className:Ge,children:[(0,p.jsx)(J.E,{as:"h1",variant:"titleSmall",children:u.Ru.get("user.edit-details.title")}),(0,p.jsx)("button",{className:We,onClick:()=>r(),"aria-label":u.Ru.get("close"),children:(0,p.jsx)(z.M,{size:"small"})})]}),d.message&&(0,p.jsx)(K.z,{isErrorMessage:"error"===d.message.type,message:d.message.message}),(0,p.jsxs)("form",{className:He,onSubmit:f,children:[o.edit_image&&(0,p.jsx)(V.u,{isOpen:n,minImageWidth:300,minImageHeight:300,maxFileSizeMB:10,onChange:async function(e){if(!e)return;const{imageFile:t,imageDataUrl:i}=e;if(c(De(null)),c({type:"setImageData",data:i}),t)try{c(Me(!0));const e=await async function(e){const t=await Te.n.getInstance().build().withEndpointIdentifier("image-upload/v4/user-profile").withHost("https://image-upload.spotify.com/v4").withMethod("POST").withPath("/user-profile").withBody(e).withoutGlobalHeaders().withHeaders([{key:"Content-Type",value:e.type}]).withoutMarket().send();if(!t.body)throw new Error("No upload token received");return t.body.uploadToken}(t);c({type:"setImageToken",token:e}),c(Me(!1))}catch{c(De(Le))}},onError:g}),(0,p.jsxs)("div",{className:Je,children:[(0,p.jsx)(oe,{name:t,images:m,onClickEdit:l,onClickRemove:h,canEdit:o.edit_image}),d.loading&&(0,p.jsx)("div",{className:ze,children:(0,p.jsx)(Q.I,{})})]}),(0,p.jsxs)("div",{className:$e,children:[(0,p.jsx)("label",{htmlFor:"user-edit-name",className:qe,children:(0,p.jsx)(J.E,{variant:"marginalBold",className:Ve,children:u.Ru.get("user.edit-details.name-label")})}),(0,p.jsx)("input",{"data-testid":"user-edit-name-input",id:"user-edit-name",type:"text",dir:"auto",className:W()(Qe,Ze),onChange:e=>{c(function(e){return{type:"setName",name:e}}(e.target.value))},placeholder:u.Ru.get("user.edit-details.name-placeholder"),maxLength:32,value:d.name,disabled:!o.edit_name})]}),(0,p.jsx)("div",{className:Ke,children:(0,p.jsx)($.$,{colorSet:"invertedLight",onClick:f,disabled:d.loading,children:u.Ru.get("save")})}),(0,p.jsx)(J.E,{as:"p",variant:"marginalBold",className:Ye,children:u.Ru.get("image-upload.legal-disclaimer")})]})]})})}));var et=i(88260),tt=i(60038),it=i(53187),at=i(75830),rt=i(21951),st=i(86236),ot=i(29368),nt=i(39566),lt=i(75514);const ut=a.memo((function({openModal:e,spec:t,logger:i,name:r,backgroundColor:s,isCurrentUser:o,uri:n}){const[l,d]=(0,lt.Y)(n),c=!(0,nt.n)(),m=(0,a.useCallback)((()=>{const e=t.actionBarFactory().followButtonFactory();l?(d(!1),i.logInteraction(e.hitUnfollow({itemToBeUnfollowed:n}))):(d(!0),i.logInteraction(e.hitFollow({itemToBeFollowed:n})))}),[l,i,d,t,n]),g=(0,a.useCallback)((()=>{const e=t.actionBarFactory().contextMenuButtonFactory().hitUiReveal();i.logInteraction(e)}),[i,t]),h=(0,ot.j)();return(0,p.jsx)(et.E,{backgroundColor:s,children:(0,p.jsxs)(tt.S,{children:[!o&&(0,p.jsx)(rt.e,{children:(0,p.jsx)(st.W,{isFollowing:Boolean(l),onClick:m,disabled:c})}),(0,p.jsx)(at.b,{menu:(0,p.jsx)(T.B,{uri:n,onEditProfileCallback:e}),children:(0,p.jsx)(it.e,{label:u.Ru.get("more.label.context",r),onClick:g,size:h})})]})})}));var dt=i(73658),ct=i(57292),mt=i(21646),gt=i(21082),pt=i(67668);function ht({children:e,...t}){return(0,pt.V)()?(0,p.jsx)(p.Fragment,{children:e}):(0,p.jsx)(gt.N,{...t,children:e})}function ft({userUri:e,totalPublicPlaylistsCount:t,followersCount:i,followingCount:a,theyFollowUs:r,spec:s,logger:n}){return(0,p.jsxs)(dt.X,{children:[t>0&&(0,p.jsx)(ct.q,{children:u.Ru.get("user.public-playlists",t)}),(0,p.jsx)(mt.J,{}),i>0&&(0,p.jsx)(ht,{to:(0,o.Qjr)((0,Ne.v)(e),["followers"]).toURI(),onClick:(e,t)=>{if(!t)return;const i=s.headerFactory().followersLinkFactory().hitUiNavigate({destination:t});n.logInteraction(i)},children:(0,p.jsx)(J.E,{variant:"bodySmall",children:u.Ru.get("user.followers",i)})}),(0,p.jsx)(mt.J,{}),a>0&&(0,p.jsx)(ht,{to:(0,o.Qjr)((0,Ne.v)(e),["following"]).toURI(),onClick:(e,t)=>{if(!t)return;const i=s.headerFactory().followersLinkFactory().hitUiNavigate({destination:t});n.logInteraction(i)},children:(0,p.jsx)(J.E,{variant:"bodySmall",children:u.Ru.get("user.following",a)})}),(0,p.jsx)(mt.J,{}),r&&(0,p.jsx)(ct.q,{children:u.Ru.get("user.they_follow_us")})]})}var vt=i(73043),xt=i(94246),bt=i(54622),jt=i(32183),yt=i(80737),kt=i(14563),It=i(20455),Rt=i(68118),_t=i(27305),Nt=i(591),wt=i(95931),Pt=i(67799),Tt=i(82391),At=i(60651),Et=i(13679),St=i(38215),Ct=i(93627),Ot=i(95797),Ut=i(62358),Lt=i(44335),Mt=i(3436),Dt=i(42621),Bt=i(99041),Ft=i(97253),Ht=i(18663),Gt=i(44672),Wt=i(85346),Jt=i(21549),zt=i(15838),Qt=i(14178);const $t=a.memo((function({uri:e,name:t,duration_ms:i,artists:a,album:r,contextUri:s,isExplicit:o,isMOGEFRestricted:n,isPlayable:l,index:d,imgUrl:c,usePlayContextItem:m}){const{spec:g}=(0,Jt.r)(xt.i,{data:{position:d,reason:"",uri:e}}),{isActive:h,isPlaying:f,triggerPlay:v,togglePlay:x}=m({uri:e,index:d}),b=(0,Wt.T)(e),{isPlayable:j,isAnyArtistBanned:y}=(0,Dt.g)(e,{isPlayable:l,isLocal:!1,isOutOfMarket:!1,artistUris:a?.map((e=>e.uri))}),{unBanArtists:k}=(0,Mt.M)(a.map((e=>e.uri))),{badges:I,hasBadges:R}=(0,zt.b)({downloadAvailability:b,isExplicit:o,isMOGEFRestricted:n}),_=a?.map((e=>e.name)).join(u.Ru.getSeparator())||"";return(0,p.jsx)(Gt.pZ,{value:"row",index:d,children:(0,p.jsx)(P.h,{menu:(0,p.jsx)(bt.P,{uri:e,albumUri:r.uri,artists:a,contextUri:s}),children:(0,p.jsxs)(Ut.w,{uri:e,contextUri:s,onTriggerPlay:(e,t)=>{v({loggingParams:t})},isActive:h,index:d,ariaRowIndex:d+1,isPlayable:j,isAnyArtistBanned:y,handleArtistBanUndoClick:k,ageRestricted:n,dragMetadata:{name:t,createdBy:_},spec:g,children:[(0,p.jsx)(At.y,{ariaColIndex:0,children:(0,p.jsx)(Nt.$,{uri:e,playAriaLabel:u.Ru.get("tracklist.a11y.play",t,_),isPlaying:f,isActive:h,onClick:(e,t)=>{j&&x({loggingParams:t})},spec:g,children:(0,p.jsx)(Pt.a,{children:d+1})})}),(0,p.jsxs)(Et.U,{ariaColIndex:1,children:[(0,p.jsx)(Rt.e,{src:c}),(0,p.jsxs)(_t.l,{children:[(0,p.jsx)(Ot.p,{titleText:t,children:t}),R&&(0,p.jsxs)(kt.P,{children:[I.download&&(0,p.jsx)(Ft._,{}),I.explicit&&(0,p.jsx)(Bt.U,{}),I.nineteen&&(0,p.jsx)(Ht.q,{className:Qt.A.nineteen,size:16})]}),(0,p.jsx)(Ct.p,{children:(0,p.jsx)(yt.l,{artists:a,spec:g})})]})]}),(0,p.jsx)(St.o,{ariaColIndex:2,children:(0,p.jsx)(jt.g,{uri:r.uri,name:r.name,creatorUri:a?.[0]?.uri,spec:g,children:r.name})}),(0,p.jsxs)(Tt.l,{ariaColIndex:3,children:[(0,p.jsx)(Lt.d,{uri:e,spec:g}),(0,p.jsx)(It.P,{duration:i}),(0,p.jsx)(wt.Y,{menu:(0,p.jsx)(bt.P,{uri:e,albumUri:r.uri,artists:a,contextUri:s}),label:u.Ru.get("more.label.track",t,_),spec:g})]})]})})})}),((e,t)=>e.uri===t.uri));var qt=i(96614),Vt=i(4266),Zt=i(28828),Kt=i(28340),Yt=i(16157),Xt=i(7307),ei=i(63096);const ti=a.memo((function({tracks:e,hasHeaderRow:t=!1,nrTracksVisible:i,uri:r}){const s=(0,Ne.v)(r),n=(0,o.duX)(s,"tracks").toURI(),l=(0,a.useMemo)((()=>i?e.slice(0,i):e),[i,e]),{usePlayContextItem:d}=(0,Kt.P)({uri:n,pages:[{items:e.map((e=>({type:Xt.c.TRACK,uri:e.uri,uid:null,provider:null})))}]},{featureIdentifier:"profile",referrerIdentifier:"user_profile"}),c=(0,a.useCallback)(((e,t)=>{const i=(0,ei.g)(e?.albumOfTrack?.coverArt?.sources,{desiredSize:40});return(0,p.jsx)($t,{index:t,uri:(0,Zt.a)(e),duration_ms:e.duration.totalMilliseconds,name:e.name,artists:e.artists.items.map((({uri:e,profile:{name:t}})=>({uri:e,name:t}))),album:e.albumOfTrack,isPlayable:!0,isExplicit:e.contentRating?.label===Yt.x7.Explicit,isMOGEFRestricted:e.contentRating?.label===Yt.x7.NineteenPlus,imgUrl:i?.url||"",contextUri:n,usePlayContextItem:d},t+e.uri)}),[n,d]),m=(0,a.useMemo)((()=>[Vt.$.INDEX,Vt.$.TITLE_AND_ARTIST,Vt.$.ALBUM,Vt.$.DURATION]),[]),g=(0,a.useCallback)((e=>({uri:e.uri})),[]);return(0,p.jsx)(Gt.pZ,{value:"user-top-tracks-tracklist",children:(0,p.jsx)(qt.S4,{ariaLabel:u.Ru.get("top_tracks_this_month"),renderRow:c,nrTracks:l.length,tracks:l,resolveItem:g,headerTop:0,hasHeaderRow:t,columns:m,columnPersistenceKey:"user-top-tracks-tracklist"})})}),((e,t)=>e.tracks===t.tracks));var ii=i(83327),ai=i(33329);const ri=a.memo((function({tracks:e,title:t,subtitle:i,seeAllUri:r,className:s,uri:o,spec:n}){const l=(0,ai.s)(),u=(0,a.useCallback)((()=>{const e=n.titleLinkFactory().hitUiNavigate({destination:r});l.logInteraction(e)}),[l,r,n]),d=(0,a.useCallback)((()=>{const e=n.titleLinkFactory().hitUiNavigate({destination:r});l.logInteraction(e)}),[l,r,n]);if(!e||0===e.totalCount||0===e.items.length)return null;const c=e.totalCount>4;return(0,p.jsxs)("section",{className:s,children:[(0,p.jsx)(vt.k,{title:t,subtitle:i,seeAllUri:r,showSeeAll:c,onClickTitle:u,onClickSeeAll:d}),(0,p.jsx)(ii.r,{spec:n,children:(0,p.jsx)(ti,{tracks:e.items,uri:o,nrTracksVisible:4})})]})}),((e,t)=>e.tracks===t.tracks));function si(e,t){switch(t.type){case"OPEN_MODAL":return{isModalOpen:!0,modalVariant:"editProfile",shouldOpenImagePicker:!1};case"OPEN_MODAL_WITH_IMAGEPICKER":return{isModalOpen:!0,modalVariant:"editProfile",shouldOpenImagePicker:!0};case"CLOSE_MODAL":return{isModalOpen:!1,modalVariant:null,shouldOpenImagePicker:!1};default:return e}}var oi=i(57776),ni=i(59147);const li=new oi.l("userTopContent","query","feb6d55177e2cbce2ac59214f9493f1ef2e4368eec01b3d4c3468fa1b97336e2",null);function ui(e){return"Artist"===e.__typename}function di(e){if("ArtistPageV2"!==e?.topArtists?.__typename)return null;const t=e.topArtists.items.map((e=>e.data)).filter(ui);return 0===t.length?null:{totalCount:e.topArtists.totalCount,items:t}}function ci(e){return"Track"===e.__typename}function mi(e){if("TrackPageV2"!==e?.topTracks?.__typename)return null;const t=e.topTracks.items.map((e=>e.data)).filter(ci).filter((e=>null!==e.albumOfTrack));return 0===t.length?null:{totalCount:e.topTracks.totalCount,items:t}}const gi=Yt.xE.Affinity,pi=Yt.Nm.ShortTerm;function hi({includeTopArtists:e,includeTopTracks:t,topArtistsLimit:i,topTracksLimit:a}){const{data:r,loading:s,error:o}=(n={includeTopArtists:e,topArtistsInput:{offset:0,limit:i,sortBy:gi,timeRange:pi},includeTopTracks:t,topTracksInput:{offset:0,limit:a,sortBy:gi,timeRange:pi}},l={enabled:e||t,gcTime:18e5,staleTime:3e5},(0,ni.I)(li,n,l));var n,l;return null!==o?{topTracks:null,topArtists:null,loading:s,error:new Error("Failed loading user top content!")}:{topTracks:mi(r?.me?.profile??null),topArtists:di(r?.me?.profile??null),loading:s,error:null}}var fi=i(58337),vi=i(65924),xi=i(12130),bi=i(38501),ji=i(36061),yi=i(78412),ki=i(26184),Ii=i(99248),Ri=i(55868);const _i="J6PX6RfvHlA4BPp7_8sJ",Ni="DJCugGBTcU3io4Q28BHl",wi="vpTiIBeCfuGKOTj3Tzg6",Pi="eGAuBpyB1eqsyPKbaQU7",Ti="GoG_UTK1uLaPCfhipeF0",Ai=18e5,Ei=3e5,Si=(0,R.Mz)(ji.mB,(e=>e?.images||[])),Ci=({uri:e,isCurrentUser:t})=>{const i=(0,I.d4)(ji.mB)?.uri,r=(0,I.d4)(ji.Mn),s=(0,I.d4)(Si),n=(0,I.wA)(),l=(0,k.jE)(),c=(0,_.NC)(bi.DGB,{loadingValue:!0}),g=(0,a.useMemo)((()=>(0,ei.g)(s)),[s]),[{isModalOpen:x,modalVariant:b,shouldOpenImagePicker:j},y]=function(){const[e,t]=(0,a.useReducer)(si,{isModalOpen:!1,modalVariant:null,shouldOpenImagePicker:!1});return[e,t]}(),{data:R,loading:G,queryKey:W}=(0,v.Z)(f.E$,[{uri:e,playlists:10,artists:10,episodes:10}],{gcTime:Ai,staleTime:Ei}),J=(0,pt.V)();(0,xi.N)(vi.mc.OPERATION_COMPLETE,(()=>{l.invalidateQueries({queryKey:W})})),(0,Ii.l)(ki.UV.OPERATION_COMPLETE,(()=>{l.invalidateQueries({queryKey:W})}));const z=R?.public_playlists,Q=R?.is_verified,$=R?.recently_played_artists,q=t?g?.url||"":R?.image_url||"",V=(0,Ne.v)(e),Z=(t?r:R?.name)||"",K=(0,fi.H)(R?.image_url||null),{spec:Y,logger:X}=(0,Jt.r)(N._,{data:{uri:e}}),ee=(0,a.useMemo)((()=>Y.sectionTopTracksFactory()),[Y]),te=!J&&(!1!==R?.show_follows||t),ie=t&&c,{data:ae,loading:re}=(0,v.Z)(f.mH,[e],{enabled:te,gcTime:Ai,staleTime:Ei}),se=ae?.profiles,{data:oe,loading:ne}=(0,v.Z)(f.SR,[e],{enabled:te,gcTime:Ai,staleTime:Ei}),le=oe?.profiles,ue=se?.some((e=>e.uri===i)),{topArtists:de,topTracks:ce,loading:me}=hi({includeTopArtists:ie,includeTopTracks:ie,topArtistsLimit:10,topTracksLimit:4}),ge=(0,a.useCallback)((e=>{y({type:"CLOSE_MODAL"}),e&&(n((0,yi.IE)(e.name)),n((0,yi.ZQ)(e.image?[{url:e.image,height:null,width:null}]:[])))}),[y,n]),pe=(0,a.useCallback)((()=>{y({type:"OPEN_MODAL"});const e=Y.headerFactory().usernameFactory().hitUiReveal();X.logInteraction(e)}),[X,y,Y]),he=(0,a.useCallback)((()=>{y({type:"OPEN_MODAL_WITH_IMAGEPICKER"});const e=Y.headerFactory().profileImageFactory().hitUiReveal();X.logInteraction(e)}),[X,y,Y]),fe=(0,a.useMemo)((()=>[{url:q}]),[q]);if(!R||G||re||ne||me)return(0,p.jsx)(d.LoadingPage,{hasError:!1,errorMessage:u.Ru.get("error.not_found.title.page")});const ve=te&&!!le?.length,xe=te&&!!se?.length,be=(0,p.jsx)(T.B,{uri:R.uri});return(0,p.jsxs)("div",{className:_i,children:[(0,p.jsx)(A.Q,{children:Z}),(0,p.jsxs)(S.z,{backgroundColor:K,children:[(0,p.jsx)(U.h,{children:(0,p.jsx)(P.h,{menu:be,children:(0,p.jsx)(L.X,{text:Z})})}),(0,p.jsx)(P.h,{menu:be,children:(0,p.jsx)(C.X,{children:(0,p.jsx)(E.M,{canEdit:t&&!R.edit_image_disabled,name:Z,images:fe,onClick:he,placeholderType:"user",shape:M.u.CIRCLE})})}),(0,p.jsxs)(O.Y,{children:[(0,p.jsx)(D.B,{children:Q?(0,p.jsx)(F.M,{text:u.Ru.get("card.tag.profile")}):u.Ru.get("card.tag.profile")}),(0,p.jsx)(P.h,{menu:be,children:(0,p.jsx)(B.mm,{canEdit:t&&!R.edit_name_disabled,editTitle:u.Ru.get("playlist.edit-details.title"),onClick:pe,children:Z})}),(0,p.jsx)(ft,{userUri:e,totalPublicPlaylistsCount:R.total_public_playlists_count,followersCount:R.followers_count,followingCount:R.following_count,theyFollowUs:!!ue,spec:Y,logger:X})]})]}),(0,p.jsx)(ut,{openModal:pe,spec:Y,logger:X,name:Z,backgroundColor:K,isCurrentUser:t,uri:e}),(0,p.jsx)("div",{className:"contentSpacing",children:(0,p.jsxs)(ii.r,{spec:Y,children:[t&&(0,p.jsxs)(p.Fragment,{children:[null!==de&&(0,p.jsx)(H.p,{className:Ni,total:de.totalCount,title:u.Ru.get("top_artists_this_month"),subtitle:u.Ru.get("only_visible_to_you"),seeAllUri:(0,o.Qjr)(V,["top","artists"]).toURI(),id:"top-artists",index:0,children:de.items.map(((e,t)=>(0,p.jsx)(m.a,{index:t,uri:e.uri,name:e.profile.name,images:e.visuals.avatarImage?.sources??[]},e.uri)))}),(0,p.jsx)(ri,{className:Ni,title:u.Ru.get("top_tracks_this_month"),subtitle:u.Ru.get("only_visible_to_you"),seeAllUri:(0,o.Qjr)(V,["top","tracks"]).toURI(),uri:e,tracks:ce,spec:ee})]}),(0,p.jsx)(H.p,{className:Ni,total:R.total_public_playlists_count,title:u.Ru.get("public_playlists"),seeAllUri:(0,o.Qjr)(V,["playlists"]).toURI(),id:"playlists",index:1,children:z?.map(((e,t)=>(0,p.jsx)(w.B,{index:t,uri:e.uri,name:e.name,images:[{url:(0,Ri.m)({imageUriOrUrl:e.image_url}),width:300,height:300}],authorName:e.owner_name,description:e.followers_count?u.Ru.get("user.followers",e.followers_count):""},e.uri)))}),$?.length?(0,p.jsx)(H.p,{className:Ni,total:$?.length,title:u.Ru.get("recently_played_artists"),seeAllUri:(0,o.Qjr)(V,["recently-played-artists"]).toURI(),id:"recently-played-artists",index:2,children:$?.map(((e,t)=>(0,p.jsx)(m.a,{index:t,uri:e.uri,name:e.name,images:[{url:e.image_url}]},e.uri)))}):null,ve?(0,p.jsx)(H.p,{className:Ni,title:u.Ru.get("followers"),total:le?.length,seeAllUri:(0,o.Qjr)(V,["followers"]).toURI(),id:"followers",index:3,children:le?.map(((e,t)=>(0,p.jsx)(h,{index:t,entity:e},e.uri)))}):null,xe?(0,p.jsx)(H.p,{className:Ni,title:u.Ru.get("following"),total:se?.length,seeAllUri:(0,o.Qjr)(V,["following"]).toURI(),id:"following",index:4,children:se?.map(((e,t)=>(0,p.jsx)(h,{index:t,entity:e},e.uri)))}):null,t&&x&&("editProfile"===b?(0,p.jsx)(Xe,{uri:e,name:Z,image:q,onClose:ge,shouldOpenImagePicker:j,userCapabilities:{edit_image:!R?.edit_image_disabled,edit_name:!R?.edit_name_disabled}}):null)]})})]})},Oi=e=>{const{uri:t}=e,{data:i,loading:a,error:r}=(0,v.Z)(f.Eo,[{uri:t}]),{public_playlists:s,total_public_playlists_count:o=0}=i||{};return a?(0,p.jsx)(d.LoadingPage,{hasError:null!==r,errorMessage:u.Ru.get("error.not_found.title.page")}):(0,p.jsx)(c.$,{total:o,title:u.Ru.get("public_playlists"),showAll:!0,fullPage:!0,rowGap:l.lT,children:s?.map(((e,t)=>(0,p.jsx)(w.B,{index:t,uri:e.uri,name:e.name,authorName:e.owner_name,description:e.followers_count?u.Ru.get("user.followers",e.followers_count):"",images:[{url:(0,Ri.m)({imageUriOrUrl:e.image_url}),width:300,height:300}]},e.uri)))})},Ui=e=>{const{uri:t}=e,{data:i,loading:a,error:r}=(0,v.Z)(f.sL,[{uri:t,limit:50}]),s=i?.artists;return a?(0,p.jsx)(d.LoadingPage,{hasError:null!==r,errorMessage:u.Ru.get("error.not_found.title.page")}):(0,p.jsx)(c.$,{total:s?.length,title:u.Ru.get("recently_played_artists"),showAll:!0,fullPage:!0,rowGap:l.lT,children:s?.map(((e,t)=>(0,p.jsx)(m.a,{index:t,name:e.name,uri:e.uri,images:[{url:e.image_url}]},e.uri)))})},Li=()=>{const{topArtists:e,loading:t,error:i}=hi({includeTopArtists:!0,includeTopTracks:!1,topArtistsLimit:100,topTracksLimit:0});return t?(0,p.jsx)(d.LoadingPage,{hasError:null!==i,errorMessage:u.Ru.get("error.not_found.title.page")}):null===e?null:(0,p.jsx)(c.$,{total:e.items.length,title:u.Ru.get("top_artists_this_month"),subtitle:u.Ru.get("only_visible_to_you"),showAll:!0,fullPage:!0,rowGap:l.lT,children:e.items.map(((e,t)=>(0,p.jsx)(m.a,{index:t,uri:e.uri,name:e.profile.name,images:e.visuals.avatarImage?.sources??[]},e.uri)))})},Mi=({isCurrentUser:e})=>e?(0,p.jsx)(Li,{}):(0,p.jsx)(d.LoadingPage,{hasError:!0,errorMessage:u.Ru.get("error.not_found.title.page")}),Di=({uri:e})=>{const{topTracks:t,loading:i,error:a}=hi({includeTopArtists:!1,includeTopTracks:!0,topArtistsLimit:0,topTracksLimit:100});return i?(0,p.jsx)(d.LoadingPage,{hasError:null!==a,errorMessage:u.Ru.get("error.not_found.title.page")}):null===t?null:(0,p.jsxs)("div",{className:W()("contentSpacing",wi),children:[(0,p.jsxs)("div",{className:Pi,children:[(0,p.jsx)(J.E,{as:"h1",variant:"titleMedium",className:Ti,children:u.Ru.get("top_tracks_this_month")}),(0,p.jsx)(J.E,{as:"p",variant:"bodySmall",children:u.Ru.get("only_visible_to_you")})]}),(0,p.jsx)(ti,{tracks:t.items,uri:e,hasHeaderRow:!0})]})},Bi=({uri:e,isCurrentUser:t})=>t?(0,p.jsx)(Di,{uri:e}):(0,p.jsx)(d.LoadingPage,{hasError:!0,errorMessage:u.Ru.get("error.not_found.title.page")});var Fi=i(21762);const Hi="cubl27eU3uN3hmAiqdmQ",Gi=(0,a.memo)((function(){const{userId:e=""}=(0,r.g)(),t=decodeURIComponent(e),i=(0,o.Qjr)(t).toURI(),a=(e=>{const t=(0,pt.V)(),i=(0,Fi.C)()?.username;return!t&&i===e})(t);return(0,p.jsx)("section",{className:Hi,children:(0,p.jsxs)(r.BV,{children:[(0,p.jsx)(r.qh,{path:"playlists",element:(0,p.jsx)(n.e,{pageId:s.$h.PROFILE_PLAYLISTS,children:(0,p.jsx)("div",{className:"contentSpacing",children:(0,p.jsx)(Oi,{uri:i})})})}),(0,p.jsx)(r.qh,{path:"top/tracks",element:(0,p.jsx)(n.e,{pageId:s.$h.PROFILE_TOP_TRACKS,children:(0,p.jsx)("div",{className:"contentSpacing",children:(0,p.jsx)(Bi,{uri:i,isCurrentUser:a})})})}),(0,p.jsx)(r.qh,{path:"top/artists",element:(0,p.jsx)(n.e,{pageId:s.$h.PROFILE_TOP_ARTISTS,children:(0,p.jsx)("div",{className:"contentSpacing",children:(0,p.jsx)(Mi,{isCurrentUser:a})})})}),(0,p.jsx)(r.qh,{path:"recently-played-artists",element:(0,p.jsx)(n.e,{pageId:s.$h.PROFILE_RECENTLY_PLAYED_ARTISTS,children:(0,p.jsx)("div",{className:"contentSpacing",children:(0,p.jsx)(Ui,{uri:i})})})}),(0,p.jsx)(r.qh,{path:"following",element:(0,p.jsx)(n.e,{pageId:s.$h.PROFILE_FOLLOWING,children:(0,p.jsx)("div",{className:"contentSpacing",children:(0,p.jsx)(y,{uri:i})})})}),(0,p.jsx)(r.qh,{path:"followers",element:(0,p.jsx)(n.e,{pageId:s.$h.PROFILE_FOLLOWERS,children:(0,p.jsx)("div",{className:"contentSpacing",children:(0,p.jsx)(x,{uri:i})})})}),(0,p.jsx)(r.qh,{path:"/",element:(0,p.jsx)(n.e,{pageId:s.$h.PROFILE,children:(0,p.jsx)(Ci,{uri:i,isCurrentUser:a})})})]})})}))},21762:(e,t,i)=>{i.d(t,{C:()=>s});var a=i(62411),r=i(7307);const s=()=>{const e=(0,a.d4)((e=>e.session?.user));return e?{type:r.c.USER,uri:e.uri,username:e.id,displayName:e.display_name??null,images:e.images.map((({url:e,width:t,height:i})=>({url:e,width:t||void 0,height:i||void 0})))}:null}},58337:(e,t,i)=>{i.d(t,{H:()=>n});var a=i(30758),r=i(85505),s=i(47095),o=i(37948);function n(e=null,t=r.l0o){const{backgroundColor:i}=(0,s.oI)(),n=(0,s.as)(),l=(0,o.z)(e);return(0,a.useEffect)((()=>(n((0,s.Mo)(l)),()=>{n((0,s.Hf)())})),[l,n]),i||t}},28828:(e,t,i)=>{i.d(t,{a:()=>a});const a=e=>e?.linked_from?.uri||e.uri},63547:(e,t,i)=>{i.d(t,{b:()=>s,g:()=>r});var a=i(30758);let r=function(e){return e[e.loading=0]="loading",e[e.loaded=1]="loaded",e[e.error=2]="error",e}({});function s(e,t){const i=e?r.loading:r.error,[s,o]=(0,a.useState)(i);return(0,a.useEffect)((()=>{const i=()=>{o(r.loaded)},a=()=>{o(r.error)};if(!e)return o(r.error),()=>{};o(r.loading);const s=document.createElement("img");return s.addEventListener("load",i),s.addEventListener("error",a),s.setAttribute("src",e),t&&s.setAttribute("srcSet",t),()=>{s.removeEventListener("load",i),s.removeEventListener("error",a)}}),[e,t]),s}}}]);
//# sourceMappingURL=xpui-routes-profile.js.map