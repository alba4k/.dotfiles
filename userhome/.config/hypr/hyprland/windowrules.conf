#  HYPRLAND - alba4k
#
# Documentation: https://wiki.hyprland.org
#
# ##############################################
# ###               WINDOWRULES              ###
# ##############################################

# Inhibid idle when there's a fullscreen window
windowrule = match:title .*, idle_inhibit fullscreen

# Random apps that I want to float
windowrule = match:class onedriver-launcher, float on
windowrule = match:class org.kde.kdeconnect.handler, float on
windowrule = match:class org.prismlauncher.PrismLauncher, match:title Attendere.*, float on
windowrule = match:class xdg-desktop-portal-gtk, float on
windowrule = match:class thunar.*, match:title Avanzamento delle operazione sui file, float on
windowrule = match:class thunar.*, match:title Rinomina di .*, float on
windowrule = match:class [Ww]aydroid.*, float on

# Privacy
windowrule = match:class Bitwarden, no_screen_share on

# Games
windowrule = match:class hollow_knight.x86_64, tile on
windowrule = match:class hexceed, tile on
windowrule = match:class steam_app_271590, tile on # GTA V
windowrule = match:class steam_app_312520, tile on # Rain World
#windowrule = match:class steam_app_322170, tile on # Geometry Dash
windowrule = match:class steam_app_387290, tile on # Ori And The Blind Forest: Definitive Edition
windowrule = match:class steam_app_1172620, tile on # Sea of Thieves
windowrule = match:class steam_app_1671210, tile on # Deltarune
# windowrule = match:class Minecraft.*, tile on

# Flameshot
windowrule {
    name = flameshot
    match {
        class = flameshot
        title = flameshot
    }

    border_size = 0
    float = on
    fullscreen_state = 2 0
    max_size = 3840 1440
    min_size = 3840 1440
    move = 0 0
    pin = on
    rounding = 0
    size = 3840 1440
    stay_focused = on
    suppress_event = fullscreen
}
windowrule = match:class flameshot, match:title Upload image, float on
windowrule = match:class flameshot, match:title Configuration, float on
windowrule = match:class flameshot, match:title Capture Launcher, float on
windowrule = match:class flameshot, match:title Save screenshot, float on

# KDE Connect laser pointer
windowrule {
    name = kdeconnect
    match:class = org.kdeconnect.daemon

    border_size = 0
    float = on
    no_blur = on
    rounding = 0
    size = 100% 100%
    suppress_event = fullscreen
}

# Firefox stuff
windowrule {
    name = firefox-pip
    match {
        class = firefox
        title = Picture-in-Picture
    }

    float = on
    keep_aspect_ratio = on
}

# Emote (closes when it loses focus)
# windowrule = match:class emote, stayfocused

# Vesktop cringe startup window
# windowrule {
#     name = vesktop-startup
#     match:title = vesktop
#
#     move = -200 -200
#     no_anim = on
#     no_blur = on
#     opacity = 0
#     size = 0 0
# }

# Various authentication stuff
windowrule = match:class lxpolkit, stay_focused on
windowrule = match:class lxpolkit, pin on
windowrule = match:class lxpolkit, match:title Autenticazione, center on
windowrule = match:class lxpolkit, match:title Autenticazione, size 548 314
windowrule = match:class lxpolkit, match:title Informazione, center on
windowrule = match:class lxpolkit, match:title Errore, center on

windowrule {
    name = nm-applet-auth
    match {
        class = nm-applet
        title = Richiesta autenticazione rete Wi-Fi
    }

    center = on
    pin = on
    stay_focused = on
}

# Bugged telegram media viewer
windowrule {
    name = telegram-viewer
    match {
        class = org.telegram.desktop
        title = Visualizzatore multimediale
    }

    float = on
    fullscreen = on
}

# IntelliJ popups
windowrule = match:class (jetbrains-idea-ce), match:title ^win(.*), no_initial_focus on

# LAYERRULES

# Rofi (lbonn Wayland fork)
layerrule = match:namespace rofi, blur on
layerrule = match:namespace rofi, ignore_alpha 0
#layerrule = match:namespace rofi, dimaround

# Dunst
layerrule = match:namespace notifications, blur on
layerrule = match:namespace notifications, ignore_alpha 0
layerrule = match:namespace notifications, above_lock on

# Wlogout
layerrule = match:namespace logout_dialog, blur on
layerrule = match:namespace logout_dialog, ignore_alpha 0

# Waybar
layerrule = match:namespace waybar, blur on
layerrule = match:namespace waybar, ignore_alpha 0.1
layerrule = match:namespace waybar, blur_popups on

# Sway Notification Center
layerrule = match:namespace swaync-control-center, blur on
layerrule = match:namespace swaync-control-center, ignore_alpha 0.2

# Slurp
layerrule = match:namespace selection, blur on
layerrule = match:namespace selection, ignore_alpha 0

